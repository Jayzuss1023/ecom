(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6492],{10169:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(95155),n=r(65509),l=r(12115);let i=function(e){let{product:t,disabled:r}=e,{addItem:i,removeItem:a,getItemCount:u}=(0,n.A)(),c=u(t._id),[o,d]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{d(!0)},[]),o)?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>a(t._id),className:"w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200\n             ".concat(0===c?"bg-gray-100 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300","\n            "),disabled:0===c||r,children:(0,s.jsx)("span",{children:"-"})}),(0,s.jsx)("span",{className:"w-8 text-center font-semibold",children:c}),(0,s.jsx)("button",{onClick:()=>i(t),className:"w-8 h-8 rounded-full flex items-center justify-center transition-colors duation-200 \n            ".concat(r?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600","\n            "),children:(0,s.jsx)("span",{children:"+"})})]}):null}},34477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return n.findSourceMapURL}});let s=r(53806),n=r(31818),l=r(34979).createServerReference},35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}}),r.o(s,"useSelectedLayoutSegments")&&r.d(t,{useSelectedLayoutSegments:function(){return s.useSelectedLayoutSegments}}),r.o(s,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return s.useServerInsertedHTML}})},48195:(e,t,r)=>{Promise.resolve().then(r.bind(r,48799))},48799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(95155),n=r(65509),l=r(27016),i=r(96796),a=r(35695),u=r(12115),c=r(66766),o=r(10169),d=r(92752);let m=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})})};var f=r(34477);let x=(0,f.createServerReference)("602fd55761ee54e9cdb7b15124c02f3af68746808d",f.callServer,void 0,f.findSourceMapURL,"createCheckoutSession"),h=function(){let e=(0,n.A)(e=>e.getGroupedItems()),{isSignedIn:t}=(0,l.d)(),{user:r}=(0,i.Jd)(),f=(0,a.useRouter)(),[h,p]=(0,u.useState)(!1),[v,b]=(0,u.useState)(!1);if((0,u.useEffect)(()=>{p(!0)},[]),!h)return(0,s.jsx)(m,{});if(0===e.length)return(0,s.jsxs)("div",{className:"container mx-auto p-4 flex flex-col items-center justify-center min-h-[50vh]",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Your Basket"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"Your basket is empty..."})]});let g=async()=>{if(t){b(!0);try{var s,n;let t={orderNumber:crypto.randomUUID(),customerName:null!==(s=null==r?void 0:r.fullName)&&void 0!==s?s:"Unknown",customerEmail:null!==(n=null==r?void 0:r.emailAddresses[0].emailAddress)&&void 0!==n?n:"Unknown",clerkUserId:r.id},l=await x(e,t);l&&(window.location.href=l)}catch(e){console.error(e)}finally{b(!1)}}};return(0,s.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Your Basket"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,s.jsx)("div",{className:"flex-grow",children:null==e?void 0:e.map(e=>{var t,r;return(0,s.jsxs)("div",{className:"mb-4 p-4 border rounded flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center cursor-pointer flex-1 min-w-0",onClick:()=>{var t;return f.push("/product/".concat(null===(t=e.product.slug)||void 0===t?void 0:t.current))},children:[(0,s.jsx)("div",{className:"",children:e.product.image&&(0,s.jsx)(c.default,{src:(0,d.b)(e.product.image).url(),alt:null!==(t=e.product.name)&&void 0!==t?t:"Product Image",className:"w-full h-full object-cover rounded",width:96,height:96})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold truncate",children:e.product.name}),(0,s.jsxs)("p",{className:"text-sm sm:text-base",children:["price: $",((null!==(r=e.product.price)&&void 0!==r?r:0)*e.quantity).toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"flex items-center ml-4 flex-shrink-0",children:(0,s.jsx)(o.default,{product:e.product})})]},e.product._id)})}),(0,s.jsxs)("div",{className:"w-full lg:w-80 lg:sticky lg:top-4 h-fit bg-white p-6 border rounded order-first lg:order-last fixed bottom-0 left-0 lg:left-auto",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold",children:"Order Summary"}),(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("p",{className:"flex justift-between",children:[(0,s.jsx)("span",{children:"Items:"}),(0,s.jsx)("span",{children:e.reduce((e,t)=>e+t.quantity,0)})]}),(0,s.jsxs)("p",{className:"flex justift-between text-2xl font-bold border-t pt-2",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["$",n.A.getState().getTotalPrice().toFixed(2)]})]})]}),t?(0,s.jsx)("button",{onClick:g,disabled:v,className:"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded hover-bg-blue-600 disabled:bg-gray-400",children:v?"Processing...":"Checkout"}):(0,s.jsx)(i.hZ,{mode:"modal",children:(0,s.jsx)("button",{className:"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Sign in to checkout"})})]}),(0,s.jsx)("div",{className:"h-64 lg:h-0"})]})]})}},61504:(e,t,r)=>{"use strict";r.d(t,{Lg:()=>l,RT:()=>n,XV:()=>s});let s=r(87358).env.NEXT_PUBLIC_SANITY_API_VERSION||"2025-03-28",n=i("production","Missing environment variable: NEXT_PUBLIC_SANITY_DATASET"),l=i("ql71ol7i","Missing environment variable: NEXT_PUBLIC_SANITY_PROJECT_ID");function i(e,t){if(void 0===e)throw Error(t);return e}},65509:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(65453),n=r(46786);let l=(0,s.v)()((0,n.Zr)((e,t)=>({items:[],addItem:t=>e(e=>e.items.find(e=>e.product._id===t._id)?{items:e.items.map(e=>e.product._id===t._id?{...e,quantity:e.quantity+1}:e)}:{items:[...e.items,{product:t,quantity:1}]}),removeItem:t=>e(e=>({items:e.items.reduce((e,r)=>(r.product._id===t?r.quantity>1&&e.push({...r,quantity:r.quantity-1}):e.push(r),e),[])})),clearBasket:()=>e({items:[]}),getTotalPrice:()=>t().items.reduce((e,t)=>{var r;return e+(null!==(r=t.product.price)&&void 0!==r?r:0)*t.quantity},0),getItemCount:e=>{let r=t().items.find(t=>t.product._id===e);return r?r.quantity:0},getGroupedItems:()=>t().items}),{name:"basket-store"}))},66766:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var s=r(71469),n=r.n(s)},71469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return u},getImageProps:function(){return a}});let s=r(88229),n=r(38883),l=r(33063),i=s._(r(51193));function a(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let u=l.Image},92752:(e,t,r)=>{"use strict";r.d(t,{b:()=>c});var s=r(63296),n=r(61504),l=r(87358);let i=(0,s.UU)({projectId:n.Lg,dataset:n.RT,apiVersion:n.XV,useCdn:!0,stega:{studioUrl:l.env.VERCEL_URL?"https://".concat(l.env.VERCEL_URL,"/studio"):"".concat("http://localhost:3000","/studio")}});var a=r(54612);let u=r.n(a)()(i);function c(e){return u.image(e)}}},e=>{var t=t=>e(e.s=t);e.O(0,[3296,3063,4612,3183,8441,1684,7358],()=>t(48195)),_N_E=e.O()}]);