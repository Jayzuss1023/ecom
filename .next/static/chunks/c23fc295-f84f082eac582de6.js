"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5478],{47242:(e,t,n)=>{let i;n.r(t),n.d(t,{BackLink:()=>eQ,ChildLink:()=>eJ,ComponentBuilder:()=>lQ,ComponentViewBuilder:()=>lX,ConfirmDeleteDialogContainer:()=>tr,DEFAULT_INTENT_HANDLER:()=>on,DocumentBuilder:()=>l5,DocumentInspectorHeader:()=>nU,DocumentListBuilder:()=>oc,DocumentListItemBuilder:()=>ob,DocumentPane:()=>sV,DocumentPaneProviderWrapper:()=>sY,DocumentTypeListBuilder:()=>ov,FormViewBuilder:()=>l0,GenericListBuilder:()=>oo,GenericViewBuilder:()=>lJ,HELP_URL:()=>l$,InitialValueTemplateItemBuilder:()=>l8,LOADING_PANE:()=>iV,ListBuilder:()=>ox,ListItemBuilder:()=>og,LoadingPane:()=>nE,MenuItemBuilder:()=>lH,MenuItemGroupBuilder:()=>lU,Pane:()=>td,PaneContainer:()=>lA,PaneContent:()=>tp,PaneHeader:()=>tD,PaneHeaderActions:()=>tG,PaneItem:()=>t2,PaneLayout:()=>tB,ParameterizedLink:()=>eZ,ReferenceChildLink:()=>eG,SerializeError:()=>lM,StructureToolProvider:()=>af,_DEBUG:()=>iN,component:()=>l2,createStructureBuilder:()=>oE,defaultInitialValueTemplateItems:()=>l9,defaultIntentChecker:()=>oi,documentFromEditor:()=>l6,documentFromEditorWithInitialValue:()=>l7,form:()=>l1,getOrderingMenuItem:()=>lN,getOrderingMenuItemsForSchemaType:()=>lY,getTypeNamesFromFilter:()=>ou,isDocumentListItem:()=>oj,maybeSerializeInitialValueTemplateItem:()=>oe,maybeSerializeMenuItem:()=>lO,maybeSerializeMenuItemGroup:()=>lV,maybeSerializeView:()=>lZ,menuItemsFromInitialValueTemplateItems:()=>ot,pane:()=>ax,pane$1:()=>ag,setActivePanes:()=>oC,shallowIntentChecker:()=>ol,structureLocaleNamespace:()=>eB,structureTool:()=>ah,useDocumentPane:()=>nk,useDocumentTitle:()=>nO,usePane:()=>tu,usePaneLayout:()=>eq,usePaneOptions:()=>sW,usePaneRouter:()=>eX,useStructureTool:()=>nP});var r=n(30994),s=n(95155),l=n(43377),o=n(83060),a=n(24323),d=n(12115),c=n(66201),u=n(90330),p=n(92515),m=n(46633),h=n(45577),f=n(50330),x=n(54557),g=n(20389),y=n(20350),b=n(86640),j=n(7250),v=n(97124),_=n(8561),w=n(82183),I=n(44987),S=n(25561),E=n(60760),k=n(537),T=n(71286),C=n(47242),D=n(70954),R=n(29370),z=n(40529),P=n(56864),A=n(79332),M=n(43890),$=n(42284),L=n(93917),B=n(69647),O=n(50793),H=n(90873),N=n(18343),Y=n(73094),V=n(10883),U=n(17336),F=n(74035),W=n(55067),K=n(62789),Q=n(49967),q=n(54865),J=n(8124),Z=n(98256),G=n(77246),X=n(82484),ee=n(7663),et=n(54682),en=n(8454),ei=n(63144),er=n(85363),es=n(34e3),el=n(31431),eo=n(5522),ea=n(54457),ed=n(22135),ec=n(71944),eu=n(37366),ep=n(13131),em=n(27046),eh=n(28662),ef=n(94372),ex=n(25386),eg=n(91218),ey=n(12527),eb=n(99985),ej=n(55049),ev=n(56236),e_=n(45833),ew=n(29655),eI=n(18260),eS=n(68721),eE=n(46295),ek=n(36674),eT=n(65432),eC=n(60245),eD=n(32090),eR=n(3711),ez=n(7433),eP=n(70598),eA=n(56670),eM=n(32866),e$=n(36268),eL=n(11032);let eB="structure",eO=(0,x.GW0)({locale:"en-US",namespace:eB,resources:()=>n.e(2620).then(n.bind(n,52620))});function eH(e){let t,n,i,r;let o=(0,l.c)(21),{document:a}=e,d=(0,x.pDY)();o[0]!==a._type||o[1]!==d?(t=d.get(a._type),o[0]=a._type,o[1]=d,o[2]=t):t=o[2];let c=t,{t:u}=(0,x.Bdt)(eB);o[3]!==a||o[4]!==c?(n={schemaType:c,value:a},o[3]=a,o[4]=c,o[5]=n):n=o[5];let{error:p,value:m}=(0,x.MOl)(n);if(!c){let e,t;return o[6]!==a._type||o[7]!==u?(e=u("doc-title.unknown-schema-type.text",{schemaType:a._type}),o[6]=a._type,o[7]=u,o[8]=e):e=o[8],o[9]!==e?(t=(0,s.jsx)("code",{children:e}),o[9]=e,o[10]=t):t=o[10],t}if(p){let e,t;return o[11]!==p.message||o[12]!==u?(e=u("doc-title.error.text",{errorMessage:p.message}),o[11]=p.message,o[12]=u,o[13]=e):e=o[13],o[14]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),o[14]=e,o[15]=t):t=o[15],t}return o[16]!==u||o[17]!==m?.title?(i=m?.title||(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:u("doc-title.fallback.text")}),o[16]=u,o[17]=m?.title,o[18]=i):i=o[18],o[19]!==i?(r=(0,s.jsx)(s.Fragment,{children:i}),o[19]=i,o[20]=r):r=o[20],r}let eN=(0,I.I4)(o.az)`
  margin-left: auto;
`,eY=I.I4.details`
  flex: none;

  &[open] ${eN} {
    transform: rotate(180deg);
  }
`,eV=I.I4.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,eU=I.I4.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,o.D0)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,o.D0)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,o.D0)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,eF=(0,I.I4)(o.so)`
  min-height: 33px;
`,eW=e=>{let t,n,i,a,d,c;let p=(0,l.c)(13),{t:m}=(0,x.Bdt)(eB),h=e.totalCount-e.references.length;return h?(p[0]!==h||p[1]!==m?(t=m("confirm-delete-dialog.other-reference-count.title",{count:h}),p[0]=h,p[1]=m,p[2]=t):t=p[2],p[3]!==t?(n=(0,s.jsx)(o.EY,{size:1,muted:!0,children:t}),p[3]=t,p[4]=n):n=p[4],p[5]!==m?(i=m("confirm-delete-dialog.other-reference-count.tooltip"),p[5]=m,p[6]=i):i=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(o.EY,{size:1,muted:!0,children:(0,s.jsx)(u.YzR,{})}),p[7]=a):a=p[7],p[8]!==i?(d=(0,s.jsx)(r.m_,{portal:!0,placement:"top",content:i,children:a}),p[8]=i,p[9]=d):d=p[9],p[10]!==n||p[11]!==d?(c=(0,s.jsx)(o.az,{padding:2,children:(0,s.jsxs)(o.cV,{space:2,children:[n,d]})}),p[10]=n,p[11]=d,p[12]=c):c=p[12],c):null};function eK(e){let t,n,i,a,d,c,u;let p=(0,l.c)(27),{icon:m,layout:h,presence:f,schemaType:g,value:y}=e,b=(0,x.r0j)(y._id),{perspectiveStack:j}=(0,x.QO2)();p[0]!==j||p[1]!==e.documentPreviewStore||p[2]!==g||p[3]!==y._id?(n=(0,x.TU6)(e.documentPreviewStore,g,y._id,j),p[0]=j,p[1]=e.documentPreviewStore,p[2]=g,p[3]=y._id,p[4]=n):n=p[4],t=n,p[5]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},p[5]=i):i=p[5];let{snapshot:v,original:_,isLoading:w}=(0,k.J)(t,i);p[6]!==w||p[7]!==f||p[8]!==b.draft||p[9]!==b.published||p[10]!==b.versions?(a=w?null:(0,s.jsx)(r.vE,{children:(0,s.jsxs)(o.so,{align:"center",gap:3,children:[f&&f.length>0&&(0,s.jsx)(x.JEU,{presence:f}),(0,s.jsx)(x.ZDR,{draft:b.draft,published:b.published,versions:b.versions})]})}),p[6]=w,p[7]=f,p[8]=b.draft,p[9]=b.published,p[10]=b.versions,p[11]=a):a=p[11];let I=a;p[12]!==b.draft||p[13]!==b.published||p[14]!==b.versions?(d=(0,s.jsx)(x.Aii,{draft:b.draft,published:b.published,versions:b.versions}),p[12]=b.draft,p[13]=b.published,p[14]=b.versions,p[15]=d):d=p[15];let S=d;return p[16]!==_||p[17]!==v||p[18]!==y?(c=(0,x.ADU)({snapshot:v,original:_,fallback:y}),p[16]=_,p[17]=v,p[18]=y,p[19]=c):c=p[19],p[20]!==m||p[21]!==w||p[22]!==h||p[23]!==I||p[24]!==c||p[25]!==S?(u=(0,s.jsx)(x.m6P,{...c,isPlaceholder:w,icon:m,layout:h,status:I,tooltip:S}),p[20]=m,p[21]=w,p[22]=h,p[23]=I,p[24]=c,p[25]=S,p[26]=u):u=p[26],u}let eQ=(0,d.forwardRef)(function(e,t){let n,i,r,o,a;let u=(0,l.c)(9),{routerPanesState:p,groupIndex:m}=(0,d.useContext)(c.l4);return u[0]!==m||u[1]!==p?(i=p.slice(0,m),u[0]=m,u[1]=p,u[2]=i):i=u[2],n=i,u[3]!==n?(o={panes:n},u[3]=n,u[4]=o):o=u[4],r=o,u[5]!==e||u[6]!==t||u[7]!==r?(a=(0,s.jsx)(T.s8,{...e,ref:t,state:r}),u[5]=e,u[6]=t,u[7]=r,u[8]=a):a=u[8],a});function eq(){let e=(0,d.useContext)(c._U);if(!e)throw Error("PaneLayout: missing context value");return e}let eJ=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,u;let p=(0,l.c)(19);p[0]!==e?({childId:n,childPayload:r,childParameters:i,...o}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=r,p[4]=o):(n=p[1],i=p[2],r=p[3],o=p[4]);let{routerPanesState:m,groupIndex:h}=(0,d.useContext)(c.l4);if(p[5]!==n||p[6]!==i||p[7]!==r||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==r?(e=[{id:n,params:i,payload:r}],p[11]=n,p[12]=i,p[13]=r,p[14]=e):e=p[14],a={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=r,p[8]=h,p[9]=m,p[10]=a}else a=p[10];return p[15]!==t||p[16]!==o||p[17]!==a?(u=(0,s.jsx)(T.s8,{...o,ref:t,state:a}),p[15]=t,p[16]=o,p[17]=a,p[18]=u):u=p[18],u}),eZ=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,u,p,m,h;let f=(0,l.c)(22),{routerPanesState:g,groupIndex:y,siblingIndex:b}=(0,d.useContext)(c.l4);f[0]!==e?({params:n,payload:i,...r}=e,f[0]=e,f[1]=n,f[2]=i,f[3]=r):(n=f[1],i=f[2],r=f[3]);let j=(0,x.$6H)(n),v=(0,x.$6H)(i),_=g[y],w=_[b],I=j??w.params,S=v??w.payload;f[4]!==w||f[5]!==I||f[6]!==S?(a={...w,params:I,payload:S},f[4]=w,f[5]=I,f[6]=S,f[7]=a):a=f[7];let E=a;f[8]!==_||f[9]!==E||f[10]!==b?(u=[..._.slice(0,b),E,..._.slice(b+1)],f[8]=_,f[9]=E,f[10]=b,f[11]=u):u=f[11];let k=u;f[12]!==g||f[13]!==y||f[14]!==k?(p=[...g.slice(0,y),k,...g.slice(y+1)],f[12]=g,f[13]=y,f[14]=k,f[15]=p):p=f[15];let C=p;return f[16]!==C?(m={panes:C},f[16]=C,f[17]=m):m=f[17],o=m,f[18]!==o||f[19]!==t||f[20]!==r?(h=(0,s.jsx)(T.s8,{ref:t,...r,state:o}),f[18]=o,f[19]=t,f[20]=r,f[21]=h):h=f[21],h}),eG=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,d,c,u,p,m;let h=(0,l.c)(22);h[0]!==e?({documentId:i,documentType:r,parentRefPath:o,children:n,template:d,...a}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r,h[4]=o,h[5]=a,h[6]=d):(n=h[1],i=h[2],r=h[3],o=h[4],a=h[5],d=h[6]);let f=d?.params;return h[7]!==o?(c=(0,R.dI)(o),h[7]=o,h[8]=c):c=h[8],h[9]!==d?(u=d&&{template:d?.id},h[9]=d,h[10]=u):u=h[10],h[11]!==r||h[12]!==c||h[13]!==u?(p={type:r,parentRefPath:c,...u},h[11]=r,h[12]=c,h[13]=u,h[14]=p):p=h[14],h[15]!==n||h[16]!==i||h[17]!==t||h[18]!==a||h[19]!==f||h[20]!==p?(m=(0,s.jsx)(eJ,{...a,ref:t,childId:i,childPayload:f,childParameters:p,children:n}),h[15]=n,h[16]=i,h[17]=t,h[18]=a,h[19]=f,h[20]=p,h[21]=m):m=h[21],m});function eX(){return(0,d.useContext)(c.l4)}let e0=[];function e1(e){let t,n,i,r;let o=(0,l.c)(16),{onClick:a,type:d,value:c}=e,u=c?._id;o[0]!==u?(t=(0,x.IMx)(u),o[0]=u,o[1]=t):t=o[1];let p=(0,x.cVB)(t),m=(0,x.yKO)(),{ReferenceChildLink:h}=eX();o[2]!==h||o[3]!==d?.name||o[4]!==c?._id?(n=function(e){return(0,s.jsx)(h,{documentId:c?._id,documentType:d?.name,parentRefPath:e0,...e})},o[2]=h,o[3]=d?.name,o[4]=c?._id,o[5]=n):n=o[5];let f=n,g=d?.icon,y=p?.length>0?p:e0;return o[6]!==m||o[7]!==g||o[8]!==y||o[9]!==d||o[10]!==c?(i=(0,s.jsx)(eK,{documentPreviewStore:m,icon:g,layout:"compact",presence:y,schemaType:d,value:c}),o[6]=m,o[7]=g,o[8]=y,o[9]=d,o[10]=c,o[11]=i):i=o[11],o[12]!==a||o[13]!==f||o[14]!==i?(r=(0,s.jsx)(x.Ns2,{__unstable_focusRing:!0,as:f,"data-as":"a",onClick:a,radius:2,children:i}),o[12]=a,o[13]=f,o[14]=i,o[15]=r):r=o[15],r}function e2(e){let t,n,i,d,c,p,m,h,f,g,y,b,j,v,_,w,I,S,E,k;let T=(0,l.c)(78),{crossDatasetReferences:C,internalReferences:D,documentTitle:R,totalCount:z,action:P,datasetNames:A,hasUnknownDatasetNames:M,onReferenceLinkClick:$}=e,L=(0,x.pDY)(),B=(0,a.dj)(),{t:O}=(0,x.Bdt)(eB);T[0]!==$||T[1]!==L||T[2]!==O?(t=e=>{let t=L.get(e._type);return t?(0,s.jsx)(e1,{type:t,value:e,onClick:$}):(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(x.m6P,{icon:u.KSC,title:O("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:O("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},T[0]=$,T[1]=L,T[2]=O,T[3]=t):t=T[3];let H=t;if(D?.totalCount===0&&C?.totalCount===0){let e,t;return T[4]!==R?(e={DocumentTitle:()=>(0,s.jsx)("strong",{children:R})},T[4]=R,T[5]=e):e=T[5],T[6]!==P||T[7]!==O||T[8]!==e?(t=(0,s.jsx)(o.EY,{as:"p",size:1,children:(0,s.jsx)(x.HTc,{t:O,i18nKey:"confirm-delete-dialog.confirmation.text",context:P,components:e})}),T[6]=P,T[7]=O,T[8]=e,T[9]=t):t=T[9],t}if(T[10]!==P||T[11]!==C||T[12]!==A||T[13]!==R||T[14]!==M||T[15]!==D||T[16]!==H||T[17]!==O||T[18]!==B||T[19]!==z){let e,t,l,a;let w=[...A,...M?["unavailable"]:[]],I=O("confirm-delete-dialog.cdr-summary.subtitle",{count:w.length,datasets:w.join(", "),context:M&&w.length?"unavailable":""});d=o.so,_="column",c=4,T[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(o.EY,{"aria-hidden":"true",size:1,children:(0,s.jsx)(u.sAQ,{})}),T[34]=e):e=T[34],T[35]!==R?(t={DocumentTitle:()=>R},T[35]=R,T[36]=t):t=T[36],T[37]!==z?(l={count:z},T[37]=z,T[38]=l):l=T[38],T[39]!==O||T[40]!==t||T[41]!==l?(p=(0,s.jsx)(o.Zp,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,s.jsxs)(o.so,{children:[e,(0,s.jsx)(o.az,{flex:1,marginLeft:3,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:t,t:O,values:l})})})]})}),T[39]=O,T[40]=t,T[41]=l,T[42]=p):p=T[42],T[43]!==R?(a={DocumentTitle:()=>R},T[43]=R,T[44]=a):a=T[44],T[45]!==P||T[46]!==O||T[47]!==a?(m=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:O,context:P,components:a})})}),T[45]=P,T[46]=O,T[47]=a,T[48]=m):m=T[48],i=o.Zp,y=2,b=1,j="auto",v=2,n=o.so,h="column",T[49]!==D||T[50]!==H?(f=D.totalCount>0&&(0,s.jsxs)(o.BJ,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[D?.references.map(e=>s.jsx(o.az,{as:"li",children:H(e)},e._id)),D.totalCount>D.references.length&&(0,s.jsx)(o.az,{as:"li",padding:3,children:(0,s.jsx)(eW,{...D})})]}),T[49]=D,T[50]=H,T[51]=f):f=T[51],g=C.totalCount>0&&(0,s.jsxs)(eY,{"data-testid":"cross-dataset-references",style:{borderTop:D.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,s.jsx)(eV,{children:(0,s.jsx)(o.Zp,{as:"a",marginTop:2*(D.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,s.jsxs)(o.so,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(u.So9,{})}),(0,s.jsxs)(o.BJ,{space:2,children:[(0,s.jsx)(o.EY,{textOverflow:"ellipsis",size:1,children:O("confirm-delete-dialog.cdr-summary.title",{count:w.length,documentCount:O("confirm-delete-dialog.cdr-summary.document-count",{count:C.totalCount})})}),(0,s.jsx)(o.EY,{title:I,textOverflow:"ellipsis",size:1,muted:!0,children:I})]}),(0,s.jsx)(eN,{children:(0,s.jsx)(o.EY,{muted:!0,size:1,children:(0,s.jsx)(u.D3D,{})})})]})})}),(0,s.jsxs)(o.az,{overflow:"auto",paddingTop:2,children:[(0,s.jsxs)(eU,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:(0,s.jsx)(o.EY,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:O("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,s.jsx)("th",{children:(0,s.jsx)(o.EY,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,s.jsx)("th",{children:(0,s.jsx)(o.EY,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,s.jsx)("tbody",{children:C.references.filter(e3).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(o.EY,{size:1,children:n})}),(0,s.jsx)("td",{children:(0,s.jsx)(o.EY,{size:1,children:i||"unavailable"})}),(0,s.jsx)("td",{children:(0,s.jsxs)(eF,{align:"center",gap:2,justify:"flex-end",children:[(0,s.jsx)(o.EY,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,s.jsx)(r.$n,{mode:"bleed",icon:u.TdU,tooltipProps:{content:O("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{B.push({status:"error",title:O("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${l}-${t}`)})})]}),(0,s.jsx)(eW,{...C})]})]}),T[10]=P,T[11]=C,T[12]=A,T[13]=R,T[14]=M,T[15]=D,T[16]=H,T[17]=O,T[18]=B,T[19]=z,T[20]=n,T[21]=i,T[22]=d,T[23]=c,T[24]=p,T[25]=m,T[26]=h,T[27]=f,T[28]=g,T[29]=y,T[30]=b,T[31]=j,T[32]=v,T[33]=_}else n=T[20],i=T[21],d=T[22],c=T[23],p=T[24],m=T[25],h=T[26],f=T[27],g=T[28],y=T[29],b=T[30],j=T[31],v=T[32],_=T[33];return T[52]!==n||T[53]!==h||T[54]!==f||T[55]!==g?(w=(0,s.jsxs)(n,{direction:h,children:[f,g]}),T[52]=n,T[53]=h,T[54]=f,T[55]=g,T[56]=w):w=T[56],T[57]!==i||T[58]!==w||T[59]!==y||T[60]!==b||T[61]!==j||T[62]!==v?(I=(0,s.jsx)(i,{radius:y,shadow:b,flex:j,padding:v,children:w}),T[57]=i,T[58]=w,T[59]=y,T[60]=b,T[61]=j,T[62]=v,T[63]=I):I=T[63],T[64]!==R?(S={DocumentTitle:()=>R},T[64]=R,T[65]=S):S=T[65],T[66]!==P||T[67]!==O||T[68]!==S?(E=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:O,context:P,components:S})})}),T[66]=P,T[67]=O,T[68]=S,T[69]=E):E=T[69],T[70]!==d||T[71]!==c||T[72]!==p||T[73]!==m||T[74]!==I||T[75]!==E||T[76]!==_?(k=(0,s.jsxs)(d,{direction:_,gap:c,children:[p,m,I,E]}),T[70]=d,T[71]=c,T[72]=p,T[73]=m,T[74]=I,T[75]=E,T[76]=_,T[77]=k):k=T[77],k}function e3(e){return"projectId"in e}let e4=()=>(i||(i=(0,z.R)(document,"visibilitychange").pipe((0,N.Z)(null),(0,O.T)(()=>"visible"===document.visibilityState),(0,L.F)(),(0,ea.n)(e=>e?(0,P.O)(0,5e3):A.w),(0,ed.t)({refCount:!0,bufferSize:1}))),i),e5=(0,x.R11)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),e6=(0,x.R11)(([e,t])=>e4().pipe((0,ea.n)(()=>(function(e,t){let{versionedClient:n}=t;return e4().pipe((0,ea.n)(()=>(function(e,{versionedClient:t}){let n=(0,x.T4)(e),i=(0,x.IMx)(e),r={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(r).pipe((0,O.T)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,ea.n)(e=>{if(!e)return(0,M.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,Y.W)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,M.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function e7(e){return"string"!=typeof e.datasetName}function e8(e){return!!e&&""!==e}function e9(e){return e?.datasetName||""}function te(e){return e.projectId}let tt=(0,I.I4)(o.az)`
  box-sizing: border-box;
`,tn=(0,I.I4)(o.so).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function ti(e){let t,n,i,o,a,c,u,p,m,h;let f=(0,l.c)(40),{id:g,type:y,action:b,onCancel:j,onConfirm:v}=e,_=void 0===b?"delete":b,{t:w}=(0,x.Bdt)(eB),I=`deletion-confirmation-${(0,d.useId)()}`,{internalReferences:S,crossDatasetReferences:E,isLoading:k,totalCount:T,projectIds:C,datasetNames:D,hasUnknownDatasetNames:R}=function(e){let t,n,i,r,s,o,a,d,c;let u=(0,l.c)(24),p=(0,x.tH7)(x.miu),m=(0,x.q3J)();u[0]!==e?(t=(0,x.IMx)(e),u[0]=e,u[1]=t):t=u[1];let h=t;u[2]!==m||u[3]!==h?(n=[h,m],u[2]=m,u[3]=h,u[4]=n):n=u[4];let[f,g]=e5(n);u[5]!==h||u[6]!==p?(i=[h,p],u[5]=h,u[6]=p,u[7]=i):i=u[7];let[y,b]=e6(i);u[8]!==y?.references?(r=()=>Array.from(new Set(y?.references.map(te).filter(Boolean))).sort(),u[8]=y?.references,u[9]=r):r=u[9],u[10]!==r?(s=r(),u[10]=r,u[11]=s):s=u[11];let j=s;u[12]!==y?.references?(a=Array.from(new Set(y?.references.map(e9).filter(e8))).sort(),u[12]=y?.references,u[13]=a):a=u[13],o=a,u[14]!==y?.references?(d=()=>!!y?.references.some(e7),u[14]=y?.references,u[15]=d):d=u[15];let v=d(),_=(f?.totalCount||0)+(y?.totalCount||0),w=g||b;return u[16]!==y||u[17]!==o||u[18]!==v||u[19]!==f||u[20]!==j||u[21]!==_||u[22]!==w?(c={totalCount:_,projectIds:j,datasetNames:o,hasUnknownDatasetNames:v,internalReferences:f,crossDatasetReferences:y,isLoading:w},u[16]=y,u[17]=o,u[18]=v,u[19]=f,u[20]=j,u[21]=_,u[22]=w,u[23]=c):c=u[23],c}(g);f[0]!==g||f[1]!==y?(n={_id:g,_type:y},f[0]=g,f[1]=y,f[2]=n):n=f[2],t=n,f[3]!==t?(i=(0,s.jsx)(eH,{document:t}),f[3]=t,f[4]=i):i=f[4];let z=i,P=!k;return f[5]!==_||f[6]!==w?(o=w("confirm-delete-dialog.header.text",{context:_}),f[5]=_,f[6]=w,f[7]=o):o=f[7],f[8]!==w?(a=w("confirm-delete-dialog.cancel-button.text"),f[8]=w,f[9]=a):a=f[9],f[10]!==j||f[11]!==a?(c={onClick:j,text:a},f[10]=j,f[11]=a,f[12]=c):c=f[12],f[13]!==_||f[14]!==v||f[15]!==P||f[16]!==w||f[17]!==T?(u=P?{text:w(T>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:_}),onClick:v}:void 0,f[13]=_,f[14]=v,f[15]=P,f[16]=w,f[17]=T,f[18]=u):u=f[18],f[19]!==c||f[20]!==u?(p={cancelButton:c,confirmButton:u},f[19]=c,f[20]=u,f[21]=p):p=f[21],f[22]!==_||f[23]!==E||f[24]!==D||f[25]!==z||f[26]!==R||f[27]!==S||f[28]!==k||f[29]!==j||f[30]!==C||f[31]!==w||f[32]!==T?(m=(0,s.jsx)(tt,{children:E&&S&&!k?(0,s.jsx)(e2,{crossDatasetReferences:E,internalReferences:S,documentTitle:z,isLoading:k,totalCount:T,action:_,projectIds:C,datasetNames:D,hasUnknownDatasetNames:R,onReferenceLinkClick:j}):(0,s.jsx)(tn,{"data-testid":"loading-container",children:(0,s.jsx)(x.gd4,{showText:!0,title:w("confirm-delete-dialog.loading.text")})})}),f[22]=_,f[23]=E,f[24]=D,f[25]=z,f[26]=R,f[27]=S,f[28]=k,f[29]=j,f[30]=C,f[31]=w,f[32]=T,f[33]=m):m=f[33],f[34]!==I||f[35]!==j||f[36]!==m||f[37]!==o||f[38]!==p?(h=(0,s.jsx)(r.lG,{width:1,id:I,header:o,footer:p,onClose:j,onClickOutside:j,children:m}),f[34]=I,f[35]=j,f[36]=m,f[37]=o,f[38]=p,f[39]=h):h=f[39],h}function tr(e){let t,n;let i=(0,l.c)(6),{t:a}=(0,x.Bdt)(eB),c=(0,d.useId)(),[u,p]=(0,d.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>p(null),i[0]=t):t=i[0];let m=t;return i[1]!==u||i[2]!==c||i[3]!==e||i[4]!==a?(n=u?(0,s.jsx)(r.lG,{id:`dialog-error-${c}`,"data-testid":"confirm-delete-error-dialog",header:a("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:a("confirm-delete-dialog.error.retry-button.text"),onClick:m,tone:"default"}},onClose:e.onCancel,children:(0,s.jsx)(o.az,{padding:4,children:(0,s.jsx)(o.EY,{size:1,children:a("confirm-delete-dialog.error.message.text")})})}):(0,s.jsx)(r.tH,{onCatch:p,children:(0,s.jsx)(ti,{...e})}),i[1]=u,i[2]=c,i[3]=e,i[4]=a,i[5]=n):n=i[5],n}function ts(e){let t,n,i;let r=(0,l.c)(6),{children:o,ms:a}=e,c=void 0===a?0:a,[u,p]=(0,d.useState)(c<=0);if(r[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},n=[c],r[0]=c,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,d.useEffect)(t,n),!u||!o){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s.Fragment,{}),r[3]=e):e=r[3],e}return r[4]!==o?(i="function"==typeof o?o():o,r[4]=o,r[5]=i):i=r[5],i}let tl=(0,I.I4)(o.Wd)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function to(e){let t,n;let i=(0,l.c)(7),{disabled:r,element:o}=e,{resize:a}=eq(),[c,u]=(0,d.useState)(!1);i[0]!==o||i[1]!==a?(t=e=>{if(!o)return;u(!0),e.preventDefault();let t=e.pageX;a("start",o,0);let n=e=>{e.preventDefault(),a("move",o,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",o,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=o,i[1]=a,i[2]=t):t=i[2];let p=t,m=r?"":void 0,h=c?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,s.jsx)(tl,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let ta=(0,I.I4)(o.Zp)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,td=(0,d.forwardRef)(function(e,t){let n,i,r,a,u,p,m,h,f,g,y,b,j,v,_,w,I,S,E,k,T,C,D,R,z,P,A,M,$,L,B,O;let H=(0,l.c)(86);H[0]!==e?({children:n,currentMinWidth:r,currentMaxWidth:i,flex:h,id:a,minWidth:p,maxWidth:u,selected:f,...m}=e,H[0]=e,H[1]=n,H[2]=i,H[3]=r,H[4]=a,H[5]=u,H[6]=p,H[7]=m,H[8]=h,H[9]=f):(n=H[1],i=H[2],r=H[3],a=H[4],u=H[5],p=H[6],m=H[7],h=H[8],f=H[9]);let N=void 0===h?1:h,Y=void 0!==f&&f,[V,U]=(0,d.useState)(null),{collapse:F,collapsed:W,expand:K,expandedElement:Q,mount:q,panes:J}=eq();if(H[10]!==J||H[11]!==V){let e;H[14]!==V?(e=e=>e.element===V,H[14]=V,H[15]=e):e=H[15],y=(g=J.find(e))&&J.indexOf(g),H[10]=J,H[11]=V,H[12]=g,H[13]=y}else g=H[12],y=H[13];let Z=y,G="number"==typeof Z?J[Z+1]:void 0,X=Z===J.length-1,ee=Q===V,et=!W&&(g?.collapsed||!1),en=G?.collapsed||!1,ei=(0,d.useRef)(null),er=g?.flex??N,es=g?.currentMinWidth??r,el=g?.currentMaxWidth??i;H[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>ei.current,H[16]=b):b=H[16],(0,d.useImperativeHandle)(t,b),H[17]===Symbol.for("react.memo_cache_sentinel")?(j=e=>{U(e),ei.current=e},H[17]=j):j=H[17];let eo=j;H[18]!==i||H[19]!==r||H[20]!==N||H[21]!==a||H[22]!==u||H[23]!==p||H[24]!==q||H[25]!==V?(v=()=>{if(V)return q(V,{currentMinWidth:r,currentMaxWidth:i,flex:N,id:a,minWidth:p,maxWidth:u})},_=[r,i,N,a,p,u,q,V],H[18]=i,H[19]=r,H[20]=N,H[21]=a,H[22]=u,H[23]=p,H[24]=q,H[25]=V,H[26]=v,H[27]=_):(v=H[26],_=H[27]),(0,d.useLayoutEffect)(v,_),H[28]!==F||H[29]!==V?(w=()=>{V&&F(V)},H[28]=F,H[29]=V,H[30]=w):w=H[30];let ea=w;H[31]!==K||H[32]!==V?(I=()=>{V&&K(V)},H[31]=K,H[32]=V,H[33]=I):I=H[33];let ed=I,ec=!W&&et;H[34]!==ea||H[35]!==ed||H[36]!==X||H[37]!==Z||H[38]!==V||H[39]!==ec?(E={collapse:ea,collapsed:ec,expand:ed,index:Z,isLast:X,rootElement:V},H[34]=ea,H[35]=ed,H[36]=X,H[37]=Z,H[38]=V,H[39]=ec,H[40]=E):E=H[40],S=E;e:{if(W){k=void 0;break e}if(et){k=51;break e}if(0===es||X){k=p||204;break e}k=es||p||204}let eu=k;t:{if(et){T=51;break t}if(W&&X){T=void 0;break t}if(X){if(u){T=el??u;break t}T=void 0;break t}T=el??u}let ep=T,em=W&&!X;H[41]!==et||H[42]!==X||H[43]!==W||H[44]!==en||H[45]!==V?(D=!X&&!W&&(0,s.jsx)(x.wG1,{zOffset:"paneResizer",children:(0,s.jsx)(to,{disabled:et||en,element:V})}),H[41]=et,H[42]=X,H[43]=W,H[44]=en,H[45]=V,H[46]=D):D=H[46],C=D;let eh=ep===1/0?void 0:ep;H[47]!==er||H[48]!==eu||H[49]!==eh?(z={flex:er,minWidth:eu,maxWidth:eh},H[47]=er,H[48]=eu,H[49]=eh,H[50]=z):z=H[50],R=z;let ef=W?void 0:"hidden",ex=et?"":void 0,eg=Y?"":void 0;return H[51]!==et||H[52]!==el||H[53]!==es||H[54]!==ee||H[55]!==er||H[56]!==ep||H[57]!==eu||H[58]!==Z?(P=!1,H[51]=et,H[52]=el,H[53]=es,H[54]=ee,H[55]=er,H[56]=ep,H[57]=eu,H[58]=Z,H[59]=P):P=H[59],H[60]!==n||H[61]!==em?(A=!em&&(0,s.jsx)(o.so,{direction:"column",height:"fill",children:n}),H[60]=n,H[61]=em,H[62]=A):A=H[62],H[63]!==V||H[64]!==A?(M=(0,s.jsx)(o.EZ,{element:V,children:A}),H[63]=V,H[64]=A,H[65]=M):M=H[65],H[66]!==em||H[67]!==a||H[68]!==Z||H[69]!==m||H[70]!==R||H[71]!==ef||H[72]!==ex||H[73]!==eg||H[74]!==P||H[75]!==M?($=(0,s.jsxs)(ta,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:em,id:a,overflow:ef,...m,"data-pane-collapsed":ex,"data-pane-index":Z,"data-pane-selected":eg,ref:eo,style:R,children:[P,M]}),H[66]=em,H[67]=a,H[68]=Z,H[69]=m,H[70]=R,H[71]=ef,H[72]=ex,H[73]=eg,H[74]=P,H[75]=M,H[76]=$):$=H[76],H[77]!==X||H[78]!==$?(L=(0,s.jsx)(x.mLG,{isLastPane:X,children:$}),H[77]=X,H[78]=$,H[79]=L):L=H[79],H[80]!==S||H[81]!==L?(B=(0,s.jsx)(x.wG1,{zOffset:"pane",children:(0,s.jsx)(c.OD.Provider,{value:S,children:L})}),H[80]=S,H[81]=L,H[82]=B):B=H[82],H[83]!==C||H[84]!==B?(O=(0,s.jsxs)(s.Fragment,{children:[B,C]}),H[83]=C,H[84]=B,H[85]=O):O=H[85],O}),tc=(0,I.I4)(o.Zp)`
  position: relative;
  outline: none;
`;function tu(){let e=(0,d.useContext)(c.OD);if(!e)throw Error("Pane: missing context value");return e}tc.displayName="PaneContent__root";let tp=(0,d.forwardRef)(function(e,t){let n,i,r,o,a,d;let c=(0,l.c)(14);c[0]!==e?({as:n,children:i,overflow:r,padding:o,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=r,c[4]=o,c[5]=a):(n=c[1],i=c[2],r=c[3],o=c[4],a=c[5]);let{collapsed:u}=tu(),{collapsed:p}=eq(),m=p?void 0:r;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==o||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,s.jsx)(tc,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:o,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=o,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function tm(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let th={constrainSize:!0,placement:"left-start",portal:!0};function tf(e){let t,n,i,r;let a=(0,l.c)(35),{disabled:d,isAfterGroup:c,node:u}=e,p=(0,x.Bvg)("i18n"in u?u:void 0);if("divider"===u.type){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(o.Nj,{}),a[0]=e):e=a[0],e}a[1]!==p||a[2]!==u?(t=p(u),a[1]=p,a[2]=u,a[3]=t):t=a[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return a[4]!==c?(e=c&&(0,s.jsx)(o.Nj,{}),a[4]=c,a[5]=e):e=a[5],a[6]!==d||a[7]!==u.children||a[8]!==u.disabled?(t=u.children.map((e,t)=>(0,s.jsx)(tf,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),a[6]=d,a[7]=u.children,a[8]=u.disabled,a[9]=t):t=a[9],a[10]!==e||a[11]!==t?(n=(0,s.jsxs)(s.Fragment,{children:[e,t]}),a[10]=e,a[11]=t,a[12]=n):n=a[12],n}a[13]!==c?(e=c&&(0,s.jsx)(o.Nj,{}),a[13]=c,a[14]=e):e=a[14];let r=u.icon;return a[15]!==d||a[16]!==u.children||a[17]!==u.disabled?(t=u.children.map((e,t)=>(0,s.jsx)(tf,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),a[15]=d,a[16]=u.children,a[17]=u.disabled,a[18]=t):t=a[18],a[19]!==d||a[20]!==u.icon||a[21]!==t||a[22]!==m?(n=(0,s.jsx)(j.r,{disabled:d,icon:r,popover:th,text:m,children:t}),a[19]=d,a[20]=u.icon,a[21]=t,a[22]=m,a[23]=n):n=a[23],a[24]!==e||a[25]!==n?(i=(0,s.jsxs)(s.Fragment,{children:[e,n]}),a[24]=e,a[25]=n,a[26]=i):i=a[26],i}return a[27]!==c?(n=c&&(0,s.jsx)(o.Nj,{}),a[27]=c,a[28]=n):n=a[28],a[29]!==d||a[30]!==u?(i=(0,s.jsx)(tx,{disabled:d,node:u}),a[29]=d,a[30]=u,a[31]=i):i=a[31],a[32]!==n||a[33]!==i?(r=(0,s.jsxs)(s.Fragment,{children:[n,i]}),a[32]=n,a[33]=i,a[34]=r):r=a[34],r}function tx(e){let t;let n=(0,l.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,s.jsx)(ty,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,s.jsx)(tg,{...e}),n[3]=e,n[4]=t):t=n[4],t}function tg(e){let t,n,i,a;let d=(0,l.c)(17),{disabled:c,node:p}=e;d[0]!==p.disabled?(t="object"==typeof p.disabled&&(0,s.jsx)(o.EY,{size:1,children:p.disabled.reason}),d[0]=p.disabled,d[1]=t):t=d[1];let m=t,{title:h}=(0,x.FP1)(p),f=c||!!p.disabled;d[2]!==p.hotkey?(n=p.hotkey?.split("+"),d[2]=p.hotkey,d[3]=n):n=d[3];let g=p.iconRight||p.selected&&u.Nrt,y=`action-${tm(p.title)}`;return d[4]!==p.icon||d[5]!==p.onAction||d[6]!==p.selected||d[7]!==p.tone||d[8]!==f||d[9]!==n||d[10]!==g||d[11]!==y||d[12]!==h?(i=(0,s.jsx)(r.Dr,{disabled:f,hotkeys:n,icon:p.icon,iconRight:g,onClick:p.onAction,pressed:p.selected,text:h,tone:p.tone,"data-testid":y}),d[4]=p.icon,d[5]=p.onAction,d[6]=p.selected,d[7]=p.tone,d[8]=f,d[9]=n,d[10]=g,d[11]=y,d[12]=h,d[13]=i):i=d[13],d[14]!==i||d[15]!==m?(a=(0,s.jsx)(x.FUn,{content:m,placement:"left",children:i}),d[14]=i,d[15]=m,d[16]=a):a=d[16],a}function ty(e){let t,n,i,a,d,c;let p=(0,l.c)(23),{disabled:m,intent:h,node:f}=e;p[0]!==f.disabled?(t="object"==typeof f.disabled&&(0,s.jsx)(o.EY,{size:1,children:f.disabled.reason}),p[0]=f.disabled,p[1]=t):t=p[1];let g=t;p[2]!==h.params||p[3]!==h.type?(n={intent:h.type,params:h.params},p[2]=h.params,p[3]=h.type,p[4]=n):n=p[4];let y=(0,T.cQ)(n);p[5]!==y||p[6]!==f?(i=e=>{y.onClick(e),f.onAction()},p[5]=y,p[6]=f,p[7]=i):i=p[7];let b=i,{title:j}=(0,x.FP1)(f),v=m||!!f.disabled;p[8]!==f.hotkey?(a=f.hotkey?.split("+"),p[8]=f.hotkey,p[9]=a):a=p[9];let _=f.selected?u.Nrt:void 0;return p[10]!==b||p[11]!==y.href||p[12]!==f.icon||p[13]!==f.selected||p[14]!==f.tone||p[15]!==v||p[16]!==a||p[17]!==_||p[18]!==j?(d=(0,s.jsx)(r.Dr,{as:"a",disabled:v,hotkeys:a,href:y.href,icon:f.icon,iconRight:_,onClick:b,pressed:f.selected,text:j,tone:f.tone}),p[10]=b,p[11]=y.href,p[12]=f.icon,p[13]=f.selected,p[14]=f.tone,p[15]=v,p[16]=a,p[17]=_,p[18]=j,p[19]=d):d=p[19],p[20]!==d||p[21]!==g?(c=(0,s.jsx)(x.FUn,{content:g,placement:"left",children:d}),p[20]=d,p[21]=g,p[22]=c):c=p[22],c}let tb={constrainSize:!0,placement:"bottom",portal:!0};function tj(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&tj(e.children,t))}function tv(e){let t,n,i,a,c;let u=(0,l.c)(13),{nodes:p,actionsNodes:m}=e,h=(0,d.useId)(),f=tj(p,"critical"),g=tj(p,"caution"),y=f?"critical":g?"caution":void 0;return u[0]!==y?(t=(0,s.jsx)(x.VJU,{tone:y,"data-testid":"pane-context-menu-button"}),u[0]=y,u[1]=t):t=u[1],u[2]!==m?(n=m&&(0,s.jsxs)(s.Fragment,{children:[m,(0,s.jsx)(o.Nj,{})]}),u[2]=m,u[3]=n):n=u[3],u[4]!==p?(i=p.map((e,t)=>{let n=p[t-1]?.type==="group";return(0,s.jsx)(tf,{isAfterGroup:n,node:e},e.key)}),u[4]=p,u[5]=i):i=u[5],u[6]!==n||u[7]!==i?(a=(0,s.jsxs)(o.W1,{children:[n,i]}),u[6]=n,u[7]=i,u[8]=a):a=u[8],u[9]!==h||u[10]!==t||u[11]!==a?(c=(0,s.jsx)(r.IU,{button:t,id:h,menu:a,popover:tb}),u[9]=h,u[10]=t,u[11]=a,u[12]=c):c=u[12],c}let t_=(0,I.I4)(o.Wd)`
  position: sticky;
  bottom: 0;
`,tw=(0,I.I4)(o.Zp)`
  padding-bottom: env(safe-area-inset-bottom);
`,tI=(0,d.forwardRef)(function(e,t){let n,i;let r=(0,l.c)(7),{children:a,padding:d}=e,{collapsed:c}=tu();return r[0]!==a||r[1]!==d?(n=(0,s.jsx)(tw,{tone:"inherit",children:(0,s.jsx)(o.az,{padding:d,children:a})}),r[0]=a,r[1]=d,r[2]=n):n=r[2],r[3]!==c||r[4]!==t||r[5]!==n?(i=(0,s.jsx)(x.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(t_,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),r[3]=c,r[4]=t,r[5]=n,r[6]=i):i=r[6],i}),tS=(0,I.I4)(o.Wd)(({$border:e})=>(0,I.AH)`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),tE=(0,I.I4)(o.so)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,tk=(0,I.I4)(o.Zp)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return(0,I.AH)`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),tT=(0,I.I4)(a.r5)`
  width: 66%;
  max-width: 175px;
`,tC=(0,I.I4)(o.EY)`
  cursor: default;
  outline: none;
`,tD=(0,d.forwardRef)(function(e,t){let n,i,r,d,c,u,p,m,h,f,g,y,b;let j=(0,l.c)(45),{actions:v,backButton:_,border:w,contentAfter:I,loading:S,subActions:E,tabs:k,tabIndex:T,title:C}=e,{collapse:D,collapsed:R,expand:z,rootElement:P}=tu(),A=(0,a.sQ)(P||null),M=R?A?.height||window.innerHeight:void 0;j[0]!==M?(i={width:M},j[0]=M,j[1]=i):i=j[1],n=i,j[2]!==D||j[3]!==R?(r=()=>{R||D()},j[2]=D,j[3]=R,j[4]=r):r=j[4];let $=r;j[5]!==R||j[6]!==z?(d=()=>{R&&z()},j[5]=R,j[6]=z,j[7]=d):d=j[7];let L=d,B=!!(!R&&(k||E)),O=R?"":void 0,H=R?"":void 0;j[8]!==_?(c=_&&(0,s.jsx)(o.az,{flex:"none",children:_}),j[8]=_,j[9]=c):c=j[9];let N=_?1:2;j[10]!==S?(u=S&&(0,s.jsx)(o.az,{children:(0,s.jsx)(tT,{animated:!0,radius:1,size:1})}),j[10]=S,j[11]=u):u=j[11],j[12]!==S||j[13]!==C?(p=!S&&(0,s.jsx)(tC,{size:1,textOverflow:"ellipsis",weight:"semibold",children:C}),j[12]=S,j[13]=C,j[14]=p):p=j[14],j[15]!==$||j[16]!==p||j[17]!==N||j[18]!==u||j[19]!==T?(m=(0,s.jsxs)(tk,{__unstable_focusRing:!0,flex:1,onClick:$,paddingLeft:N,padding:2,tabIndex:T,children:[u,p]}),j[15]=$,j[16]=p,j[17]=N,j[18]=u,j[19]=T,j[20]=m):m=j[20],j[21]!==v||j[22]!==R?(h=v&&(0,s.jsx)(o.az,{hidden:R,children:(0,s.jsx)(x.wG1,{zOffset:"paneHeader",children:v})}),j[21]=v,j[22]=R,j[23]=h):h=j[23],j[24]!==R||j[25]!==B||j[26]!==E||j[27]!==k?(f=B&&(0,s.jsxs)(o.so,{align:"center",hidden:R,overflow:"auto",children:[(0,s.jsx)(o.az,{flex:1,marginRight:3*!!E,children:k}),E&&E]}),j[24]=R,j[25]=B,j[26]=E,j[27]=k,j[28]=f):f=j[28],j[29]!==L||j[30]!==n||j[31]!==m||j[32]!==h||j[33]!==f||j[34]!==c?(g=(0,s.jsxs)(tE,{gap:3,onClick:L,padding:3,sizing:"border",style:n,children:[c,m,h,f]}),j[29]=L,j[30]=n,j[31]=m,j[32]=h,j[33]=f,j[34]=c,j[35]=g):g=j[35];let Y=!R&&I&&I;return j[36]!==g||j[37]!==Y||j[38]!==H?(y=(0,s.jsx)(x.wG1,{zOffset:"paneHeader",children:(0,s.jsxs)(o.Zp,{"data-collapsed":H,tone:"inherit",children:[g,Y]})}),j[36]=g,j[37]=Y,j[38]=H,j[39]=y):y=j[39],j[40]!==w||j[41]!==t||j[42]!==y||j[43]!==O?(b=(0,s.jsx)(o.XS,{zOffset:100,children:(0,s.jsx)(tS,{$border:w,"data-collapsed":O,"data-testid":"pane-header",ref:t,children:y})}),j[40]=w,j[41]=t,j[42]=y,j[43]=O,j[44]=b):b=j[44],b});function tR(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function tz(e){let t=(0,l.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,s.jsx)(tP,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,s.jsx)(tM,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function tP(e){let t,n,i,r,o;let a=(0,l.c)(23),{node:d}=e,{title:c}=(0,x.FP1)(d),{t:u}=(0,x.Bdt)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,s.jsx)(tA,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=tR(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:m,isDisabled:h}=t;a[5]!==m||a[6]!==u||a[7]!==c?(n=m||c||u("status-button.aria-label"),a[5]=m,a[6]=u,a[7]=c,a[8]=n):n=a[8],a[9]!==h||a[10]!==d.hotkey?(i=!h&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=h,a[10]=d.hotkey,a[11]=i):i=a[11];let f=h?p:c;return a[12]!==i||a[13]!==f?(r={hotkeys:i,content:f},a[12]=i,a[13]=f,a[14]=r):r=a[14],a[15]!==h||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==n||a[21]!==r?(o=(0,s.jsx)(x.pfD,{disabled:h,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":n,tooltipProps:r}),a[15]=h,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=n,a[21]=r,a[22]=o):o=a[22],o}function tA(e){let t,n,i,r,o,a,d;let c=(0,l.c)(27),{intent:u,node:p}=e;c[0]!==u.params||c[1]!==u.type?(t={intent:u.type,params:u.params},c[0]=u.params,c[1]=u.type,c[2]=t):t=c[2];let m=(0,T.cQ)(t),{t:h}=(0,x.Bdt)();c[3]!==m||c[4]!==p?(n=e=>{m.onClick(e),p.onAction()},c[3]=m,c[4]=p,c[5]=n):n=c[5];let f=n;c[6]!==p?(i=tR(p),c[6]=p,c[7]=i):i=c[7];let{disabledReason:g,ariaLabel:y,isDisabled:b}=i;c[8]!==y||c[9]!==p.title||c[10]!==h?(r=y||p.title||h("status-button.aria-label"),c[8]=y,c[9]=p.title,c[10]=h,c[11]=r):r=c[11],c[12]!==b||c[13]!==p.hotkey?(o=!b&&p.hotkey?p.hotkey.split("+"):void 0,c[12]=b,c[13]=p.hotkey,c[14]=o):o=c[14];let j=b?g:p.title;return c[15]!==o||c[16]!==j?(a={hotkeys:o,content:j,placement:"bottom",portal:!0},c[15]=o,c[16]=j,c[17]=a):a=c[17],c[18]!==f||c[19]!==m.href||c[20]!==b||c[21]!==p.icon||c[22]!==p.selected||c[23]!==p.tone||c[24]!==r||c[25]!==a?(d=(0,s.jsx)(x.pfD,{forwardedAs:"a",disabled:b,href:m.href,icon:p.icon,onClick:f,selected:p.selected,tone:p.tone,"aria-label":r,tooltipProps:a}),c[18]=f,c[19]=m.href,c[20]=b,c[21]=p.icon,c[22]=p.selected,c[23]=p.tone,c[24]=r,c[25]=a,c[26]=d):d=c[26],d}function tM(e){let t,n,i,a,c;let p=(0,l.c)(16),{node:m}=e,{title:h}=(0,x.FP1)(m),f=!!m.disabled,g=m.icon??u.KSC;p[0]!==m.title?(t={content:m.title,portal:!0},p[0]=m.title,p[1]=t):t=p[1],p[2]!==f||p[3]!==g||p[4]!==t||p[5]!==h?(n=(0,s.jsx)(r.$n,{disabled:f,icon:g,label:h,mode:"bleed",tooltipProps:t}),p[2]=f,p[3]=g,p[4]=t,p[5]=h,p[6]=n):n=p[6];let y=(0,d.useId)();return p[7]!==m.children||p[8]!==m.disabled?(i=m.children.map((e,t)=>(0,s.jsx)(tf,{disabled:!!m.disabled,isAfterGroup:m.children[t-1]?.type==="group",node:e},e.key)),p[7]=m.children,p[8]=m.disabled,p[9]=i):i=p[9],p[10]!==i?(a=(0,s.jsx)(o.W1,{children:i}),p[10]=i,p[11]=a):a=p[11],p[12]!==n||p[13]!==y||p[14]!==a?(c=(0,s.jsx)(r.IU,{button:n,id:y,menu:a}),p[12]=n,p[13]=y,p[14]=a,p[15]=c):c=p[15],c}let t$=(0,I.I4)(o.Zp)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,tL=[];function tB(e){let t,n,i,r,o,u,p,m,h,f,x,g,y,b,j,v,_,w;let I=(0,l.c)(41);I[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:r,...o}=e,I[0]=e,I[1]=t,I[2]=n,I[3]=i,I[4]=r,I[5]=o):(t=I[1],n=I[2],i=I[3],r=I[4],o=I[5]);let[S]=(0,d.useState)(tO),[E,k]=(0,d.useState)(null),T=a.sQ(E)?.width||0,C=void 0!==T&&n?T<n:void 0;I[6]===Symbol.for("react.memo_cache_sentinel")?(u={expandedElement:null,panes:[],resizing:!1},I[6]=u):u=I[6];let[D,R]=(0,d.useState)(u);I[7]!==S||I[8]!==E?(p=()=>S.setRootElement(E),m=[S,E],I[7]=S,I[8]=E,I[9]=p,I[10]=m):(p=I[9],m=I[10]),(0,d.useEffect)(p,m),I[11]!==S||I[12]!==T?(h=()=>S.setRootWidth(T),f=[S,T],I[11]=S,I[12]=T,I[13]=h,I[14]=f):(h=I[13],f=I[14]),(0,d.useEffect)(h,f),I[15]!==S?(x=()=>S.subscribe(R),g=[S],I[15]=S,I[16]=x,I[17]=g):(x=I[16],g=I[17]),(0,d.useEffect)(x,g),I[18]!==C||I[19]!==i||I[20]!==r?(y=()=>{void 0!==C&&(C&&i&&i(),!C&&r&&r())},b=[C,i,r],I[18]=C,I[19]=i,I[20]=r,I[21]=y,I[22]=b):(y=I[21],b=I[22]),(0,d.useEffect)(y,b),I[23]!==C||I[24]!==S.collapse||I[25]!==S.expand||I[26]!==S.mount||I[27]!==S.resize||I[28]!==D.expandedElement||I[29]!==D.panes||I[30]!==D.resizing?(v={collapse:S.collapse,collapsed:C,expand:S.expand,expandedElement:D.expandedElement,mount:S.mount,panes:D.panes,resize:S.resize,resizing:D.resizing},I[23]=C,I[24]=S.collapse,I[25]=S.expand,I[26]=S.mount,I[27]=S.resize,I[28]=D.expandedElement,I[29]=D.panes,I[30]=D.resizing,I[31]=v):v=I[31],j=v;let z=C?"":void 0,P=D.resizing?"":void 0,A=T?"":void 0;return I[32]!==t||I[33]!==o||I[34]!==z||I[35]!==P||I[36]!==A?(_=(0,s.jsx)(t$,{"data-ui":"PaneLayout",...o,"data-collapsed":z,"data-resizing":P,"data-mounted":A,ref:k,children:t}),I[32]=t,I[33]=o,I[34]=z,I[35]=P,I[36]=A,I[37]=_):_=I[37],I[38]!==j||I[39]!==_?(w=(0,s.jsx)(c._U.Provider,{value:j,children:_}),I[38]=j,I[39]=_,I[40]=w):w=I[40],w}function tO(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,r={},s=null,l=0,o=null,a=new Map,d=!1;function c(e){i.delete(e),o=e,u()}return{collapse:function(e){i.add(e),o===e&&(o=null),u()},expand:c,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),s&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let r=Array.from(t.childNodes).indexOf(i);if(n.unshift(r),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||tL,r=n.get(t)||tL,s=Math.max(i.length,r.length);for(let e=0;e<s;e+=1){let t=i[e]||-1,n=r[e]||-1;if(t!==n)return t-n}return 0})}(s,t),c(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),u()}},resize:function(e,i,s){let l=t.indexOf(i),o=n.get(i);if(!o)return;let c=t[l+1],p=n.get(c);if(p){if("start"===e&&(d=!0,r.left={element:i,flex:o.flex||1,width:i.offsetWidth},r.right={element:c,flex:p.flex||1,width:c.offsetWidth},u()),"move"===e&&r.left&&r.right){a=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:l}=function(e,t,n,i){let r={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},s=t.minWidth??204,l=n.minWidth??204,o=Math.min(t.maxWidth||1/0,r.width-l),a=Math.min(n.maxWidth||1/0,r.width-s),d=s-e.left.width,c=e.right.width-a;d<c&&(d=c);let u=e.right.width-l,p=o-e.left.width;u>p&&(u=p);let m=Math.min(Math.max(i,d),u),h=e.left.width+m,f=e.right.width-m;return{leftFlex:h/r.width*r.flex,leftW:h,rightFlex:f/r.width*r.flex,rightW:f}}(r,o,p,s);a.set(i,{flex:n,width:e}),a.set(c,{flex:l,width:t}),u()}if("end"===e){d=!1;let e=a.get(i),t=a.get(c);n.set(i,{...o,currentMinWidth:0,currentMaxWidth:o.maxWidth??1/0,flex:e?.flex??o.flex}),n.set(c,{...p,currentMinWidth:0,currentMaxWidth:o.maxWidth??1/0,flex:t?.flex??p.flex}),a=new Map,delete r.left,delete r.right,u()}}},setRootElement:function(e){s=e},setRootWidth:function(e){l=e,u()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function u(){if(!l)return;let r=[];for(let e of t)e!==o&&r.unshift(e);o&&r.unshift(o);let s=new WeakMap,c=r.length,u=r[0],p=l-(c-1)*51;for(let e of r){let t=n.get(e);if(!t)continue;let r=t.currentMinWidth||t.minWidth||204,l=e===u,o=i.has(e),d=r>p,c=!l&&(o||d),m=a.get(e);s.set(e,{element:e,collapsed:c,currentMinWidth:m?.width??t.currentMinWidth,currentMaxWidth:m?.width??t.currentMaxWidth,flex:m?.flex??t.flex??1}),c?p-=51:p-=r-51}let m=[];for(let e of t){let t=s.get(e);t&&m.push(t)}for(let n of e)n({expandedElement:o||t[t.length-1]||null,panes:m,resizing:d})}}()}function tH(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}let tN=ez(tH);function tY(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,r=[],s=0;for(let e=0;e<t.length;e+=1){let n=t[e];r.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}s+=r.length;let l=[];for(let e of i)l.find(t=>t.key===e.id)||l.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let o=[];for(let t=0;t<n.length;t+=1){let i=n[t],r=i.group&&l.find(e=>e.key===i.group);i.group&&!r&&(r={type:"group",key:i.group,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},l.push(r)),r?r.children.push({type:"item",key:`${s+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):o.push({type:"item",key:`${s+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...o,...l,...r]}let tV=(0,d.forwardRef)(function(e,t){let n,i,o,a,c;let u=(0,l.c)(10);return u[0]!==e?({intent:n,...i}=e,u[0]=e,u[1]=n,u[2]=i):(n=u[1],i=u[2]),u[3]!==n?(a=(0,d.forwardRef)(function(e,t){return(0,s.jsx)(T.RZ,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),u[3]=n,u[4]=a):a=u[4],o=a,u[5]!==o||u[6]!==e.disabled||u[7]!==t||u[8]!==i?(c=e.disabled?(0,s.jsx)(r.$n,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,s.jsx)(r.$n,{...i,as:o,"data-as":"a",ref:t}),u[5]=o,u[6]=e.disabled,u[7]=t,u[8]=i,u[9]=c):c=u[9],c});function tU(e){let t,n,i;let o=(0,l.c)(12),{reveal:a,context:d,loading:c,children:u}=e,p=(0,x.iZK)(),{t:m}=(0,x.Bdt)(eB);if(!a){let e;return o[0]!==u?(e=(0,s.jsx)(s.Fragment,{children:u}),o[0]=u,o[1]=e):e=o[1],e}return o[2]!==d||o[3]!==p||o[4]!==c||o[5]!==m?(t=c?m("insufficient-permissions-message-tooltip.loading-text"):(0,s.jsx)(x.TLO,{context:d,currentUser:p}),o[2]=d,o[3]=p,o[4]=c,o[5]=m,o[6]=t):t=o[6],o[7]!==u?(n=(0,s.jsx)("div",{children:u}),o[7]=u,o[8]=n):n=o[8],o[9]!==t||o[10]!==n?(i=(0,s.jsx)(r.m_,{content:t,portal:!0,children:n}),o[9]=t,o[10]=n,o[11]=i):i=o[11],i}let tF={constrainSize:!0,placement:"bottom",portal:!0},tW=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let r={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[r,t.parameters]:r,searchParams:n?[["perspective",n]]:void 0}};function tK(e){let t,n,i,a,c,p,m,h,f,g,y;let b=(0,l.c)(68),{templateItems:j}=e,v=(0,x.bgA)(),{selectedReleaseId:_,selectedPerspective:w}=(0,x.QO2)(),I=(0,x.PGu)(),{t:S}=(0,x.Bdt)(eB),{t:E}=(0,x.Bdt)();b[0]!==j||b[1]!==v?(t=[...j,...v],b[0]=j,b[1]=v,b[2]=t):t=b[2];let k=(0,x.Bvg)(t);b[3]!==j?(n={templateItems:j},b[3]=j,b[4]=n):n=b[4];let[C,D]=(0,x.CzS)(n);i=!D&&C?.every(tq);e:{let e;if(!C){let e;b[5]===Symbol.for("react.memo_cache_sentinel")?(e={},b[5]=e):e=b[5],a=e;break e}b[6]!==C?(e=C.reduce(tQ,{}),b[6]=C,b[7]=e):e=b[7],a=e}let R=a;if(i){let e,t,n;return b[8]!==S?(e=S("pane-header.disabled-created-button.aria-label"),b[8]=S,b[9]=e):e=b[9],b[10]!==e?(t=(0,s.jsx)(r.$n,{"aria-label":e,icon:u.REV,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),b[10]=e,b[11]=t):t=b[11],b[12]!==D||b[13]!==t?(n=(0,s.jsx)(tU,{context:"create-document-type",reveal:!0,loading:D,children:t}),b[12]=D,b[13]=t,b[14]=n):n=b[14],n}let z=(0,x.xo4)(w)?"new-document.disabled-published.tooltip":"new-document.disabled-release.tooltip";b[15]!==z||b[16]!==E?(c=E(z),b[15]=z,b[16]=E,b[17]=c):c=b[17],b[18]!==c?(p={content:c},b[18]=c,b[19]=p):p=b[19];let P=p;if(1===j.length){let e,t,n,i,r;let l=j[0],o=!R[l.id]?.granted||!I;b[20]!==l||b[21]!==_||b[22]!==v?(e=tW(v,l,_),b[20]=l,b[21]=_,b[22]=v,b[23]=e):e=b[23];let a=e;if(!a)return null;b[24]!==l||b[25]!==k?(t=k(l),b[24]=l,b[25]=k,b[26]=t):t=b[26];let d=l.icon||u.REV;return b[27]!==o||b[28]!==P||b[29]!==S?(n=o?P:{content:S("pane-header.create-new-button.tooltip")},b[27]=o,b[28]=P,b[29]=S,b[30]=n):n=b[30],b[31]!==o||b[32]!==a||b[33]!==d||b[34]!==n||b[35]!==t.title?(i=(0,s.jsx)(tV,{"aria-label":t.title,icon:d,intent:a,mode:"bleed",disabled:o,"data-testid":"action-intent-button",tooltipProps:n}),b[31]=o,b[32]=a,b[33]=d,b[34]=n,b[35]=t.title,b[36]=i):i=b[36],b[37]!==o||b[38]!==D||b[39]!==i?(r=(0,s.jsx)(tU,{reveal:o,loading:D,context:"create-document-type",children:i}),b[37]=o,b[38]=D,b[39]=i,b[40]=r):r=b[40],r}let A=!I;if(b[41]!==P||b[42]!==I||b[43]!==S?(m=I?{content:S("pane-header.create-new-button.tooltip")}:P,b[41]=P,b[42]=I,b[43]=S,b[44]=m):m=b[44],b[45]!==A||b[46]!==m?(h=(0,s.jsx)(r.$n,{icon:u.REV,mode:"bleed",disabled:A,"data-testid":"multi-action-intent-button",tooltipProps:m}),b[45]=A,b[46]=m,b[47]=h):h=b[47],b[48]!==k||b[49]!==D||b[50]!==R||b[51]!==_||b[52]!==S||b[53]!==j||b[54]!==v){let e;b[56]!==k||b[57]!==D||b[58]!==R||b[59]!==_||b[60]!==S||b[61]!==v?(e=(e,t)=>{let n=!R[e.id]?.granted,i=tW(v,e,_),l=v.find(t=>t.id===e.templateId);if(!l||!i)return null;let o=(0,d.forwardRef)((e,t)=>n?(0,s.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,s.jsx)(T.RZ,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));o.displayName="Link";let{title:a}=k({...e,title:e.title||k(l).title});return(0,s.jsx)(tU,{context:"create-document-type",reveal:n,loading:D,children:(0,s.jsx)(r.Dr,{as:o,"data-as":n?"button":"a",text:a,"aria-label":n?S("pane-header.disabled-created-button.aria-label"):a,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},b[56]=k,b[57]=D,b[58]=R,b[59]=_,b[60]=S,b[61]=v,b[62]=e):e=b[62],f=j.map(e),b[48]=k,b[49]=D,b[50]=R,b[51]=_,b[52]=S,b[53]=j,b[54]=v,b[55]=f}else f=b[55];return b[63]!==f?(g=(0,s.jsx)(o.W1,{children:f}),b[63]=f,b[64]=g):g=b[64],b[65]!==h||b[66]!==g?(y=(0,s.jsx)(r.IU,{button:h,id:"create-menu",menu:g,popover:tF}),b[65]=h,b[66]=g,b[67]=y):y=b[67],y}function tQ(e,t){return e[t.id]=t,e}function tq(e){return!e.granted}function tJ(e){return null!=e}let tZ=e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))},tG=(0,d.memo)(function(e){let{initialValueTemplateItems:t=x.Mlv,menuItems:n=x.Mlv,menuItemGroups:i=x.Mlv,actionHandlers:r=x.MlF}=e,l=(0,x.bgA)(),a=(0,d.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in r))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?r[e.action]:null;return!!t&&(t(e.params),!0)},[r]),c=(0,d.useMemo)(()=>tY({actionHandler:a,menuItemGroups:i,menuItems:n.filter(e=>e.intent?.type!=="create")}),[a,i,n]),u=(0,d.useMemo)(()=>c.filter(tH),[c]),p=(0,d.useMemo)(()=>c.filter(tN),[c]),m=(0,d.useMemo)(()=>n.map((e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,r=Array.isArray(n)?n[1]:void 0,s=i.template||i.type;if(!s)return null;let o=l.find(e=>e.id===s);return o?{item:e,template:o,templateParams:r,menuItemIndex:t,initialDocumentId:i.id}:null}).filter(tJ).map(({initialDocumentId:e,item:t,template:n,menuItemIndex:i,templateParams:r})=>({id:`menuItem${i}`,initialDocumentId:e,templateId:n.id,type:"initialValueTemplateItem",title:t.title||n.title,i18n:t.i18n||n.i18n,icon:t.icon,description:n.description,parameters:r,schemaType:n.schemaType})),[n,l]),h=(0,d.useMemo)(()=>eR([...m,...t],e=>tZ([e.initialDocumentId,e.templateId,e.parameters])),[m,t]);return(0,s.jsxs)(o.so,{gap:1,children:[h.length>0&&(0,s.jsx)(tK,{templateItems:h}),u.map(e=>(0,s.jsx)(tz,{node:e},e.key)),p.length>0&&(0,s.jsx)(tv,{nodes:p})]})});function tX(e){let t,n,i,r,o,a,d;let c=(0,l.c)(16),{t:u}=(0,x.Bdt)(eB),{layout:p,value:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},c[0]=t):t=c[0],c[1]!==m._type?(n={documentType:m._type},c[1]=m._type,c[2]=n):n=c[2],c[3]!==u||c[4]!==n?(i=(0,s.jsx)("em",{children:(0,s.jsx)(x.HTc,{t:u,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),c[3]=u,c[4]=n,c[5]=i):i=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(r={Code:"code"},c[6]=r):r=c[6],c[7]!==m._id?(o={documentId:m._id},c[7]=m._id,c[8]=o):o=c[8],c[9]!==u||c[10]!==o?(a=(0,s.jsx)(x.HTc,{t:u,i18nKey:"pane-item.missing-schema-type.subtitle",components:r,values:o}),c[9]=u,c[10]=o,c[11]=a):a=c[11],c[12]!==p||c[13]!==i||c[14]!==a?(d=(0,s.jsx)(x.m6P,{title:i,subtitle:a,media:t0,layout:p}),c[12]=p,c[13]=i,c[14]=a,c[15]=d):d=c[15],d}function t0(){return(0,s.jsx)(u.sAQ,{})}function t1(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function t2(e){let t,n,i,r,a,c,p,m;let h=(0,l.c)(42),{icon:f,id:y,layout:b,pressed:j,schemaType:v,selected:_,title:w,value:I,margin:S,marginBottom:E,marginTop:k}=e,T=void 0===b?"default":b,C=(0,x.pDY)(),D=(0,x.yKO)(),{ChildLink:R}=eX(),z=(0,x.cVB)(y),P=!!(v&&v.name&&C.get(v.name)),[A,M]=(0,d.useState)(!1);e:{let e,n,i,r;if(I&&(0,g.ME)(I)){let e,n;if(!v||!P){let e;h[0]!==I?(e=(0,s.jsx)(tX,{value:I}),h[0]=I,h[1]=e):e=h[1],t=e;break e}h[2]!==f||h[3]!==v?(e=t1(f,v,u.pyG),h[2]=f,h[3]=v,h[4]=e):e=h[4],h[5]!==z||h[6]!==D||h[7]!==T||h[8]!==v||h[9]!==e||h[10]!==I?(n=(0,s.jsx)(eK,{documentPreviewStore:D,icon:e,layout:T,schemaType:v,value:I,presence:z}),h[5]=z,h[6]=D,h[7]=T,h[8]=v,h[9]=e,h[10]=I,h[11]=n):n=h[11],t=n;break e}h[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[12]=e):e=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(o.az,{style:e,children:(0,s.jsx)(o.EY,{muted:!0,size:1,children:(0,s.jsx)(u.vKP,{})})}),h[13]=n):n=h[13],h[14]!==f||h[15]!==v?(i=t1(f,v,u.sjq),h[14]=f,h[15]=v,h[16]=i):i=h[16],h[17]!==i||h[18]!==w?(r=(0,s.jsx)(x.m6P,{status:n,icon:i,layout:"compact",title:w}),h[17]=i,h[18]=w,h[19]=r):r=h[19],t=r}let $=t;h[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey){M(!1);return}M(!0)},h[20]=n):n=h[20];let L=n;h[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>M(!1),h[21]=i):i=h[21],h[22]!==_?(r=[_],h[22]=_,h[23]=r):r=h[23],(0,d.useEffect)(i,r);let[B,O]=(0,d.useState)(!1),H=(0,d.useRef)(null);h[24]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{H.current=setTimeout(()=>(0,d.startTransition)(()=>O(!0)),400)},h[24]=a):a=h[24];let N=a;h[25]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{H.current&&clearTimeout(H.current),(0,d.startTransition)(()=>O(!1))},h[25]=c):c=h[25];let Y=c,V=`pane-item-${w}`,U=_||A;return h[26]!==y||h[27]!==B||h[28]!==v||h[29]!==I?(p=B&&v?.name&&I&&(0,g.ME)(I)&&(0,s.jsx)(t3,{documentId:y,documentType:v.name}),h[26]=y,h[27]=B,h[28]=v,h[29]=I,h[30]=p):p=h[30],h[31]!==y||h[32]!==S||h[33]!==E||h[34]!==k||h[35]!==j||h[36]!==$||h[37]!==p||h[38]!==V||h[39]!==R||h[40]!==U?(m=(0,s.jsxs)(x.Ns2,{"data-testid":V,__unstable_focusRing:!0,as:R,childId:y,"data-as":"a",margin:S,marginBottom:E,marginTop:k,onClick:L,onMouseEnter:N,onMouseLeave:Y,pressed:j,radius:2,selected:U,sizing:"border",tabIndex:-1,tone:"inherit",children:[$,p]}),h[31]=y,h[32]=S,h[33]=E,h[34]=k,h[35]=j,h[36]=$,h[37]=p,h[38]=V,h[39]=R,h[40]=U,h[41]=m):m=h[41],m}function t3(e){let t;let n=(0,l.c)(2),{documentId:i,documentType:r}=e;return n[0]!==i?(t=(0,x.IMx)(i),n[0]=i,n[1]=t):t=n[1],(0,x.zX2)(t,r),null}t3.displayName="PreloadDocumentPane";let t4=(0,d.memo)(e=>{let t;let n=(0,l.c)(6),{actions:i,children:r,actionProps:o,onActionComplete:a,group:d}=e;return n[0]!==o||n[1]!==i||n[2]!==r||n[3]!==d||n[4]!==a?(t=(0,s.jsx)(x.N6R,{onReset:a,hooks:i,args:o,group:d,children:r}),n[0]=o,n[1]=i,n[2]=r,n[3]=d,n[4]=a,n[5]=t):t=n[5],t});t4.displayName="Memo(RenderActionCollectionState)";let t5=(0,d.memo)(e=>{let t;let n=(0,l.c)(4),{badges:i,children:r,badgeProps:o}=e;return n[0]!==o||n[1]!==i||n[2]!==r?(t=(0,s.jsx)(x.N6R,{hooks:i,args:o,children:r}),n[0]=o,n[1]=i,n[2]=r,n[3]=t):t=n[3],t});t5.displayName="Memo(RenderBadgeCollectionState)";let t6="diffView",t7="previousDocument",t8="nextDocument";function t9(){let e,t,n;let i=(0,l.c)(9),{navigate:r,state:s}=(0,T.rd)();i[0]!==r||i[1]!==s?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,l={...ei(s._searchParams),...t?{[t6]:t}:{},...n?{[t7]:[n.type,n.id].join(",")}:{},...i?{[t8]:[i.type,i.id].join(",")}:{}};r({...s,_searchParams:er(l)})},i[0]=r,i[1]=s,i[2]=e):e=i[2];let o=e;i[3]!==r||i[4]!==s?(t=()=>{r({...s,_searchParams:(s._searchParams??[]).filter(ne)})},i[3]=r,i[4]=s,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==o?(n={navigateDiffView:o,exitDiffView:a},i[6]=a,i[7]=o,i[8]=n):n=i[8],n}function ne(e){let[t]=e;return![t6,t7,t8].includes(t)}let nt=["version"];function nn({onParamsError:e}={}){let{state:t}=(0,T.rd)(),n=new URLSearchParams(t._searchParams),i=n.get(t7),r=n.get(t8),s=n.get(t6),l=[i,r,s].some(e=>null!==e),o=(0,d.useMemo)(()=>(function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[r,s]=e.split(",").filter(Boolean),[l,o]=t.split(",").filter(Boolean);return nt.includes(n)||i.push(["invalidModeParam",n]),(typeof r>"u"||typeof s>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof l>"u"||typeof o>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:r,id:s},next:{type:l,id:o}}}}})({previousDocument:i??"",nextDocument:r??"",mode:s??""}),[s,r,i]);return(0,d.useEffect)(()=>{"error"===o.result&&l&&e?.(o.errors)},[l,e,o]),"error"===o.result?{isActive:!1}:{state:"ready",isActive:!0,...o.params}}function ni(e){return null!==e}let nr=I.I4.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,ns=I.I4.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,nl=({documentId:e,state:t})=>{let{t:n}=(0,x.Bdt)(eB),{data:i}=(0,x.gn8)({documentId:e}),{exitDiffView:r,navigateDiffView:l}=t9(),{documents:a}=nn(),c=(0,x.K0D)(),p=i.flatMap(e=>(0,x._Sr)(e)??[]),m=(0,d.useMemo)(()=>c.data.filter(e=>{let t=(0,x._hI)(e._id);return"u">typeof t&&p.includes(t)}),[c.data,p]),h=(0,d.useCallback)(e=>{"u">typeof a?.previous&&l({previousDocument:{...a.previous,id:e}})},[a?.previous,l]),f=(0,d.useCallback)(e=>{"u">typeof a?.next&&l({nextDocument:{...a.next,id:e}})},[a?.next,l]);return(0,s.jsxs)(nr,{children:[(0,s.jsxs)(ns,{children:[(0,s.jsx)(o.az,{padding:4,children:(0,s.jsx)(o.EY,{as:"h1",size:1,muted:!0,children:n("compare-versions.title")})}),"u">typeof a?.previous&&(0,s.jsx)(no,{releases:m,onSelectRelease:h,role:"previous",documentId:e,state:t,document:a.previous})]}),(0,s.jsx)(o.so,{align:"center",paddingX:3,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(u.ppF,{})})}),(0,s.jsxs)(ns,{children:["u">typeof a?.next&&(0,s.jsx)(no,{releases:m,onSelectRelease:f,role:"next",documentId:e,state:t,document:a.next}),(0,s.jsx)(o.az,{padding:3,style:{justifySelf:"end"},children:(0,s.jsx)(o.$n,{icon:u.USm,mode:"bleed",onClick:r,padding:2})})]})]})},no=({releases:e=[],onSelectRelease:t,role:n,documentId:i,document:l})=>{let{published:a,draft:c}=(0,x.zX2)((0,x.IMx)(l.id),l.type),p=(0,d.useMemo)(()=>(function(e,t){return(0,x._4P)(e)?"published":(0,x.R8D)(e)?"draft":t.find(({_id:t})=>(0,x._hI)(t)===(0,x._Sr)(e))})(l.id,e),[l.id,e]),{t:m}=(0,x.Bdt)(eB),{t:h}=(0,x.Bdt)();return(0,s.jsx)(r.IU,{id:n,button:(0,s.jsx)(o.$n,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function({selected:e,tCore:t,tStructure:n}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,x.Jrl)(e)){let n=e?(0,x.Y73)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,s.jsx)(x.Rdi,{padding:1,tone:n}),iconRight:e&&(0,x.KJ$)(e)?(0,s.jsx)(u.XAi,{}):void 0,tone:n}}let i="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,s.jsx)(x.Rdi,{padding:1,tone:i}),tone:i}}({selected:p,tCore:h,tStructure:m})}),menu:(0,s.jsxs)(o.W1,{children:[a&&(0,s.jsx)(na,{type:"published",onSelect:t,isSelected:"published"===p,documentId:i}),c&&(0,s.jsx)(na,{type:"draft",onSelect:t,isSelected:"draft"===p,documentId:i}),e.map(e=>(0,s.jsx)(na,{release:e,onSelect:t,isSelected:"string"!=typeof p&&p?._id===e._id,documentId:i},e._id))]})})},na=({type:e,release:t,onSelect:n,isSelected:i,documentId:r})=>{let{t:l}=(0,x.Bdt)(),{t:a}=(0,x.Bdt)(eB),c=(0,d.useCallback)(()=>{if("draft"===e){n((0,x.T4)(r));return}if("published"===e){n((0,x.IMx)(r));return}"u">typeof t?._id&&n((0,x.ctg)(r,(0,x._hI)(t._id)))},[e,n,r,t?._id]);if(e)return(0,s.jsx)(o.Dr,{padding:1,paddingRight:3,onClick:c,pressed:i,children:(0,s.jsxs)(o.so,{gap:1,children:[(0,s.jsx)(x.Rdi,{padding:2,tone:"published"===e?"positive":"caution"}),(0,s.jsx)(o.az,{paddingY:2,children:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:a(["compare-versions.status",e].join("."))})})]})});let p=t?(0,x.Y73)(t):"neutral";return(0,s.jsx)(o.Dr,{padding:1,paddingRight:3,onClick:c,pressed:i,children:(0,s.jsxs)(o.so,{gap:1,children:[(0,s.jsx)(x.Rdi,{padding:2,tone:p}),(0,s.jsxs)(o.BJ,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,s.jsx)(o.EY,{size:1,weight:"medium",children:t.metadata.title||l("release.placeholder-untitled-release")}),["asap","undecided"].includes(t.metadata.releaseType)&&(0,s.jsx)(o.EY,{muted:!0,size:1,children:l(`release.type.${t.metadata.releaseType}`)}),"scheduled"===t.metadata.releaseType&&(0,s.jsx)(o.EY,{muted:!0,size:1,children:(0,x.drb)(t)})]}),(0,s.jsx)(o.so,{flex:"none",children:(0,x.KJ$)(t)&&(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(u.XAi,{})})})})]})})},nd=I.I4.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function nc(e){return e.document?.components?.unstable_layout}function nu(e){return e.path}function np(e,t){return eo(e.path,t.path)}let nm=I.I4.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,nh=(0,I.I4)(o.Zp)`
  position: relative;
  grid-area: var(--grid-area);
`,nf=(0,I.I4)(o.mc)`
  width: auto;
`,nx=(0,d.forwardRef)(function(e,t){let n,i,r,u,p,m,h,f,g,y,b,j;let v=(0,l.c)(36),{role:_,documentType:w,documentId:I,scrollElement:S,syncChannel:E,compareDocument:k}=e,T=(0,d.useRef)(null),[C,D]=(0,d.useState)(null),[R,z]=(0,d.useState)(null);v[0]!==k||v[1]!==I||v[2]!==w||v[3]!==_||v[4]!==S||v[5]!==E?(n=()=>(0,s.jsx)(ng,{compareDocument:k,documentId:I,documentType:w,role:_,scrollElement:S,syncChannel:E}),v[0]=k,v[1]=I,v[2]=w,v[3]=_,v[4]=S,v[5]=E,v[6]=n):n=v[6];let P=n;v[7]!==P?(i={pick:nc,defaultComponent:P},v[7]=P,v[8]=i):i=v[8];let A=(0,x.A1m)(i);v[9]===Symbol.for("react.memo_cache_sentinel")?(r={isInteractive:!1,onOpenReviewChanges:el,onSetFocus:el,isReviewChangesOpen:!1},v[9]=r):r=v[9];let M=`${_}-document`;v[10]!==M?(u={"--grid-area":M},v[10]=M,v[11]=u):u=v[11];let $=u,L="next"===_,B="next"!==_&&"none";v[12]!==B?(p={"--scrollbar-width":B},v[12]=B,v[13]=p):p=v[13];let O=p;return v[14]!==A||v[15]!==I||v[16]!==w?(m=(0,s.jsx)(a.Co,{position:"absolute",children:(0,s.jsx)(nf,{ref:T,padding:4,width:1,children:(0,s.jsx)(A,{documentId:I,documentType:w})})}),v[14]=A,v[15]=I,v[16]=w,v[17]=m):m=v[17],v[18]!==C||v[19]!==m?(h=(0,s.jsx)(o.GD,{element:C,children:m}),v[18]=C,v[19]=m,v[20]=h):h=v[20],v[21]!==t||v[22]!==O||v[23]!==h?(f=(0,s.jsx)(nm,{ref:t,style:O,children:h}),v[21]=t,v[22]=O,v[23]=h,v[24]=f):f=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:D}),v[25]=g):g=v[25],v[26]!==f||v[27]!==$||v[28]!==L?(y=(0,s.jsxs)(nh,{ref:z,style:$,borderLeft:L,children:[f,g]}),v[26]=f,v[27]=$,v[28]=L,v[29]=y):y=v[29],v[30]!==R||v[31]!==y?(b=(0,s.jsx)(o.EZ,{element:R,children:y}),v[30]=R,v[31]=y,v[32]=b):b=v[32],v[33]!==S||v[34]!==b?(j=(0,s.jsx)(c.r0.Provider,{value:r,children:(0,s.jsx)(x.tmD,{children:(0,s.jsx)(x.jsZ,{scrollElement:S,containerElement:T,children:b})})}),v[33]=S,v[34]=b,v[35]=j):j=v[35],j}),ng=e=>{let t,n,i,r,o,a,u,p,m,h,f,g,y,b,j,v,_,w,I,S,E,k,T,C;let D=(0,l.c)(56),{role:R,documentType:z,documentId:P,syncChannel:A,compareDocument:M}=e;D[0]!==M?(t={compareDocument:M},D[0]=M,D[1]=t):t=D[1];let $=function(e){let t,n,i;let r=(0,l.c)(4),{compareDocument:s}=e;r[0]!==s.id?(t=(0,x.IMx)(s.id),r[0]=s.id,r[1]=t):t=r[1];let o=s.type;r[2]!==s.id?(n=(0,x._Sr)(s.id),r[2]=s.id,r[3]=n):n=r[3];let a=(0,x.zX2)(t,o,"low",n);e:{if((0,x.A_X)(s.id)){i=a.version??void 0;break e}if((0,x.R8D)(s.id)){i=a.draft??void 0;break e}if((0,x._4P)(s.id)){i=a.published??void 0;break e}i=void 0}return i}(t),[H]=(0,d.useState)(ny);D[2]!==P?(n=(0,x.IMx)(P),D[2]=P,D[3]=n):n=D[3],D[4]!==P?(i=function(e){return(0,x.A_X)(e)?(0,x._Sr)(e):(0,x._4P)(e)?"published":void 0}(P),D[4]=P,D[5]=i):i=D[5],D[6]!==P?(r=(0,x._Sr)(P),D[6]=P,D[7]=r):r=D[7],D[8]!==$||D[9]!==z||D[10]!==n||D[11]!==i||D[12]!==r?(o={documentId:n,documentType:z,selectedPerspectiveName:i,releaseId:r,comparisonValue:$},D[8]=$,D[9]=z,D[10]=n,D[11]=i,D[12]=r,D[13]=o):o=D[13];let N=(0,x.Lay)(o);D[14]!==N?({formState:m,onChange:f,onFocus:g,onBlur:h,onSetActiveFieldGroup:b,onSetCollapsedFieldSet:j,onSetCollapsedPath:v,collapsedFieldSets:a,ready:_,collapsedPaths:u,schemaType:w,value:I,onProgrammaticFocus:y,...p}=N,D[14]=N,D[15]=a,D[16]=u,D[17]=p,D[18]=m,D[19]=h,D[20]=f,D[21]=g,D[22]=y,D[23]=b,D[24]=j,D[25]=v,D[26]=_,D[27]=w,D[28]=I):(a=D[15],u=D[16],p=D[17],m=D[18],h=D[19],f=D[20],g=D[21],y=D[22],b=D[23],j=D[24],v=D[25],_=D[26],w=D[27],I=D[28]);let Y=null===m||!_;D[29]!==R||D[30]!==A?(S={id:R,syncChannel:A},D[29]=R,D[30]=A,D[31]=S):S=D[31];let V=function(e){let t,n,i,r;let s=(0,l.c)(11),{syncChannel:o,id:a}=e;s[0]!==a||s[1]!==o?(t=e=>o.next({...e,source:a}),s[0]=a,s[1]=o,s[2]=t):t=s[2];let d=t;if(s[3]!==a||s[4]!==o){let e;s[6]!==a?(e=e=>{let{source:t}=e;return t!==a},s[6]=a,s[7]=e):e=s[7],i=o.pipe((0,L.F)(np),(0,B.p)(e),(0,O.T)(nu)),s[3]=a,s[4]=o,s[5]=i}else i=s[5];return n=i,s[8]!==n||s[9]!==d?(r={path:n,push:d},s[8]=n,s[9]=d,s[10]=r):r=s[10],r}(S);D[32]!==p||D[33]!==V||D[34]!==R?(E=e=>{p.onPathOpen(e),V.push({source:R,path:e})},D[32]=p,D[33]=V,D[34]=R,D[35]=E):E=D[35];let U=E;return D[36]!==y||D[37]!==V.path?(T=()=>{let e=V.path.subscribe(y);return()=>e.unsubscribe()},k=[y,V.path],D[36]=y,D[37]=V.path,D[38]=k,D[39]=T):(k=D[38],T=D[39]),(0,d.useEffect)(T,k),D[40]!==a||D[41]!==u||D[42]!==m||D[43]!==Y||D[44]!==h||D[45]!==f||D[46]!==g||D[47]!==U||D[48]!==b||D[49]!==j||D[50]!==v||D[51]!==H||D[52]!==R||D[53]!==w||D[54]!==I?(C=Y?(0,s.jsx)(x.gd4,{showText:!0}):(0,s.jsx)(c.pn.Provider,{value:{enabled:!1,mode:null},children:(0,s.jsx)(x.okx,{__internal_patchChannel:H,id:`diffView-pane-${R}`,onChange:f,onPathFocus:g,onPathOpen:U,onPathBlur:h,onFieldGroupSelect:b,onSetFieldSetCollapsed:j,onSetPathCollapsed:v,collapsedPaths:u,collapsedFieldSets:a,focusPath:m.focusPath,changed:m.changed,focused:m.focused,groups:m.groups,validation:m.validation,members:m.members,presence:m.presence,schemaType:w,value:I})}),D[40]=a,D[41]=u,D[42]=m,D[43]=Y,D[44]=h,D[45]=f,D[46]=g,D[47]=U,D[48]=b,D[49]=j,D[50]=v,D[51]=H,D[52]=R,D[53]=w,D[54]=I,D[55]=C):C=D[55],C};function ny(){return(0,x.Ijd)()}let nb=I.I4.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,nj=e=>{let t,n;let i=(0,l.c)(6),{children:r,documentId:o,documentType:a}=e;i[0]!==o||i[1]!==a?(t={intent:"edit",params:{id:o,type:a}},i[0]=o,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,T.cQ)(t);return i[3]!==r||i[4]!==d?(n=(0,s.jsx)(nb,{href:d,target:"_blank",rel:"noopener noreferrer",children:r}),i[3]=r,i[4]=d,i[5]=n):n=i[5],n},nv=e=>{let t,n,i,o,a,u,p,m;let h=(0,l.c)(24),{documentId:f}=e,{documents:x,state:g,mode:y}=nn(),{exitDiffView:b}=t9(),j=function(){let e,t;let n=(0,l.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=new $.B,n[0]=t):t=n[0],t}(),[v,_]=(0,d.useState)(null),[w,I]=(0,d.useState)(null),S=(0,d.useContext)(c.DA);return h[0]!==S?(n={...S,disableNew:!0,EditReferenceLinkComponent:nj},h[0]=S,h[1]=n):n=h[1],t=n,h[2]!==w||h[3]!==v?(i=[v,w],h[2]=w,h[3]=v,h[4]=i):i=h[4],function(e){let t,n;let i=(0,l.c)(3);i[0]!==e?(t=()=>{let t=e.filter(ni);if(0===t.length)return;let n=new es.Ay(t);return()=>n.destroy()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,d.useEffect)(t,n)}(i),h[5]!==f||h[6]!==y||h[7]!==g?(o="version"===y&&(0,s.jsx)(nl,{documentId:f,state:g}),h[5]=f,h[6]=y,h[7]=g,h[8]=o):o=h[8],h[9]!==x||h[10]!==w||h[11]!==v||h[12]!==g||h[13]!==j?(a="ready"===g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nx,{documentType:x.previous.type,documentId:x.previous.id,role:"previous",ref:_,scrollElement:v,syncChannel:j,compareDocument:x.previous}),(0,s.jsx)(nx,{documentType:x.next.type,documentId:x.next.id,role:"next",ref:I,scrollElement:w,syncChannel:j,compareDocument:x.previous})]}),h[9]=x,h[10]=w,h[11]=v,h[12]=g,h[13]=j,h[14]=a):a=h[14],h[15]!==o||h[16]!==a?(u=(0,s.jsxs)(nd,{children:[o,a]}),h[15]=o,h[16]=a,h[17]=u):u=h[17],h[18]!==b||h[19]!==u?(p=(0,s.jsx)(r.lG,{id:"diffView",width:"auto",onClose:b,padding:!1,__unstable_hideCloseButton:!0,children:u}),h[18]=b,h[19]=u,h[20]=p):p=h[20],h[21]!==t||h[22]!==p?(m=(0,s.jsx)(c.DA.Provider,{value:t,children:p}),h[21]=t,h[22]=p,h[23]=m):m=h[23],m},n_=e=>{let t,n,i;let r=(0,l.c)(9),{children:o,documentId:d}=e,c=(0,a.dj)(),{t:u}=(0,x.Bdt)(eB);r[0]!==u||r[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,s.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,s.jsx)("li",{children:u(`compare-version.error.${t}`,{input:n})},t)})})})}},r[0]=u,r[1]=c,r[2]=t):t=r[2];let{isActive:p}=nn(t);return r[3]!==d||r[4]!==p?(n=p&&(0,s.jsx)(nv,{documentId:d}),r[3]=d,r[4]=p,r[5]=n):n=r[5],r[6]!==o||r[7]!==n?(i=(0,s.jsxs)(s.Fragment,{children:[o,n]}),r[6]=o,r[7]=n,r[8]=i):i=r[8],i};function nw(e){let t,n,i;let r=(0,l.c)(12),{children:a,currentMinWidth:d,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,x=void 0===h?"critical":h;return r[0]!==f?(t=(0,s.jsx)(tD,{title:f}),r[0]=f,r[1]=t):t=r[1],r[2]!==a?(n=(0,s.jsx)(tp,{overflow:"auto",children:(0,s.jsx)(o.az,{paddingX:4,paddingY:5,children:a})}),r[2]=a,r[3]=n):n=r[3],r[4]!==d||r[5]!==c||r[6]!==u||r[7]!==p||r[8]!==t||r[9]!==n||r[10]!==x?(i=(0,s.jsxs)(td,{currentMinWidth:d,flex:c,id:p,minWidth:u,tone:x,children:[t,n]}),r[4]=d,r[5]=c,r[6]=u,r[7]=p,r[8]=t,r[9]=n,r[10]=x,r[11]=i):i=r[11],i}function nI(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(x.Cu5){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,M.of)(null);return(0,H.h)(...t.map(e=>n.pipe((0,ec.u)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eu.c)(e.ms))))}let nS=(0,I.I4)(o.so)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,nE=(0,d.memo)(e=>{let t,n,i,r,o,c,u,p,m,h;let f=(0,l.c)(28),{delay:g,flex:y,message:b,minWidth:j,paneKey:v,path:_,selected:w,title:I,tone:S}=e,E=void 0===g?300:g,k=void 0===b?nI:b,{t:T}=(0,x.Bdt)(eB);e:{if("function"==typeof k){let e;f[0]!==k||f[1]!==_?(e=k(_?_.split(";"):[]),f[0]=k,f[1]=_,f[2]=e):e=f[2],t=e;break e}t=k}let C=t;f[3]!==C||f[4]!==T?(n=()=>"string"==typeof C?C:T("panes.resolving.default-message"),f[3]=C,f[4]=T,f[5]=n):n=f[5];let[D,R]=(0,d.useState)(n);f[6]!==C||f[7]!==T?(i=()=>{if("object"!=typeof C||"function"!=typeof C.subscribe)return;let e=C.subscribe(e=>{R("messageKey"in e?T(e.messageKey):e.message)});return()=>e.unsubscribe()},r=[C,T],f[6]=C,f[7]=T,f[8]=i,f[9]=r):(i=f[8],r=f[9]),(0,d.useEffect)(i,r);let[z,P]=(0,d.useState)(null),[A,M]=(0,d.useState)(!1);f[10]!==z?(o=()=>{if(z)return(0,a.X)(()=>M(!0))},c=[z],f[10]=z,f[11]=o,f[12]=c):(o=f[11],c=f[12]),(0,d.useEffect)(o,c);let $=A?"":void 0,L=I||D;f[13]!==L?(u=(0,s.jsx)(x.gd4,{showText:!0,title:L}),f[13]=L,f[14]=u):u=f[14],f[15]!==u||f[16]!==$?(p=(0,s.jsx)(nS,{align:"center","data-mounted":$,direction:"column",height:"fill",justify:"center",ref:P,children:u}),f[15]=u,f[16]=$,f[17]=p):p=f[17];let B=p;return f[18]!==B||f[19]!==E?(m=(0,s.jsx)(tp,{children:B}),f[18]=B,f[19]=E,f[20]=m):m=f[20],f[21]!==y||f[22]!==j||f[23]!==v||f[24]!==w||f[25]!==m||f[26]!==S?(h=(0,s.jsx)(td,{flex:y,id:v,minWidth:j,selected:w,tone:S,children:m}),f[21]=y,f[22]=j,f[23]=v,f[24]=w,f[25]=m,f[26]=S,f[27]=h):h=f[27],h});function nk(){let e=(0,d.useContext)(c.Fi);if(!e)throw Error("DocumentPane: missing context value");return e}function nT(e){let t,n;let i=(0,l.c)(8),{children:r,documentId:o,documentType:a}=e;return i[0]!==r||i[1]!==o||i[2]!==a?(t=(0,s.jsx)(nC,{documentId:o,documentType:a,children:r}),i[0]=r,i[1]=o,i[2]=a,i[3]=t):t=i[3],i[4]!==o||i[5]!==a||i[6]!==t?(n=(0,s.jsx)(x.ByQ,{documentId:o,documentType:a,children:t}),i[4]=o,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function nC(e){let t,n,i,r,o,a;let c=(0,l.c)(24),{children:u,documentId:p,documentType:m}=e,{enabled:h}=(0,x.Dsj)(),{connectionState:f,onPathOpen:g,inspector:y,openInspector:b}=nk(),{selectedReleaseId:j}=(0,x.QO2)(),{params:v,setParams:_,createPathWithParams:w}=eX(),I=v?.comment,S=(0,d.useRef)(v);c[0]!==v?(t=()=>{S.current=v},n=[v],c[0]=v,c[1]=t,c[2]=n):(t=c[1],n=c[2]),(0,d.useLayoutEffect)(t,n),c[3]!==w?(i=e=>{let t=w({...S.current,comment:e,inspect:x.nHq});return`${window.location.origin}${t}`},c[3]=w,c[4]=i):i=c[4];let E=i;c[5]!==_?(r=()=>{_({...S.current,comment:void 0})},c[5]=_,c[6]=r):r=c[6];let k=r;c[7]!==y?.name||c[8]!==b?(o=()=>{y?.name!==x.nHq&&b(x.nHq)},c[7]=y?.name,c[8]=b,c[9]=o):o=c[9];let T=o;if(!h){let e;return c[10]!==u?(e=(0,s.jsx)(s.Fragment,{children:u}),c[10]=u,c[11]=e):e=c[11],e}let C=y?.name===x.nHq,D="connecting"===f;return c[12]!==u||c[13]!==p||c[14]!==m||c[15]!==E||c[16]!==k||c[17]!==T||c[18]!==g||c[19]!==I||c[20]!==j||c[21]!==C||c[22]!==D?(a=(0,s.jsx)(x.ixz,{documentId:p,documentType:m,getCommentLink:E,isCommentsOpen:C,isConnecting:D,onClearSelectedComment:k,onCommentsOpen:T,onPathOpen:g,selectedCommentId:I,sortOrder:"desc",type:"field",releaseId:j,children:u}),c[12]=u,c[13]=p,c[14]=m,c[15]=E,c[16]=k,c[17]=T,c[18]=g,c[19]=I,c[20]=j,c[21]=C,c[22]=D,c[23]=a):a=c[23],a}function nD({displayed:e,documentId:t}){let{selectedReleaseId:n}=(0,x.QO2)(),{data:i}=(0,x.K0D)(),{data:r}=(0,x.gJZ)(),{data:s}=(0,x.gn8)({documentId:t}),l=e&&!e._createdAt,{params:o}=eX();return(0,d.useMemo)(()=>{if(!s)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let t=s.map(e=>(0,x._Sr)(e)),a=i.reduce((i,r)=>{let s=t.includes((0,x._hI)(r._id)),o=(0,x._hI)(r._id);return l&&o===(0,x._Sr)(e._id||"")&&o===n?i.inCreation=r:s?i.currentReleases.push(r):i.notCurrentReleases.push(r),i},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!o?.historyVersion)return a;let d=r.find(e=>(0,x._hI)(e._id)===o?.historyVersion);return d?.state==="archived"&&a.currentReleases.push(d),a},[r,l,e?._id,s,o?.historyVersion,i,n])}function nR(e){let t,n,i,r,s,o,a,d;let c=(0,l.c)(19),{displayed:u,documentId:p,editState:m}=e;c[0]!==u||c[1]!==p?(t={displayed:u,documentId:p},c[0]=u,c[1]=p,c[2]=t):t=c[2];let h=nD(t),f=m?.published?._id,g=m?.draft?._id;c[3]!==f||c[4]!==g?(n=[f,g],c[3]=f,c[4]=g,c[5]=n):n=c[5];let y=n;if(c[6]!==m||c[7]!==h.currentReleases){let e;c[9]!==m?(e=e=>m?.id&&(0,x.ctg)(m.id,(0,x._hI)(e._id)),c[9]=m,c[10]=e):e=c[10],i=h.currentReleases.map(e),c[6]=m,c[7]=h.currentReleases,c[8]=i}else i=c[8];let b=i;c[11]!==b||c[12]!==y?(r=y.concat(b).filter(nz),c[11]=b,c[12]=y,c[13]=r):r=c[13];let j=r;return s=j.findIndex(e=>e===u?._id),o=j[s-1]??void 0,a=j[s+1]??void 0,c[14]!==a||c[15]!==s||c[16]!==o||c[17]!==j?(d={position:s,previousId:o,nextId:a,stack:j},c[14]=a,c[15]=s,c[16]=o,c[17]=j,c[18]=d):d=c[18],d}function nz(e){return"string"==typeof e}function nP(){let e=(0,d.useContext)(c.DI);if(!e)throw Error("StructureTool: missing context value");return e}nE.displayName="Memo(LoadingPane)";let nA={},nM="inspect:",n$=[{id:"inspectors"},{id:"links"}],nL="sanity/structure/history";function nB(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:r}=e,o=i.length,[a,c]=(0,d.useState)(()=>Array.from(Array(o)));(0,d.useEffect)(()=>{if(a.length!==o){let e=Array.from(Array(o));for(let t=0;t<o;t++)e[t]=a[t];c(e)}},[o,a]);let u=(0,d.useCallback)((e,t)=>{c(n=>{let i=[...n];return i[e]=t,i})},[]);(0,d.useEffect)(()=>{r(a.filter(Boolean))},[a,r]);let p=(0,d.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:r}){return(0,d.memo)(function(){let s,o,a;let c=(0,l.c)(4);c[0]===Symbol.for("react.memo_cache_sentinel")?(s={documentId:e,documentType:t},c[0]=s):s=c[0];let u=r(s),p=(0,x.$6H)(u);return c[1]!==p?(o=()=>{i(n,p)},a=[p],c[1]=p,c[2]=o,c[3]=a):(o=c[2],a=c[3]),(0,d.useEffect)(o,a),null})}({documentId:t,documentType:n,index:i,setMenuItem:u,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,u]);return(0,s.jsx)(s.Fragment,{children:p.map(([e,t])=>t&&(0,s.jsx)(e,{},t))})}function nO(){let e,t;let n=(0,l.c)(19),{connectionState:i,schemaType:r,title:s,displayed:o}=nk(),{t:a}=(0,x.Bdt)(eB),d=!!o;n[0]!==o||n[1]!==r||n[2]!==d?(e={enabled:d,schemaType:r,value:o},n[0]=o,n[1]=r,n[2]=d,n[3]=e):e=n[3];let{error:c,value:u}=(0,x.MOl)(e);if("connecting"===i&&!d){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},n[4]=e):e=n[4],e}if(s){let e;return n[5]!==s?(e={error:void 0,title:s},n[5]=s,n[6]=e):e=n[6],e}if(!o){let e,t;let i=r?.title||r?.name;return n[7]!==a||n[8]!==i?(e=a("panes.document-header-title.new.text",{schemaType:i}),n[7]=a,n[8]=i,n[9]=e):e=n[9],n[10]!==e?(t={error:void 0,title:e},n[10]=e,n[11]=t):t=n[11],t}if(c){let e,t;return n[12]!==c.message||n[13]!==a?(e=a("panes.document-list-pane.error.text",{error:c.message}),n[12]=c.message,n[13]=a,n[14]=e):e=n[14],n[15]!==e?(t={error:e,title:void 0},n[15]=e,n[16]=t):t=n[16],t}let p=u?.title;return n[17]!==p?(t={error:void 0,title:p},n[17]=p,n[18]=t):t=n[18],t}nB.displayName="DocumentInspectorMenuItemsResolver";let nH=["patch","commit"],nN=(0,d.memo)(function(){let e,t,n,i,r;let o=(0,l.c)(12),{push:c}=(0,a.dj)(),{documentId:u,documentType:p,value:m}=nk(),h=nO(),f=h.error,g=(0,x.cUp)(u,p),y=(0,d.useRef)(g),b=eX(),{t:j}=(0,x.Bdt)(eB);e:{if(!h.title&&!f&&!nH.includes(g?.op)&&"string"==typeof m.title&&g?.type==="success"){e=m.title;break e}e=h.title}let v=e;o[0]!==j||o[1]!==v?(t=v||j("panes.document-operation-results.operation-undefined-title"),o[0]=j,o[1]=v,o[2]=t):t=o[2];let _=t;o[3]!==_?(n=_.length>25?`${_.slice(0,25)}...`:_,o[3]=_,o[4]=n):n=o[4];let w=n;return o[5]!==w||o[6]!==g||o[7]!==b||o[8]!==c||o[9]!==j?(i=()=>{let e;if(g&&g!==y.current)return"error"===g.type&&c({closable:!0,duration:3e4,status:"error",title:j("panes.document-operation-results.operation-error",{context:g.op}),description:(0,s.jsxs)("details",{children:[(0,s.jsx)("summary",{children:j("panes.document-operation-results.error.summary.title")}),g.error.message]})}),"success"!==g.type||nH.includes(g.op)||c({closable:!0,status:"success",title:(0,s.jsx)(x.HTc,{context:g.op,i18nKey:"panes.document-operation-results.operation-success",t:j,values:{op:g.op,title:w},components:{Strong:"strong"}})}),"success"===g.type&&"delete"===g.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),y.current=g,()=>clearTimeout(e)},r=[g,b,c,j,w],o[5]=w,o[6]=g,o[7]=b,o[8]=c,o[9]=j,o[10]=i,o[11]=r):(i=o[10],r=o[11]),(0,d.useEffect)(i,r),null}),nY=e=>!0===e.liveEdit,nV=(0,I.I4)(o.Zp)({position:"relative",zIndex:1,lineHeight:0});function nU(e){let t,n,i,a,d,c,p,m,h,f,g,y;let b=(0,l.c)(25);b[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:a,title:c,...d}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=i,b[4]=a,b[5]=d,b[6]=c):(t=b[1],n=b[2],i=b[3],a=b[4],d=b[5],c=b[6]);let{t:j}=(0,x.Bdt)(eB);return b[7]!==c?(p=(0,s.jsx)(o.az,{flex:1,padding:3,children:(0,s.jsx)(o.EY,{as:"h1",size:1,weight:"medium",children:c})}),b[7]=c,b[8]=p):p=b[8],b[9]!==j?(m=j("document-inspector.close-button.tooltip"),b[9]=j,b[10]=m):m=b[10],b[11]!==m?(h={content:m},b[11]=m,b[12]=h):h=b[12],b[13]!==n||b[14]!==a||b[15]!==h?(f=(0,s.jsx)(o.az,{flex:"none",padding:1,children:(0,s.jsx)(r.$n,{"aria-label":n,icon:u.USm,mode:"bleed",onClick:a,tooltipProps:h})}),b[13]=n,b[14]=a,b[15]=h,b[16]=f):f=b[16],b[17]!==p||b[18]!==f?(g=(0,s.jsxs)(o.so,{padding:2,children:[p,f]}),b[17]=p,b[18]=f,b[19]=g):g=b[19],b[20]!==t||b[21]!==i||b[22]!==d||b[23]!==g?(y=(0,s.jsxs)(nV,{...d,as:i,children:[g,t]}),b[20]=t,b[21]=i,b[22]=d,b[23]=g,b[24]=y):y=b[24],y}function nF(e){let t,n,i;let r=(0,l.c)(14),{documentId:a,documentType:d,flex:c}=e,{collapsed:u}=tu(),{closeInspector:p,inspector:m}=nk(),{features:h}=nP();r[0]!==p||r[1]!==m?(t=()=>{m&&p(m.name)},r[0]=p,r[1]=m,r[2]=t):t=r[2];let f=t;if(u||!m)return null;let g=m.component;r[3]!==g||r[4]!==a||r[5]!==d||r[6]!==f?(n=(0,s.jsx)(g,{onClose:f,documentId:a,documentType:d}),r[3]=g,r[4]=a,r[5]=d,r[6]=f,r[7]=n):n=r[7];let y=n;if(h.resizablePanes){let e;return r[8]!==y||r[9]!==c?(e=(0,s.jsx)(x.cMO,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:y}),r[8]=y,r[9]=c,r[10]=e):e=r[10],e}return r[11]!==y||r[12]!==c?(i=(0,s.jsx)(o.az,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:y}),r[11]=y,r[12]=c,r[13]=i):i=r[13],i}function nW(e,t,n){let i,r,s,o,a,d;let c=(0,l.c)(16),u=(0,x.P$5)();c[0]!==t||c[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),c[0]=t,c[1]=e,c[2]=i):i=c[2];let p=i.join(".");if(c[3]!==n||c[4]!==u||c[5]!==p){let e;c[7]!==n?(e=e=>null===e?n:e,c[7]=n,c[8]=e):e=c[8],s=u.getKey(p).pipe((0,O.T)(e)),c[3]=n,c[4]=u,c[5]=p,c[6]=s}else s=c[6];r=s;let m=(0,k.J)(r,n);c[9]!==u||c[10]!==p||c[11]!==m?(o=e=>{e!==m&&u.setKey(p,e)},c[9]=u,c[10]=p,c[11]=m,c[12]=o):o=c[12];let h=o;return c[13]!==h||c[14]!==m?(d=[m,h],c[13]=h,c[14]=m,c[15]=d):d=c[15],d}let nK={id:"parsed",title:"document-inspector.view-mode.parsed"},nQ={id:"raw",title:"document-inspector.view-mode.raw-json"},nq=[nK,nQ],nJ=new eb({maxSize:1e3});function nZ(e){let{path:t}=e,n=nJ.get(t);void 0!==n&&nJ.set(t,!n)}function nG(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function nX(e){nG(e.currentTarget)}function n0(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),nG(e.currentTarget))}let n1=I.I4.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return(0,I.AH)`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,o.D0)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,o.D0)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,o.D0)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,o.D0)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,o.D0)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function n2(e){let t,n,i;let r=(0,l.c)(8),{onChange:a,query:d}=e;r[0]!==a?(t=e=>a(e.target.value),r[0]=a,r[1]=t):t=r[1];let c=t,{t:p}=(0,x.Bdt)(eB);r[2]!==p?(n=p("document-inspector.search.placeholder"),r[2]=p,r[3]=n):n=r[3];let m=d||"";return r[4]!==c||r[5]!==n||r[6]!==m?(i=(0,s.jsx)(o.ks,{icon:u.WIv,onChange:c,placeholder:n,radius:2,value:m}),r[4]=c,r[5]=n,r[6]=m,r[7]=i):i=r[7],i}function n3(e){let t,n,i,d,c,u,p,m,h,f,g,y,b,j,v,_;let w=(0,l.c)(49),{value:I}=e,{onInspectClose:S,paneKey:E}=nk(),k=`${E}_inspect_`,[T,C]=nW("inspect-view-mode",null,"parsed");w[0]!==T?(t=nq.find(e=>e.id===T),w[0]=T,w[1]=t):t=w[1];let D=t;w[2]!==C?(n=()=>{C(nK.id)},w[2]=C,w[3]=n):n=w[3];let R=n;w[4]!==C?(i=()=>{C(nQ.id)},w[4]=C,w[5]=i):i=w[5];let z=i,{t:P}=(0,x.Bdt)(eB),A=`${k}dialog`;w[6]!==P||w[7]!==I?(d=(0,x.u4i)(I)&&(0,x.KgX)(I._id)&&(0,x.KgX)(I._type)?(0,s.jsx)(x.HTc,{t:P,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,s.jsx)("em",{children:(0,s.jsx)(eH,{document:I})})}}):(0,s.jsx)("em",{children:P("document-inspector.dialog.title-no-value")}),w[6]=P,w[7]=I,w[8]=d):d=w[8],w[9]===Symbol.for("react.memo_cache_sentinel")?(c={position:"sticky",bottom:0,zIndex:3},w[9]=c):c=w[9];let M=`${k}tabpanel`,$=`${k}tab-${nK.id}`;w[10]!==P?(u=P(nK.title),w[10]=P,w[11]=u):u=w[11];let L=D===nK;w[12]!==R||w[13]!==M||w[14]!==$||w[15]!==u||w[16]!==L?(p=(0,s.jsx)(r.oz,{"aria-controls":M,id:$,label:u,onClick:R,selected:L}),w[12]=R,w[13]=M,w[14]=$,w[15]=u,w[16]=L,w[17]=p):p=w[17];let B=`${k}tabpanel`,O=`${k}tab-${nQ.id}`;w[18]!==P?(m=P(nQ.title),w[18]=P,w[19]=m):m=w[19];let H=D===nQ;w[20]!==z||w[21]!==B||w[22]!==O||w[23]!==m||w[24]!==H?(h=(0,s.jsx)(r.oz,{"aria-controls":B,id:O,label:m,onClick:z,selected:H}),w[20]=z,w[21]=B,w[22]=O,w[23]=m,w[24]=H,w[25]=h):h=w[25],w[26]!==p||w[27]!==h?(f=(0,s.jsx)(o.Zp,{padding:3,paddingTop:0,shadow:1,style:c,children:(0,s.jsxs)(o.wb,{space:1,children:[p,h]})}),w[26]=p,w[27]=h,w[28]=f):f=w[28];let N=`${k}tab-${T}`,Y=`${k}tabpanel`;return w[29]===Symbol.for("react.memo_cache_sentinel")?(g={outline:"none"},w[29]=g):g=w[29],w[30]!==I||w[31]!==D?(y=D===nK&&(0,s.jsx)(n1,{children:(0,s.jsx)(ey.A,{data:I,isExpanded:function e(t,n){let i=nJ.get(t);return void 0===i?(nJ.set(t,Array.isArray(n)||(0,x.u4i)(n)),e(t,n)):i},onClick:nZ,search:n2,filterOptions:{ignoreCase:!0}})}),w[30]=I,w[31]=D,w[32]=y):y=w[32],w[33]!==I||w[34]!==D?(b=D===nQ&&(0,s.jsx)(o.Cy,{language:"json",tabIndex:0,onKeyDown:n0,onDoubleClick:nX,onFocus:nX,size:1,children:JSON.stringify(I,null,2)}),w[33]=I,w[34]=D,w[35]=b):b=w[35],w[36]!==N||w[37]!==Y||w[38]!==y||w[39]!==b?(j=(0,s.jsxs)(a.Kp,{"aria-labelledby":N,flex:1,id:Y,overflow:"auto",padding:4,style:g,children:[y,b]}),w[36]=N,w[37]=Y,w[38]=y,w[39]=b,w[40]=j):j=w[40],w[41]!==f||w[42]!==j?(v=(0,s.jsxs)(o.so,{direction:"column",height:"fill",children:[f,j]}),w[41]=f,w[42]=j,w[43]=v):v=w[43],w[44]!==S||w[45]!==v||w[46]!==A||w[47]!==d?(_=(0,s.jsx)(r.lG,{bodyHeight:"fill",id:A,header:d,onClose:S,onClickOutside:S,padding:!1,width:2,children:v}),w[44]=S,w[45]=v,w[46]=A,w[47]=d,w[48]=_):_=w[48],_}function n4(e){let t,n,i,a,d,c,u,p,m,h,f;let x=(0,l.c)(22);x[0]!==e?({action:n,content:i,icon:t,tone:d,paddingY:c,...a}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=a,x[5]=d,x[6]=c):(t=x[1],n=x[2],i=x[3],a=x[4],d=x[5],c=x[6]);let g=void 0===d?"transparent":d,y=void 0===c?2:c;return x[7]!==t?(u=t&&(0,s.jsx)(o.EY,{size:0,children:(0,s.jsx)(t,{})}),x[7]=t,x[8]=u):u=x[8],x[9]!==i?(p=(0,s.jsx)(o.so,{align:"center",flex:1,gap:2,paddingY:2,children:i}),x[9]=i,x[10]=p):p=x[10],x[11]!==n?(m=n&&(0,s.jsx)(r.$n,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),x[11]=n,x[12]=m):m=x[12],x[13]!==u||x[14]!==p||x[15]!==m?(h=(0,s.jsxs)(o.so,{align:"center",gap:3,paddingX:2,children:[u,p,m]}),x[13]=u,x[14]=p,x[15]=m,x[16]=h):h=x[16],x[17]!==y||x[18]!==a||x[19]!==h||x[20]!==g?(f=(0,s.jsx)(o.az,{padding:1,children:(0,s.jsx)(o.Zp,{radius:3,paddingX:2,paddingY:y,tone:g,...a,children:h})}),x[17]=y,x[18]=a,x[19]=h,x[20]=g,x[21]=f):f=x[21],f}function n5(){let e=(0,l.c)(3),{isDeleted:t,isDeleting:n}=nk(),{selectedPerspective:i}=(0,x.QO2)();if(!(0,x.xo4)(i)&&!(0,x.o2j)(i)&&"archived"===i.state){let t;return e[0]!==i?(t=(0,s.jsx)(n7,{release:i}),e[0]=i,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(n6,{}),e[2]=t):t=e[2],t}}function n6(){let e,t,n,i,r;let a=(0,l.c)(17),{documentId:d,documentType:c,lastNonDeletedRevId:p}=nk(),{restore:m}=(0,x.QSs)(d,c),{navigateIntent:h}=(0,T.rd)();a[0]!==d||a[1]!==c||a[2]!==p||a[3]!==h||a[4]!==m?(e=()=>{p&&(m.execute(p),h("edit",{id:d,type:c}))},a[0]=d,a[1]=c,a[2]=p,a[3]=h,a[4]=m,a[5]=e):e=a[5];let f=e,{t:g}=(0,x.Bdt)(eB);return a[6]!==f||a[7]!==p||a[8]!==g?(t=p?{onClick:f,text:g("banners.deleted-document-banner.restore-button.text")}:void 0,a[6]=f,a[7]=p,a[8]=g,a[9]=t):t=a[9],a[10]!==g?(n=g("banners.deleted-document-banner.text"),a[10]=g,a[11]=n):n=a[11],a[12]!==n?(i=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:n}),a[12]=n,a[13]=i):i=a[13],a[14]!==t||a[15]!==i?(r=(0,s.jsx)(n4,{action:t,content:i,"data-testid":"deleted-document-banner",icon:u.Eoh}),a[14]=t,a[15]=i,a[16]=r):r=a[16],r}let n7=e=>{let t,n,i;let r=(0,l.c)(8),{release:a}=e,{t:d}=(0,x.Bdt)();return r[0]!==a.metadata?.title||r[1]!==d?(t=a.metadata?.title||d("release.placeholder-untitled-release"),r[0]=a.metadata?.title,r[1]=d,r[2]=t):t=r[2],r[3]!==t?(n={title:t},r[3]=t,r[4]=n):n=r[4],r[5]!==d||r[6]!==n?(i=(0,s.jsx)(n4,{tone:"caution",content:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:(0,s.jsx)(x.HTc,{t:d,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:u.tkA}),r[5]=d,r[6]=n,r[7]=i):i=r[7],i};function n8(){let e,t;let n=(0,l.c)(5),{schemaType:i}=nk(),{t:r}=(0,x.Bdt)(eB);return(0,g.fq)(i)?(n[0]!==r?(e=(0,s.jsx)(x.HTc,{t:r,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=r,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,s.jsx)(n4,{content:(0,s.jsxs)(o.EY,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:u.YZv}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let n9=(0,ev.g_)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),ie=(0,ev.g_)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),it=(0,I.I4)(o.az)`
  box-sizing: border-box;
`;function ii(e){let t,n,i,c,u,p,m,h,f,g,y,b,j,v,_;let w=(0,l.c)(56),{onClose:I,onRequestSubmitted:S}=e,{t:E}=(0,x.Bdt)(eB),T=(0,ej.Jr)(),C=`request-permissions-${(0,d.useId)()}`,D=(0,x.M91)();w[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},w[0]=t):t=w[0];let R=(0,x.tH7)(t),z=(0,a.dj)(),P=(0,x.YKH)(),[A,$]=(0,d.useState)(!1),[L,B]=(0,d.useState)(""),[H,V]=(0,d.useState)(),[U,F]=(0,d.useState)(!1),[W,K]=(0,d.useState)(!1);e:{let e;let t="administrator";if(!D||!R){let e;w[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,M.of)(t),w[1]=e):e=w[1],n=e;break e}if(w[2]!==R.observable||w[3]!==D){let n,i;w[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(is).find(ir)?"editor":t,w[5]=n):n=w[5],w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,M.of)(t),w[6]=i):i=w[6],e=R.observable.request({url:`/projects/${D}/roles`}).pipe((0,O.T)(n),(0,N.Z)(t),(0,Y.W)(i)),w[2]=R.observable,w[3]=D,w[4]=e}else e=w[4];n=e}let Q=(0,k.J)(n);w[7]!==R||w[8]!==L||w[9]!==S||w[10]!==D||w[11]!==Q||w[12]!==T||w[13]!==z?(i=()=>{$(!0),R.request({url:`/access/project/${D}/requests`,method:"post",body:{note:L,requestUrl:window?.location.href,requestedRole:Q,type:"role"}}).then(e=>{e&&(S&&S(),T.log(ie),z.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(F(!0),V(n)),409===t?(K(!0),V(n)):z.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{$(!1)})},w[7]=R,w[8]=L,w[9]=S,w[10]=D,w[11]=Q,w[12]=T,w[13]=z,w[14]=i):i=w[14];let q=i,J=P.fullscreen;w[15]!==E?(c=E("request-permission-dialog.header.text"),w[15]=E,w[16]=c):c=w[16],w[17]!==E?(u=E("confirm-dialog.cancel-button.fallback-text"),w[17]=E,w[18]=u):u=w[18],w[19]!==I||w[20]!==u?(p={onClick:I,text:u},w[19]=I,w[20]=u,w[21]=p):p=w[21];let Z=U||W;return w[22]!==E?(m=E("request-permission-dialog.confirm-button.text"),w[22]=E,w[23]=m):m=w[23],w[24]!==A||w[25]!==q||w[26]!==Z||w[27]!==m?(h={onClick:q,loading:A,disabled:Z,text:m,tone:"primary",type:"submit"},w[24]=A,w[25]=q,w[26]=Z,w[27]=m,w[28]=h):h=w[28],w[29]!==h||w[30]!==p?(f={cancelButton:p,confirmButton:h},w[29]=h,w[30]=p,w[31]=f):f=w[31],w[32]!==E?(g=E("request-permission-dialog.description.text"),w[32]=E,w[33]=g):g=w[33],w[34]!==g?(y=(0,s.jsx)(o.EY,{children:g}),w[34]=g,w[35]=y):y=w[35],w[36]!==W||w[37]!==U||w[38]!==A||w[39]!==H||w[40]!==L||w[41]!==q||w[42]!==E?(b=U||W?(0,s.jsx)(o.Zp,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,s.jsxs)(o.EY,{size:1,children:[U&&(0,s.jsx)(s.Fragment,{children:H??E("request-permission-dialog.warning.limit-reached.text")}),W&&(0,s.jsx)(s.Fragment,{children:H??E("request-permission-dialog.warning.denied.text")})]})}):(0,s.jsxs)(o.BJ,{space:3,paddingBottom:0,children:[(0,s.jsx)(o.ks,{placeholder:E("request-permission-dialog.note-input.placeholder.text"),disabled:A,onKeyDown:e=>{"Enter"===e.key&&q()},maxLength:150,value:L,onChange:e=>{B(e.currentTarget.value)}}),(0,s.jsx)(o.EY,{align:"right",muted:!0,size:1,children:`${L.length}/150`})]}),w[36]=W,w[37]=U,w[38]=A,w[39]=H,w[40]=L,w[41]=q,w[42]=E,w[43]=b):b=w[43],w[44]!==y||w[45]!==b?(j=(0,s.jsx)(it,{children:(0,s.jsxs)(o.BJ,{space:4,children:[y,b]})}),w[44]=y,w[45]=b,w[46]=j):j=w[46],w[47]!==C||w[48]!==I||w[49]!==f||w[50]!==j||w[51]!==c?(v=(0,s.jsx)(r.lG,{width:1,id:C,header:c,footer:f,onClose:I,onClickOutside:I,children:j}),w[47]=C,w[48]=I,w[49]=f,w[50]=j,w[51]=c,w[52]=v):v=w[52],w[53]!==v||w[54]!==P.fullscreen?(_=(0,s.jsx)(a.Co,{position:"fixed",zOffset:J,children:v}),w[53]=v,w[54]=P.fullscreen,w[55]=_):_=w[55],_}function ir(e){return"editor"===e.name}function is(e){return e?.appliesToUsers}(0,I.I4)(o.so).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let il={loading:!0,error:!1,status:void 0},io={loading:!1,error:!1,status:"none"},ia={loading:!1,error:!1,status:"declined"},id={loading:!1,error:!1,status:"pending"},ic={loading:!1,error:!1,status:"expired"},iu=()=>{let e,t,n;let i=(0,l.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let r=(0,x.tH7)(e),s=(0,x.M91)();e:{var o,a;let e;if(!r||!s){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,M.of)(io),i[1]=e):e=i[1],t=e;break e}i[2]!==r||i[3]!==s?(o=r,a=s,e=o.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,O.T)(e=>{if(!e||0===e.length)return io;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,e_.A)((0,ew.A)(new Date(n.createdAt),2),new Date)?ia:t.find(e=>"pending"===e.status&&(0,e_.A)((0,ew.A)(new Date(e.createdAt),2),new Date))?id:t.find(e=>"pending"===e.status&&(0,eI.A)((0,ew.A)(new Date(e.createdAt),2),new Date))?ic:io}),(0,Y.W)(e=>(console.error("Failed to fetch access requests",e),(0,M.of)({loading:!1,error:!0,status:void 0}))),(0,N.Z)(il)),i[2]=r,i[3]=s,i[4]=e):e=i[4],t=e}let d=t,{loading:c,error:u,status:p}=(0,k.J)(d,il);return i[5]!==u||i[6]!==c||i[7]!==p?(n={data:p,loading:c,error:u},i[5]=u,i[6]=c,i[7]=p,i[8]=n):n=i[8],n};function ip(e){let t,n,i,r,a,c,p,m,h,f,g,y;let b=(0,l.c)(33),{requiredPermission:j}=e,v=(0,x.iZK)(),{data:_,loading:w,error:I}=iu(),[S,E]=(0,d.useState)(!1);t="pending"===_||"declined"===_||S,b[0]!==v?.roles?(n=v?.roles||[],b[0]=v?.roles,b[1]=n):n=b[1];let k=n,T=1===k.length&&"viewer"===k[0].name,[C,D]=(0,d.useState)(!1);b[2]===Symbol.for("react.memo_cache_sentinel")?(i={style:"short"},b[2]=i):i=b[2];let R=(0,x.FfM)(i),{t:z}=(0,x.Bdt)(eB),P=(0,ej.Jr)();b[3]!==k||b[4]!==R?(r=k.map(ih),a=R.formatToParts(r).map(im),b[3]=k,b[4]=R,b[5]=r,b[6]=a):(r=b[5],a=b[6]);let A=a;return b[7]!==A?(c={Roles:()=>(0,s.jsx)(s.Fragment,{children:A})},b[7]=A,b[8]=c):c=b[8],b[9]!==r||b[10]!==A.length?(p={count:A.length,roles:r},b[9]=r,b[10]=A.length,b[11]=p):p=b[11],b[12]!==j||b[13]!==z||b[14]!==c||b[15]!==p?(m=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:(0,s.jsx)(x.HTc,{t:z,i18nKey:"banners.permission-check-banner.missing-permission",components:c,values:p,context:j})}),b[12]=j,b[13]=z,b[14]=c,b[15]=p,b[16]=m):m=b[16],b[17]!==T||b[18]!==t||b[19]!==I||b[20]!==w||b[21]!==_||b[22]!==z||b[23]!==P?(h=T&&_&&!I&&!w?{onClick:t?void 0:()=>{D(!0),P.log(n9)},text:z(t?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:t?"default":"primary",disabled:t,mode:t?"bleed":void 0}:void 0,b[17]=T,b[18]=t,b[19]=I,b[20]=w,b[21]=_,b[22]=z,b[23]=P,b[24]=h):h=b[24],b[25]!==m||b[26]!==h?(f=(0,s.jsx)(n4,{content:m,action:h,"data-testid":"permission-check-banner",icon:u.Eoh}),b[25]=m,b[26]=h,b[27]=f):f=b[27],b[28]!==C?(g=C&&(0,s.jsx)(ii,{onClose:()=>D(!1),onRequestSubmitted:()=>{E(!0),D(!1)}}),b[28]=C,b[29]=g):g=b[29],b[30]!==g||b[31]!==f?(y=(0,s.jsxs)(s.Fragment,{children:[f,g]}),b[30]=g,b[31]=f,b[32]=y):y=b[32],y}function im(e){return"element"===e.type?(0,s.jsx)("code",{children:e.value},e.value):e.value}function ih(e){return e.title}let ix=(0,d.memo)(()=>{let e=(0,x.yKO)(),{selectedReleaseId:t}=(0,x.QO2)(),{params:n,groupIndex:i,routerPanesState:r,replaceCurrent:l,BackLink:a}=eX(),c=r[i]?.[0].id,p=r[i-1]?.[0],m=p?.id,h=!!p?.params?.rev,f=(0,d.useMemo)(()=>n?.parentRefPath&&(0,R.sH)(n.parentRefPath)||null,[n?.parentRefPath]),{t:g}=(0,x.Bdt)(eB),y=(0,d.useMemo)(()=>{let n=f?.[0];if(!m||!n||!f)return(0,M.of)({loading:!1});let i=(0,x.IMx)(m),r=(0,R.sH)(n),s=r.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,V.x)((0,M.of)({loading:!0}),e.unstable_observePathsDocumentPair(i,-1===s?r:r.slice(0,s),{version:t}).pipe((0,ep.B)(750),(0,O.T)(({draft:e,published:t,version:n})=>({loading:!1,result:{availability:{draft:e.availability,published:t.availability,...n?.availability?{version:n.availability}:{}},refValue:R.Jt(n?.snapshot||e.snapshot||t.snapshot,f)?._ref}}))))},[t,e,m,f]),b=(0,k.J)(y,{loading:!0}),j=(0,d.useCallback)(()=>{b.loading||b.result?.refValue&&l({id:b.result.refValue,params:n})},[b.loading,b.result,l,n]);return m&&f&&!h&&!b.loading&&(b.result?.availability.draft.available||b.result?.availability.published.available)&&b.result?.refValue!==c?(0,s.jsx)(n4,{action:b.result?.refValue?{onClick:j,icon:u.Fjq,text:g("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:a,icon:u.USm,text:g("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:g(b.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:u.sAQ,tone:"caution"}):null});function ig(e){let t,n;let i=(0,l.c)(4),r=(0,a.dj)();i[0]!==e||i[1]!==r?(t=()=>(e.enabled&&r.push({...e,duration:20736e5}),()=>{e.enabled&&r.push({...e,duration:.01})}),n=[e,r],i[0]=e,i[1]=r,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,d.useEffect)(t,n)}function iy(e){let t,n,i,c,u,p,m,h,f,g,y,b,j,v;let _=(0,l.c)(43),{documentId:w,currentRelease:I,value:S}=e,E=I??x.k0f;_[0]!==E?(t=(0,x.Y73)(E),_[0]=E,_[1]=t):t=_[1];let k=t,{t:T}=(0,x.Bdt)(C.structureLocaleNamespace),{t:D}=(0,x.Bdt)(),{createVersion:R}=(0,x.wI4)(),[z,P]=(0,d.useState)(),A=(0,a.dj)();_[2]!==R||_[3]!==I._id||_[4]!==w||_[5]!==T||_[6]!==A||_[7]!==S?(n=async()=>{if(I._id){P({status:"creating",lastUpdate:new Date});try{await R((0,x._hI)(I._id),w,S),P({status:"created",lastUpdate:new Date})}catch(e){A.push({status:"error",closable:!0,title:T("banners.release.error.title"),description:T("banners.release.error.description",{message:e.message})}),P(void 0)}}},_[2]=R,_[3]=I._id,_[4]=w,_[5]=T,_[6]=A,_[7]=S,_[8]=n):n=_[8];let M=n,$=function(e){let t,n,i;let r=(0,l.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,r[0]=t):t=r[0];let[s,o]=(0,d.useState)(t);return 200!==r[1]?(n=()=>{let t=setInterval(()=>{o(new Date)},e);return()=>clearInterval(t)},i=[e],r[1]=e,r[2]=n,r[3]=i):(n=r[2],i=r[3]),(0,d.useEffect)(n,i),s}(200),L=z?.status==="created"&&$.getTime()-z.lastUpdate.getTime()>1e3;_[9]!==T?(i=T("banners.release.waiting.title"),_[9]=T,_[10]=i):i=_[10],_[11]!==T?(c=T("banners.release.waiting.description"),_[11]=T,_[12]=c):c=_[12],_[13]!==L||_[14]!==i||_[15]!==c?(u={status:"info",id:"add-document-to-release",enabled:L,closable:!0,title:i,description:c},_[13]=L,_[14]=i,_[15]=c,_[16]=u):u=_[16],ig(u),_[17]!==I.metadata?.title||_[18]!==D?(p=I?.metadata?.title||D("release.placeholder-untitled-release"),_[17]=I.metadata?.title,_[18]=D,_[19]=p):p=_[19],_[20]!==p?(m={title:p},_[20]=p,_[21]=m):m=_[21],_[22]!==I?(h=(0,x.bSq)(I),_[22]=I,_[23]=h):h=_[23],_[24]!==h?(f={VersionBadge:h},_[24]=h,_[25]=f):f=_[25],_[26]!==T||_[27]!==f||_[28]!==m?(g=(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{i18nKey:"banners.release.not-in-release",t:T,values:m,components:f})}),_[26]=T,_[27]=f,_[28]=m,_[29]=g):g=_[29],_[30]!==T?(y=T("banners.release.action.add-to-release"),_[30]=T,_[31]=y):y=_[31];let B=!!z;return _[32]!==M||_[33]!==y||_[34]!==B||_[35]!==k?(b=(0,s.jsx)(o.so,{gap:2,align:"center",justify:"center",children:(0,s.jsx)(r.$n,{text:y,tone:k,disabled:B,onClick:M})}),_[32]=M,_[33]=y,_[34]=B,_[35]=k,_[36]=b):b=_[36],_[37]!==g||_[38]!==b?(j=(0,s.jsxs)(o.so,{align:"center",justify:"space-between",gap:1,flex:1,children:[g,b]}),_[37]=g,_[38]=b,_[39]=j):j=_[39],_[40]!==j||_[41]!==k?(v=(0,s.jsx)(n4,{tone:k,paddingY:0,content:j}),_[40]=j,_[41]=k,_[42]=v):v=_[42],v}function ib(){let{t:e}=(0,x.Bdt)(C.structureLocaleNamespace),{t:t}=(0,x.Bdt)(),{data:n}=(0,x.gJZ)(),{params:i,setParams:r}=(0,C.usePaneRouter)(),l=(0,d.useMemo)(()=>n.find(e=>(0,x._hI)(e._id)===i?.historyVersion),[n,i?.historyVersion]),a=l?.state==="published"?"banners.published-release.description":"banners.archived-release.description",c=l?.metadata.title||t("release.placeholder-untitled-release");return(0,s.jsx)(n4,{tone:"caution",paddingY:2,content:(0,s.jsx)(o.so,{align:"center",justify:"space-between",gap:1,flex:1,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{t:e,i18nKey:a,values:{title:c},components:{VersionBadge:(0,x.bSq)(l)}})})}),action:i?.archivedRelease?void 0:{text:"Go back to published version",onClick:()=>{r({...i,rev:i?.historyEvent||void 0,since:void 0,historyVersion:void 0})}}})}function ij(){let e,t;let n=(0,l.c)(5),{value:i}=(0,C.useDocumentPane)(),{documentLinkedBannerContent:r}=(0,x.eaL)().components??{};n[0]!==i?(e=(0,x.G_3)(i),n[0]=i,n[1]=e):e=n[1];let o=e;return r&&o?(n[2]!==r||n[3]!==o?(t=(0,s.jsx)(n4,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,s.jsx)(r,{metadata:o})}),n[2]=r,n[3]=o,n[4]=t):t=n[4],t):null}ix.displayName="Memo(ReferenceChangedBanner)";let iv=(0,ev.g_)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"});function i_(e){let t,n,i,a,c,p,m,h,f,g,y,b,j,v;let _=(0,l.c)(38),{displayed:w,documentId:I,schemaType:S}=e,{t:E}=(0,x.Bdt)(eB),[k,T]=(0,d.useState)(!1),[C,D]=(0,d.useState)(!1),R=(0,ej.Jr)(),{publish:z,discardChanges:P}=(0,x.QSs)(I,w?._type||"");_[0]!==z||_[1]!==R?(t=()=>{z.execute(),T(!0),R.log(iv,{liveEditResolveType:"publish"})},_[0]=z,_[1]=R,_[2]=t):t=_[2];let A=t;_[3]!==P||_[4]!==R?(n=()=>{P.execute(),D(!0),R.log(iv,{liveEditResolveType:"discard"})},_[3]=P,_[4]=R,_[5]=n):n=_[5];let M=n;return _[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{T(!1),D(!1)},_[6]=i):i=_[6],(0,d.useEffect)(i),_[7]!==S.title?(a={schemaType:S.title},_[7]=S.title,_[8]=a):a=_[8],_[9]!==E||_[10]!==a?(c=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:(0,s.jsx)(x.HTc,{t:E,i18nKey:"banners.live-edit-draft-banner.text",values:a})}),_[9]=E,_[10]=a,_[11]=c):c=_[11],_[12]!==E?(p=E("action.publish.live-edit.label"),_[12]=E,_[13]=p):p=_[13],_[14]!==E?(m=E("banners.live-edit-draft-banner.publish.tooltip"),_[14]=E,_[15]=m):m=_[15],_[16]!==m?(h={content:m},_[16]=m,_[17]=h):h=_[17],_[18]!==A||_[19]!==k||_[20]!==p||_[21]!==h?(f=(0,s.jsx)(r.$n,{onClick:A,text:p,tooltipProps:h,loading:k}),_[18]=A,_[19]=k,_[20]=p,_[21]=h,_[22]=f):f=_[22],_[23]!==E?(g=E("banners.live-edit-draft-banner.discard.tooltip"),_[23]=E,_[24]=g):g=_[24],_[25]!==E?(y=E("banners.live-edit-draft-banner.discard.tooltip"),_[25]=E,_[26]=y):y=_[26],_[27]!==y?(b={content:y},_[27]=y,_[28]=b):b=_[28],_[29]!==M||_[30]!==C||_[31]!==g||_[32]!==b?(j=(0,s.jsx)(r.$n,{onClick:M,text:g,tooltipProps:b,loading:C}),_[29]=M,_[30]=C,_[31]=g,_[32]=b,_[33]=j):j=_[33],_[34]!==j||_[35]!==c||_[36]!==f?(v=(0,s.jsx)(n4,{content:(0,s.jsxs)(o.so,{align:"center",justify:"space-between",gap:2,children:[c,f,j]}),"data-testid":"live-edit-type-banner",icon:u.YZv}),_[34]=j,_[35]=c,_[36]=f,_[37]=v):v=_[37],v}function iw(e){let t,n;let i=(0,l.c)(4),{documentId:r,isPinnedDraftOrPublished:o}=e;i[0]!==r?(t={documentId:r},i[0]=r,i[1]=t):t=i[1];let a=(0,x.Jr6)(t);return(0,x.A_X)(r)&&a&&o?(i[2]!==r?(n=(0,s.jsx)(iI,{documentId:r}),i[2]=r,i[3]=n):n=i[3],n):null}function iI({documentId:e}){let{data:t}=(0,x.K0D)(),n=(0,x._T7)(),i=(0,x._Sr)(e)??"",l=(0,d.useMemo)(()=>t.find(e=>e._id.includes(i)),[t,i]),{t:a}=(0,x.Bdt)(),{data:c}=(0,x.gn8)({documentId:e}),u=(0,d.useMemo)(()=>t.filter(e=>c.find(t=>{let n=(0,x._Sr)(t)??"";return(0,x._hI)(e._id)===n})).map(e=>e.metadata.title||a("release.placeholder-untitled-release")),[t,c,a]),p=l&&(0,x.Y73)(l),{t:m}=(0,x.Bdt)(C.structureLocaleNamespace),h=(0,d.useCallback)(async()=>{n(i)},[i,n]);return(0,s.jsx)(n4,{tone:p,paddingY:0,"data-testid":"open-release-to-edit-banner",content:(0,s.jsxs)(o.so,{direction:"row",align:"center",justify:"space-between",flex:1,children:[(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(o.so,{direction:"row",gap:1,children:u.length>1?(0,s.jsx)(x.HTc,{t:m,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,s.jsxs)(x.RwK,{children:[" ",u[0]]})},values:{count:u.length-1}}):(0,s.jsx)(x.HTc,{t:m,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,s.jsxs)(x.RwK,{children:[" ",u[0]]})}})})}),(0,s.jsx)(r.$n,{text:m("banners.release.action.open-to-edit"),tone:p,onClick:h})]})})}function iS(e){let t,n,i,r,a,d;let c=(0,l.c)(13),{currentRelease:p}=e,m=p??x.k0f;c[0]!==m?(t=(0,x.Y73)(m),c[0]=m,c[1]=t):t=c[1];let h=t,{t:f}=(0,x.Bdt)();return c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(u.XAi,{}),c[2]=n):n=c[2],c[3]!==p?(i=(0,x.drb)(p),c[3]=p,c[4]=i):i=c[4],c[5]!==i?(r={date:i},c[5]=i,c[6]=r):r=c[6],c[7]!==r||c[8]!==f?(a=(0,s.jsx)(o.so,{align:"center",justify:"space-between",gap:1,flex:1,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsxs)(o.so,{align:"center",justify:"center",gap:2,children:[n," ",(0,s.jsx)(x.HTc,{t:f,i18nKey:"release.banner.scheduled-for-publishing-on",values:r})]})})}),c[7]=r,c[8]=f,c[9]=a):a=c[9],c[10]!==a||c[11]!==h?(d=(0,s.jsx)(n4,{tone:h,paddingY:0,content:a}),c[10]=a,c[11]=h,c[12]=d):d=c[12],d}function iE(){let e=(0,l.c)(13),{value:t}=nk(),{selectedPerspective:n}=(0,x.QO2)(),i=(0,x.YW1)(t),{t:r}=(0,x.Bdt)(eB),{t:a}=(0,x.Bdt)();if((0,x.Jrl)(n)&&i){let t,i,l,d,c;e[0]!==n.metadata?.title||e[1]!==a?(t=n.metadata?.title||a("release.placeholder-untitled-release"),e[0]=n.metadata?.title,e[1]=a,e[2]=t):t=e[2];let p=t;return e[3]!==p?(i={title:p},e[3]=p,e[4]=i):i=e[4],e[5]!==n?(l=(0,x.bSq)(n),e[5]=n,e[6]=l):l=e[6],e[7]!==l?(d={VersionBadge:l},e[7]=l,e[8]=d):d=e[8],e[9]!==r||e[10]!==i||e[11]!==d?(c=(0,s.jsx)(n4,{tone:"critical",content:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{t:r,i18nKey:"banners.unpublished-release-banner.text",values:i,components:d})}),icon:u.wvk}),e[9]=r,e[10]=i,e[11]=d,e[12]=c):c=e[12],c}return null}let ik=(0,I.I4)(o.BJ)`
  ${({theme:e})=>(0,I.AH)`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,iT=e=>{let t,n,i,r;let a=(0,l.c)(13),{documentId:d,schemaType:c,title:u}=e,p=d===c.name,{t:m}=(0,eg.Bd)(eB);if(!1===c.__experimental_formPreviewTitle)return null;a[0]!==p||a[1]!==c.name||a[2]!==c.title?(t=!p&&(0,s.jsx)(o.EY,{muted:!0,size:1,children:c.title??c.name}),a[0]=p,a[1]=c.name,a[2]=c.title,a[3]=t):t=a[3];let h=!u;return a[4]!==m||a[5]!==u?(n=u??m("document-view.form-view.form-title-fallback"),a[4]=m,a[5]=u,a[6]=n):n=a[6],a[7]!==h||a[8]!==n?(i=(0,s.jsx)(o.DZ,{as:"h2","data-heading":!0,muted:h,"data-testid":"document-panel-document-title",children:n}),a[7]=h,a[8]=n,a[9]=i):i=a[9],a[10]!==t||a[11]!==i?(r=(0,s.jsxs)(ik,{marginBottom:6,space:4,children:[t,i]}),a[10]=t,a[11]=i,a[12]=r):r=a[12],r},iC=e=>e.preventDefault(),iD=(0,d.forwardRef)(function(e,t){let n,i,r,c,u,p,m,h,f,g,y,b,j,v,_;let w=(0,l.c)(73),{hidden:I,margins:S}=e,{collapsedFieldSets:E,collapsedPaths:k,displayed:T,editState:C,documentId:D,documentType:R,fieldActions:z,onChange:P,validation:A,ready:M,formState:$,onFocus:L,connectionState:B,onBlur:O,onSetCollapsedPath:H,onPathOpen:N,onSetCollapsedFieldSet:Y,onSetActiveFieldGroup:V,openPath:U}=nk(),{selectedReleaseId:F}=(0,x.QO2)(),W=(0,x.q3J)(),K=(0,x.cVB)(D),{title:Q}=nO(),[q]=(0,d.useState)(iR),J=C?.transactionSyncLock?.enabled,{t:Z}=(0,x.Bdt)(eB);w[0]!==Z?(n=Z("document-view.form-view.sync-lock-toast.title"),w[0]=Z,w[1]=n):n=w[1],w[2]!==Z?(i=Z("document-view.form-view.sync-lock-toast.description"),w[2]=Z,w[3]=i):i=w[3],w[4]!==J||w[5]!==n||w[6]!==i?(r={id:"sync-lock",status:"warning",enabled:J,title:n,description:i,closable:!0},w[4]=J,w[5]=n,w[6]=i,w[7]=r):r=w[7],ig(r),w[8]!==D||w[9]!==W.pair||w[10]!==R||w[11]!==q||w[12]!==F?(c=()=>{let e=W.pair.documentEvents(D,R,F).pipe((0,et.M)(e=>{"mutation"===e.type&&q.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,x.i6N)(e.origin,t)}}(e)),"rebase"===e.type&&q.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,x.i6N)("remote",t).concat((0,x.i6N)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},w[8]=D,w[9]=W.pair,w[10]=R,w[11]=q,w[12]=F,w[13]=c):c=w[13],w[14]!==D||w[15]!==W||w[16]!==R||w[17]!==q||w[18]!==F?(u=[D,W,R,q,F],w[14]=D,w[15]=W,w[16]=R,w[17]=q,w[18]=F,w[19]=u):u=w[19],(0,d.useEffect)(c,u);let G=!!T?._rev;w[20]!==q||w[21]!==T?(p=()=>{q.publish({type:"mutation",patches:[],snapshot:T})},w[20]=q,w[21]=T,w[22]=p):p=w[22];let X=(0,eE.J)(p);w[23]!==X||w[24]!==G?(m=()=>{G&&X()},w[23]=X,w[24]=G,w[25]=m):m=w[25],w[26]!==G?(h=[G],w[26]=G,w[27]=h):h=w[27],(0,d.useEffect)(m,h);let[ee,en]=(0,d.useState)(null),[ei,er]=(0,d.useState)(!1);w[28]!==ei||w[29]!==ee||w[30]!==$?.focusPath.length||w[31]!==M?(f=()=>{!ei&&M&&!$?.focusPath.length&&ee&&(er(!0),(0,a.s5)(ee))},w[28]=ei,w[29]=ee,w[30]=$?.focusPath.length,w[31]=M,w[32]=f):f=w[32];let es=$?.focusPath.length;w[33]!==ei||w[34]!==ee||w[35]!==M||w[36]!==es?(g=[ei,ee,es,M],w[33]=ei,w[34]=ee,w[35]=M,w[36]=es,w[37]=g):g=w[37],(0,d.useEffect)(f,g),w[38]!==t?(y=e=>{en(e),"function"==typeof t?t(e):t&&(t.current=e)},w[38]=t,w[39]=y):y=w[39];let el=y;return w[40]!==E||w[41]!==k||w[42]!==B||w[43]!==D||w[44]!==C?.draft||w[45]!==C?.published||w[46]!==C?.ready||w[47]!==z||w[48]!==$||w[49]!==I||w[50]!==O||w[51]!==P||w[52]!==L||w[53]!==N||w[54]!==V||w[55]!==Y||w[56]!==H||w[57]!==U||w[58]!==q||w[59]!==K||w[60]!==Z||w[61]!==Q||w[62]!==A?(b="connecting"!==B||C?.draft||C?.published?null===$||I?(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(o.EY,{children:Z("document-view.form-view.form-hidden")})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iT,{documentId:D,schemaType:$.schemaType,title:Q}),(0,s.jsx)(x.okx,{__internal_fieldActions:z,__internal_patchChannel:q,changed:$.changed,collapsedFieldSets:E,collapsedPaths:k,focused:$.focused,focusPath:$.focusPath,groups:$.groups,id:"root",members:$.members,onChange:P,onFieldGroupSelect:V,onPathBlur:O,onPathFocus:L,onPathOpen:N,onSetFieldSetCollapsed:Y,onSetPathCollapsed:H,openPath:U,presence:K,readOnly:"reconnecting"===B||$.readOnly||!C?.ready,schemaType:$.schemaType,validation:A,value:$.value})]}):(0,s.jsx)(ts,{ms:300,children:(0,s.jsxs)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,s.jsx)(o.y$,{muted:!0}),(0,s.jsx)(o.az,{marginTop:3,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,size:1,children:Z("document-view.form-view.loading")})})]})}),w[40]=E,w[41]=k,w[42]=B,w[43]=D,w[44]=C?.draft,w[45]=C?.published,w[46]=C?.ready,w[47]=z,w[48]=$,w[49]=I,w[50]=O,w[51]=P,w[52]=L,w[53]=N,w[54]=V,w[55]=Y,w[56]=H,w[57]=U,w[58]=q,w[59]=K,w[60]=Z,w[61]=Q,w[62]=A,w[63]=b):b=w[63],w[64]!==el||w[65]!==b?(j=(0,s.jsx)(o.az,{as:"form",onSubmit:iC,ref:el,children:b}),w[64]=el,w[65]=b,w[66]=j):j=w[66],w[67]!==S||w[68]!==j?(v=(0,s.jsx)(x.MLZ,{margins:S,children:j}),w[67]=S,w[68]=j,w[69]=v):v=w[69],w[70]!==I||w[71]!==v?(_=(0,s.jsx)(o.mc,{hidden:I,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:v}),w[70]=I,w[71]=v,w[72]=_):_=w[72],_});function iR(){return(0,x.Ijd)()}function iz(e){let t,n,i,r;let o=(0,l.c)(10),{children:a,show:d}=e,c=d?"show":"wait",u=+!!d;return o[0]!==u?(t={opacity:u},o[0]=u,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n={opacity:1},o[2]=n):n=o[2],o[3]!==d?(i=d?{duration:.2}:{delay:1,duration:.2},o[3]=d,o[4]=i):i=o[4],o[5]!==a||o[6]!==c||o[7]!==t||o[8]!==i?(r=(0,s.jsx)(S.P.div,{initial:t,animate:n,transition:i,children:a},c),o[5]=a,o[6]=c,o[7]=t,o[8]=i,o[9]=r):r=o[9],r}function iP(e){let t,n,i,a;let c=(0,l.c)(40),{parentRef:p}=e,{activeViewId:m,paneKey:h,views:f}=nk(),[x,g]=(0,d.useState)(null),y=(0,o.cF)(p),b=(0,o.cF)(x),j=y?.border?.width??0,v=b?.border?.width??0,_=`${h}tabpanel`;if(c[0]!==m||c[1]!==f){let e;c[3]!==m?(e=e=>e.id===m,c[3]=m,c[4]=e):e=c[4],t=f.find(e),c[0]=m,c[1]=f,c[2]=t}else t=c[2];let w=t;if(j<480||v>200){let e,t,n,i,l,a;let d=!!(j+v),p=`${h}tab-menu`;c[5]===Symbol.for("react.memo_cache_sentinel")?(e={placement:"bottom-end",portal:!0},c[5]=e):e=c[5];let x=w?.title??"";if(c[6]!==x?(t=(0,s.jsx)(r.$n,{iconRight:u.D3D,mode:"bleed",text:x}),c[6]=x,c[7]=t):t=c[7],c[8]!==m||c[9]!==h||c[10]!==_||c[11]!==f){let e;c[13]!==m||c[14]!==h||c[15]!==_?(e=(e,t)=>(0,s.jsx)(iA,{icon:e.icon,id:`${h}tab-${e.id}`,isActive:m===e.id,label:e.title,tabPanelId:_,viewId:0===t?null:e.id??null},e.id),c[13]=m,c[14]=h,c[15]=_,c[16]=e):e=c[16],n=f.map(e),c[8]=m,c[9]=h,c[10]=_,c[11]=f,c[12]=n}else n=c[12];return c[17]!==n?(i=(0,s.jsx)(o.W1,{children:n}),c[17]=n,c[18]=i):i=c[18],c[19]!==p||c[20]!==t||c[21]!==i?(l=(0,s.jsx)(r.IU,{id:p,popover:e,button:t,menu:i}),c[19]=p,c[20]=t,c[21]=i,c[22]=l):l=c[22],c[23]!==d||c[24]!==l?(a=(0,s.jsx)(iz,{show:d,children:l}),c[23]=d,c[24]=l,c[25]=a):a=c[25],a}let I=!!v;if(c[26]!==m||c[27]!==h||c[28]!==_||c[29]!==f){let e;c[31]!==m||c[32]!==h||c[33]!==_?(e=(e,t)=>(0,s.jsx)(iM,{icon:e.icon,id:`${h}tab-${e.id}`,isActive:m===e.id,label:e.title,tabPanelId:_,viewId:0===t?null:e.id??null},e.id),c[31]=m,c[32]=h,c[33]=_,c[34]=e):e=c[34],n=f.map(e),c[26]=m,c[27]=h,c[28]=_,c[29]=f,c[30]=n}else n=c[30];return c[35]!==n?(i=(0,s.jsx)(o.wb,{space:1,ref:g,children:n}),c[35]=n,c[36]=i):i=c[36],c[37]!==I||c[38]!==i?(a=(0,s.jsx)(iz,{show:I,children:i}),c[37]=I,c[38]=i,c[39]=a):a=c[39],a}function iA(e){let t,n;let i=(0,l.c)(12),{icon:o,id:a,isActive:d,label:c,tabPanelId:p,viewId:m}=e,{ready:h,editState:f}=nk(),{setView:x}=eX();i[0]!==x||i[1]!==m?(t=()=>x(m),i[0]=x,i[1]=m,i[2]=t):t=i[2];let g=t,y=!h&&!f?.draft&&!f?.published,b=d?u.Nrt:void 0;return i[3]!==g||i[4]!==o||i[5]!==a||i[6]!==d||i[7]!==c||i[8]!==y||i[9]!==b||i[10]!==p?(n=(0,s.jsx)(r.Dr,{"aria-controls":p,disabled:y,icon:o,id:a,text:c,onClick:g,selected:d,pressed:d,iconRight:b}),i[3]=g,i[4]=o,i[5]=a,i[6]=d,i[7]=c,i[8]=y,i[9]=b,i[10]=p,i[11]=n):n=i[11],n}function iM(e){let t,n,i,o,a,d,c,u,p;let m=(0,l.c)(20);m[0]!==e?({icon:t,id:n,isActive:i,label:o,tabPanelId:d,viewId:c,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=o,m[5]=a,m[6]=d,m[7]=c):(t=m[1],n=m[2],i=m[3],o=m[4],a=m[5],d=m[6],c=m[7]);let{ready:h,editState:f}=nk(),{setView:x}=eX();m[8]!==x||m[9]!==c?(u=()=>x(c),m[8]=x,m[9]=c,m[10]=u):u=m[10];let g=u,y=!h&&!f?.draft&&!f?.published;return m[11]!==g||m[12]!==t||m[13]!==n||m[14]!==i||m[15]!==o||m[16]!==a||m[17]!==y||m[18]!==d?(p=(0,s.jsx)(r.oz,{...a,"aria-controls":d,disabled:y,icon:t,id:n,label:o,onClick:g,selected:i}),m[11]=g,m[12]=t,m[13]=n,m[14]=i,m[15]=o,m[16]=a,m[17]=y,m[18]=d,m[19]=p):p=m[19],p}function i$(){let e,t,n;let i=(0,l.c)(22),{connectionState:r,schemaType:o,title:a,value:d}=nk(),c=!!d;i[0]!==d||i[1]!==o||i[2]!==c?(e={enabled:c,schemaType:o,value:d},i[0]=d,i[1]=o,i[2]=c,i[3]=e):e=i[3];let{error:u,value:p}=(0,x.MOl)(e),{t:m}=(0,x.Bdt)(eB);if("connecting"===r&&!c){let e;return i[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(s.Fragment,{}),i[4]=e):e=i[4],e}if(a){let e;return i[5]!==a?(e=(0,s.jsx)(s.Fragment,{children:a}),i[5]=a,i[6]=e):e=i[6],e}if(!d){let e,t;let n=o?.title||o?.name;return i[7]!==m||i[8]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),i[7]=m,i[8]=n,i[9]=e):e=i[9],i[10]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),i[10]=e,i[11]=t):t=i[11],t}if(u){let e,t;return i[12]!==u.message||i[13]!==m?(e=m("panes.document-header-title.error.text",{error:u.message}),i[12]=u.message,i[13]=m,i[14]=e):e=i[14],i[15]!==e?(t=(0,s.jsx)(s.Fragment,{children:e}),i[15]=e,i[16]=t):t=i[16],t}return i[17]!==m||i[18]!==p?.title?(t=p?.title||(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:m("panes.document-header-title.untitled.text")}),i[17]=m,i[18]=p?.title,i[19]=t):t=i[19],i[20]!==t?(n=(0,s.jsx)(s.Fragment,{children:t}),i[20]=t,i[21]=n):n=i[21],n}let iL=(0,d.memo)(function(){let e,t,n,i,o,a,c;let p=(0,l.c)(13),{editState:m,connectionState:h,views:f}=nk(),{features:g}=nP(),{index:y,BackLink:b}=eX(),[j,v]=(0,d.useState)(null),_=f.length>1,{collapsed:w,isLast:I}=tu(),S=I&&!w?-1:0,E=g.backButton&&y>0,{t:k}=(0,x.Bdt)(eB);p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(i$,{}),p[0]=t):t=p[0],e=t,p[1]!==j||p[2]!==_?(i=_&&(0,s.jsx)(iP,{parentRef:j}),p[1]=j,p[2]=_,p[3]=i):i=p[3],n=i,p[4]!==b||p[5]!==E||p[6]!==k?(a=E&&(0,s.jsx)(r.$n,{as:b,"data-as":"a",icon:u.A60,mode:"bleed",tooltipProps:{content:k("pane-header.back-button.text")}}),p[4]=b,p[5]=E,p[6]=k,p[7]=a):a=p[7],o=a;let T="connecting"===h&&!m?.draft&&!m?.published;return p[8]!==o||p[9]!==T||p[10]!==S||p[11]!==n?(c=(0,s.jsx)(tD,{ref:v,loading:T,title:e,tabs:n,tabIndex:S,backButton:o}),p[8]=o,p[9]=T,p[10]=S,p[11]=n,p[12]=c):c=p[12],c}),iB=(0,I.I4)(o.az)({position:"relative"}),iO=(0,I.I4)(x.PaW)(({$disabled:e})=>e?{height:"100%"}:(0,I.AH)`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),iH=function(e){let t,n,i,r,a,c,u,p,m,h,f,g,y,b,j,v;let _=(0,l.c)(82),{footerHeight:w,headerHeight:I,isInspectOpen:S,rootElement:E,setDocumentPanelPortalElement:k,footer:T}=e,{activeViewId:C,displayed:D,documentId:R,editState:z,inspector:P,value:A,views:M,ready:$,schemaType:L,permissions:B,isPermissionsLoading:O}=nk();if(_[0]!==A){let e=(0,x.G_3)(A);t=(0,x.Y07)(e),_[0]=A,_[1]=t}else t=_[1];let H=t,{params:N}=eX(),{collapsed:Y}=eq(),{collapsed:V}=tu(),U=(0,o.WP)(),{features:F}=nP(),[W,K]=(0,d.useState)(null),[Q,q]=(0,d.useState)(null),J=(0,d.useRef)(null),Z=A._createdAt?"update":"create";_[2]!==C||_[3]!==M?(i=M.find(e=>e.id===C)||M[0]||{type:"form"},_[2]=C,_[3]=M,_[4]=i):i=_[4],n=i;let G=F.splitPanes&&W||U.element;e:{let e;if(Y){let e;let t=I||0,n=w?w+2:2;_[5]!==t||_[6]!==n?(e=[t,0,n,0],_[5]=t,_[6]=n,_[7]=e):e=_[7],r=e;break e}_[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],_[8]=e):e=_[8],r=e}let X=r,ee="form"!==n.type;_[9]!==n.component||_[10]!==n.options||_[11]!==n.type||_[12]!==D||_[13]!==R||_[14]!==z?.draft||_[15]!==z?.published||_[16]!==L||_[17]!==A?(a=()=>{if("component"===n.type&&n.component){let e=n.component;return(0,s.jsx)(e,{document:{draft:z?.draft||null,displayed:D||A,historical:D,published:z?.published||null},documentId:R,options:n.options,schemaType:L})}return!1},_[9]=n.component,_[10]=n.options,_[11]=n.type,_[12]=D,_[13]=R,_[14]=z?.draft,_[15]=z?.published,_[16]=L,_[17]=A,_[18]=a):a=_[18],_[19]!==a?(c=a(),_[19]=a,_[20]=c):c=_[20];let et=c,en=nY(L);_[21]!==Q?(u=()=>{Q?.scrollTo&&Q.scrollTo(0,0)},_[21]=Q,_[22]=u):u=_[22],_[23]!==R||_[24]!==Q?(p=[R,Q],_[23]=R,_[24]=Q,_[25]=p):p=_[25],(0,d.useEffect)(u,p),_[26]!==G||_[27]!==k?(m=()=>{G&&k(G)},h=[G,k],_[26]=G,_[27]=k,_[28]=m,_[29]=h):(m=_[28],h=_[29]),(0,d.useEffect)(m,h),_[30]!==D||_[31]!==S||_[32]!==A?(g=S?(0,s.jsx)(n3,{value:D||A}):null,_[30]=D,_[31]=S,_[32]=A,_[33]=g):g=_[33],f=g;let ei=!!(!V&&P),{selectedPerspective:er,selectedReleaseId:es}=(0,x.QO2)();t:{let e,t,i,r,l,o,a,d,c;if(N?.historyVersion){let e;_[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(ib,{}),_[34]=e):e=_[34],y=e;break t}if((0,x.Jrl)(er)&&(0,x.KJ$)(er)){let e;_[35]!==er?(e=(0,s.jsx)(iS,{currentRelease:er}),_[35]=er,_[36]=e):e=_[36],y=e;break t}_[37]!==er?(e=(0,x.sBy)(er),_[37]=er,_[38]=e):e=_[38];let u=e;if(D?._id&&(0,x._Sr)(D._id)!==es&&$&&!u){let e;let t=D||void 0;_[39]!==er||_[40]!==t||_[41]!==A._id?(e=(0,s.jsx)(iy,{documentId:A._id,currentRelease:er,value:t}),_[39]=er,_[40]=t,_[41]=A._id,_[42]=e):e=_[42],y=e;break t}if("form"===n.type&&en&&$&&z?.draft?._id&&!es){let e;_[43]!==D||_[44]!==R||_[45]!==L?(e=(0,s.jsx)(i_,{displayed:D,documentId:R,schemaType:L}),_[43]=D,_[44]=R,_[45]=L,_[46]=e):e=_[46],y=e;break t}if("form"!==n.type||O||!$){y=null;break t}_[47]!==H?(t=H&&(0,s.jsx)(ij,{}),_[47]=H,_[48]=t):t=_[48],_[49]!==B?.granted||_[50]!==Z?(i=!B?.granted&&(0,s.jsx)(ip,{requiredPermission:Z}),_[49]=B?.granted,_[50]=Z,_[51]=i):i=_[51],_[52]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(ix,{}),l=(0,s.jsx)(n8,{}),o=(0,s.jsx)(n5,{}),a=(0,s.jsx)(iE,{}),_[52]=r,_[53]=l,_[54]=o,_[55]=a):(r=_[52],l=_[53],o=_[54],a=_[55]);let p=D?._id??R;_[56]!==u||_[57]!==p?(d=(0,s.jsx)(iw,{documentId:p,isPinnedDraftOrPublished:u}),_[56]=u,_[57]=p,_[58]=d):d=_[58],_[59]!==t||_[60]!==i||_[61]!==d?(c=(0,s.jsxs)(s.Fragment,{children:[t,i,r,l,o,a,d]}),_[59]=t,_[60]=i,_[61]=d,_[62]=c):c=_[62],y=c}let el=y,eo=F.resizablePanes||!ei;return _[63]!==et||_[64]!==el||_[65]!==Q||_[66]!==T||_[67]!==ee||_[68]!==f||_[69]!==Y||_[70]!==X||_[71]!==G||_[72]!==eo?(b=eo&&(0,s.jsxs)(o.so,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,s.jsxs)(x.wG1,{zOffset:"paneHeader",children:[el,(0,s.jsx)(iL,{})]}),(0,s.jsx)(iB,{flex:2,overflow:"hidden",children:(0,s.jsx)(o.GD,{element:G,__unstable_elements:{documentScrollElement:Q},children:(0,s.jsx)(o.EZ,{element:Q,children:(0,s.jsxs)(x.jsZ,{scrollElement:Q,containerElement:J,children:[(0,s.jsxs)(iO,{$disabled:Y||!1,"data-testid":"document-panel-scroller",ref:q,children:[(0,s.jsx)(iD,{hidden:ee,margins:X,ref:J}),et]}),f,(0,s.jsx)("div",{"data-testid":"document-panel-portal",ref:K})]})})})}),T]}),_[63]=et,_[64]=el,_[65]=Q,_[66]=T,_[67]=ee,_[68]=f,_[69]=Y,_[70]=X,_[71]=G,_[72]=eo,_[73]=b):b=_[73],_[74]!==R||_[75]!==E||_[76]!==L||_[77]!==ei?(j=ei&&(0,s.jsx)(o.EZ,{element:E,children:(0,s.jsx)(nF,{documentId:R,documentType:L.name,flex:1})}),_[74]=R,_[75]=E,_[76]=L,_[77]=ei,_[78]=j):j=_[78],_[79]!==b||_[80]!==j?(v=(0,s.jsx)(tp,{children:(0,s.jsxs)(o.so,{height:"fill",children:[b,j]})}),_[79]=b,_[80]=j,_[81]=v):v=_[81],v};iH.displayName="DocumentPanel";let iN=!1,iY=Object.freeze({}),iV=Symbol("LOADING_PANE"),iU="documentPanelPortalElement",iF=["left","bottom"],iW={small:0,medium:1,large:2,full:"auto"};function iK(e){let t,n;let i=(0,l.c)(5),{dialog:r,referenceElement:a}=e;return i[0]!==r?(t=(0,s.jsx)(iQ,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,s.jsx)(o.AM,{content:t,fallbackPlacements:iF,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:a}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}function iQ(e){let t,n,i,r,a,c,u,p,m,h,f;let g=(0,l.c)(29),{dialog:y}=e,{cancelButtonIcon:b,cancelButtonText:j,confirmButtonIcon:v,confirmButtonText:_,message:w,onCancel:I,onConfirm:S,tone:E}=y,{t:k}=(0,x.Bdt)(eB),{isTopLayer:T}=(0,o.Z4)(),C=(0,d.useRef)(null);return g[0]!==T||g[1]!==I?(t=e=>{"Escape"===e.key&&T&&I()},g[0]=T,g[1]=I,g[2]=t):t=g[2],(0,o.Pm)(t),g[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[C.current],g[3]=n):n=g[3],(0,o.PR)(T&&I,n),g[4]===Symbol.for("react.memo_cache_sentinel")?(i={minWidth:304,maxWidth:400},g[4]=i):i=g[4],g[5]!==w?(r=(0,s.jsx)(o.az,{flex:1,overflow:"auto",padding:4,children:(0,s.jsx)(o.EY,{children:w})}),g[5]=w,g[6]=r):r=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(a={borderTop:"1px solid var(--card-border-color)"},g[7]=a):a=g[7],g[8]!==j||g[9]!==k?(c=j||k("confirm-dialog.cancel-button.fallback-text"),g[8]=j,g[9]=k,g[10]=c):c=g[10],g[11]!==b||g[12]!==I||g[13]!==c?(u=(0,s.jsx)(o.$n,{"data-testid":"confirm-dialog-cancel-button",icon:b,onClick:I,mode:"ghost",text:c}),g[11]=b,g[12]=I,g[13]=c,g[14]=u):u=g[14],g[15]!==_||g[16]!==k?(p=_||k("confirm-dialog.confirm-button.fallback-text"),g[15]=_,g[16]=k,g[17]=p):p=g[17],g[18]!==v||g[19]!==S||g[20]!==p||g[21]!==E?(m=(0,s.jsx)(o.$n,{"data-testid":"confirm-dialog-confirm-button",icon:v,onClick:S,text:p,tone:E}),g[18]=v,g[19]=S,g[20]=p,g[21]=E,g[22]=m):m=g[22],g[23]!==u||g[24]!==m?(h=(0,s.jsx)(o.az,{paddingX:4,paddingY:3,style:a,children:(0,s.jsxs)(o.xA,{columns:2,gap:2,children:[u,m]})}),g[23]=u,g[24]=m,g[25]=h):h=g[25],g[26]!==r||g[27]!==h?(f=(0,s.jsxs)(o.so,{direction:"column",ref:C,style:i,children:[r,h]}),g[26]=r,g[27]=h,g[28]=f):f=g[28],f}function iq(e){let t,n,i;let r=(0,l.c)(12),{dialog:c}=e,u=(0,d.useId)();r[0]!==c.footer?(t=c.footer&&(0,s.jsx)(o.az,{paddingX:4,paddingY:3,children:c.footer}),r[0]=c.footer,r[1]=t):t=r[1];let p=t,m=!1===c.showCloseButton,h=void 0===c.width?1:iW[c.width];return r[2]!==c.content?(n=(0,s.jsx)(o.az,{padding:4,children:c.content}),r[2]=c.content,r[3]=n):n=r[3],r[4]!==c.header||r[5]!==c.onClose||r[6]!==u||r[7]!==p||r[8]!==m||r[9]!==h||r[10]!==n?(i=(0,s.jsx)(x.wG1,{zOffset:"fullscreen",children:(0,s.jsx)(a.lG,{animate:!0,__unstable_hideCloseButton:m,footer:p,header:c.header,id:u,onClose:c.onClose,onClickOutside:c.onClose,width:h,children:n})}),r[4]=c.header,r[5]=c.onClose,r[6]=u,r[7]=p,r[8]=m,r[9]=h,r[10]=n,r[11]=i):i=r[11],i}function iJ(e){let t,n;let i=(0,l.c)(5),{dialog:r,referenceElement:a}=e;return i[0]!==r?(t=(0,s.jsx)(iZ,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,s.jsx)(o.AM,{content:t,fallbackPlacements:iF,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:a}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}function iZ(e){let t,n,i;let r=(0,l.c)(6),{dialog:a}=e,{content:c,onClose:u}=a,{isTopLayer:p}=(0,o.Z4)(),m=(0,d.useRef)(null);return r[0]!==p||r[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},r[0]=p,r[1]=u,r[2]=t):t=r[2],(0,o.Pm)(t),r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],r[3]=n):n=r[3],(0,o.PR)(p&&u,n),r[4]!==c?(i=(0,s.jsx)("div",{ref:m,children:c}),r[4]=c,r[5]=i):i=r[5],i}function iG(e){let t;let n=(0,l.c)(3),{children:i}=e,{element:r,elements:a}=(0,o.WP)(),d=a?.[iU]||r;return n[0]!==i||n[1]!==d?(t=(0,s.jsx)(o.GD,{element:d,children:i}),n[0]=i,n[1]=d,n[2]=t):t=n[2],t}function iX(e){let t,n;let i=(0,l.c)(17),{dialog:a,referenceElement:c}=e,u=void 0===c?null:c,p=(0,d.useId)();if("confirm"===a.type){let e;return i[0]!==a||i[1]!==u?(e=(0,s.jsx)(iK,{dialog:a,referenceElement:u}),i[0]=a,i[1]=u,i[2]=e):e=i[2],e}if("popover"===a.type){let e;return i[3]!==a||i[4]!==u?(e=(0,s.jsx)(iJ,{dialog:a,referenceElement:u}),i[3]=a,i[4]=u,i[5]=e):e=i[5],e}if("dialog"===a.type||!a.type){let e;return i[6]!==a?(e=(0,s.jsx)(iG,{children:(0,s.jsx)(iq,{dialog:a})}),i[6]=a,i[7]=e):e=i[7],e}if("custom"===a.type){let e;let t=a?.component;return i[8]!==t?(e=(0,s.jsx)(iG,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${a.type}`),i[10]!==a.content||i[11]!==a.type?(t=a.content||(0,s.jsxs)(o.EY,{size:1,children:["Unexpected modal type (",(0,s.jsx)("code",{children:a.type}),")"]}),i[10]=a.content,i[11]=a.type,i[12]=t):t=i[12],i[13]!==p||i[14]!==t||i[15]!==a.onClose?(n=(0,s.jsx)(r.lG,{id:p,onClose:a.onClose,onClickOutside:a.onClose,width:1,children:t}),i[13]=p,i[14]=t,i[15]=a.onClose,i[16]=n):n=i[16],n}let i0=(0,d.memo)(function(e){let t,n,i,r,o,a;let c=(0,l.c)(9),{actionStates:u,children:p,referenceElement:m}=e,[h,f]=(0,d.useState)(-1);t=u[h],c[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{f(e)},c[0]=n):n=c[0];let g=n;return c[1]!==p?(r=p({handleAction:g}),c[1]=p,c[2]=r):r=c[2],i=r,c[3]!==t||c[4]!==m?(o=t&&t.dialog&&(0,s.jsx)(x.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(iX,{dialog:t.dialog,referenceElement:m})}),c[3]=t,c[4]=m,c[5]=o):o=c[5],c[6]!==i||c[7]!==o?(a=(0,s.jsxs)(s.Fragment,{children:[o,i]}),c[6]=i,c[7]=o,c[8]=a):a=c[8],a});function i1(e){let t,n,i,a;let c=(0,l.c)(10),{actionStates:u,disabled:p}=e,m=(0,d.useId)(),[h,f]=(0,d.useState)(null);c[0]===Symbol.for("react.memo_cache_sentinel")?(n={placement:"top-end",portal:!0,preventOverflow:!0},c[0]=n):n=c[0],t=n;let{t:g}=(0,x.Bdt)(eB);c[1]!==u||c[2]!==p||c[3]!==m||c[4]!==g?(i=e=>{let{handleAction:n}=e;return(0,s.jsx)(r.IU,{id:`${m}-action-menu`,button:(0,s.jsx)(x.VJU,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:p,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,s.jsx)(o.W1,{padding:1,children:u.map((e,t)=>(0,s.jsx)(i2,{actionState:e,disabled:p,index:t,onAction:n},t))}),popover:t,ref:f})},c[1]=u,c[2]=p,c[3]=m,c[4]=g,c[5]=i):i=c[5];let y=i;return c[6]!==u||c[7]!==h||c[8]!==y?(a=(0,s.jsx)(i0,{actionStates:u,referenceElement:h,children:y}),c[6]=u,c[7]=h,c[8]=y,c[9]=a):a=c[9],a}function i2(e){let t,n,i,o,a;let d=(0,l.c)(18),{actionState:c,disabled:u,index:p,onAction:m}=e,{onHandle:h}=c;d[0]!==p||d[1]!==m||d[2]!==h?(t=()=>{m(p),h&&h()},d[0]=p,d[1]=m,d[2]=h,d[3]=t):t=d[3];let f=t;d[4]!==c.shortcut?(i=c.shortcut?String(c.shortcut).split("+").map(i3):void 0,d[4]=c.shortcut,d[5]=i):i=d[5],n=i;let x=`action-${c.label.replace(" ","")}`,g=u||!!c.disabled;return d[6]!==c.disabled||d[7]!==c.title?(o=c.disabled&&{tooltipProps:{content:c.title}},d[6]=c.disabled,d[7]=c.title,d[8]=o):o=d[8],d[9]!==c.icon||d[10]!==c.label||d[11]!==c.tone||d[12]!==f||d[13]!==n||d[14]!==x||d[15]!==g||d[16]!==o?(a=(0,s.jsx)(r.Dr,{"data-testid":x,disabled:g,hotkeys:n,icon:c.icon,onClick:f,text:c.label,tone:c.tone,...o}),d[9]=c.icon,d[10]=c.label,d[11]=c.tone,d[12]=f,d[13]=n,d[14]=x,d[15]=g,d[16]=o,d[17]=a):a=d[17],a}function i3(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let i4={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},i5=e=>{let t,n,i,r,o;let a=(0,l.c)(36),{id:c,type:p,draft:m,onComplete:h,release:f}=e,{setIsDeleting:g}=nk(),{delete:y}=(0,x.QSs)(c,p,f),[b,j]=(0,d.useState)(!1),[v,_]=(0,d.useState)(!1),{t:w}=(0,x.Bdt)(eB);a[0]!==h?(t=()=>{_(!1),h()},a[0]=h,a[1]=t):t=a[1];let I=t;a[2]!==y||a[3]!==h||a[4]!==g?(n=()=>{j(!0),_(!1),g(!0),y.execute(),h()},a[2]=y,a[3]=h,a[4]=g,a[5]=n):n=a[5];let S=n;a[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{_(!0)},a[6]=i):i=a[6];let E=i;a[7]!==c||a[8]!==f||a[9]!==p?(r={id:c,type:p,version:f,permission:"delete"},a[7]=c,a[8]=f,a[9]=p,a[10]=r):r=a[10];let[k,T]=(0,x.LyQ)(r),C=(0,x.iZK)();e:{let e,t,n,i;if(!T&&!k?.granted){let e,t,n;a[11]!==w?(e=w("action.delete.label"),a[11]=w,a[12]=e):e=a[12],a[13]!==C?(t=(0,s.jsx)(x.TLO,{context:"delete-document",currentUser:C}),a[13]=C,a[14]=t):t=a[14],a[15]!==e||a[16]!==t?(n={tone:"critical",icon:u.ucK,disabled:!0,label:e,title:t},a[15]=e,a[16]=t,a[17]=n):n=a[17],o=n;break e}let r=b||!!y.disabled||T;a[18]!==y.disabled||a[19]!==w?(e=y.disabled&&w(i4[y.disabled])||"",a[18]=y.disabled,a[19]=w,a[20]=e):e=a[20],a[21]!==b||a[22]!==w?(t=w(b?"action.delete.running.label":"action.delete.label"),a[21]=b,a[22]=w,a[23]=t):t=a[23],a[24]!==m?._id||a[25]!==I||a[26]!==S||a[27]!==c||a[28]!==v||a[29]!==p?(n=v&&{type:"custom",component:(0,s.jsx)(tr,{action:"delete",id:m?._id||c,type:p,onCancel:I,onConfirm:S})},a[24]=m?._id,a[25]=I,a[26]=S,a[27]=c,a[28]=v,a[29]=p,a[30]=n):n=a[30],a[31]!==r||a[32]!==e||a[33]!==t||a[34]!==n?(i={tone:"critical",icon:u.ucK,disabled:r,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:E,dialog:n},a[31]=r,a[32]=e,a[33]=t,a[34]=n,a[35]=i):i=a[35],o=i}return o};i5.action="delete",i5.displayName="DeleteAction";let i6={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},i7=({id:e,type:t,published:n,liveEdit:i,onComplete:r,release:l})=>{let{discardChanges:o}=(0,x.QSs)(e,t,l),[a,c]=(0,d.useState)(!1),[p,m]=(0,x.LyQ)({id:e,type:t,version:l,permission:"discardDraft"}),h=(0,x.iZK)(),{displayed:f}=nk(),{t:g}=(0,x.Bdt)(eB),y=f?._id&&(0,x._4P)(f?._id),b=(0,d.useCallback)(()=>{o.execute(),r()},[o,r]),j=(0,d.useCallback)(()=>{c(!0)},[]),v=(0,d.useMemo)(()=>a&&{type:"confirm",tone:"critical",onCancel:r,onConfirm:b,message:g("action.discard-changes.confirm-dialog.confirm-discard-changes")},[b,a,r,g]);return(0,d.useMemo)(()=>!n||i||y?null:m||p?.granted?{tone:"critical",icon:u.NAP,disabled:!!o.disabled||m,title:g(o.disabled&&i6[o.disabled]||""),label:g("action.discard-changes.label"),onHandle:j,dialog:v}:{tone:"critical",icon:u.NAP,disabled:!0,label:g("action.discard-changes.label"),title:(0,s.jsx)(x.TLO,{context:"discard-changes",currentUser:h})},[h,v,o.disabled,j,m,y,i,p?.granted,n,g])};i7.action="discardChanges",i7.displayName="DiscardChangesAction";let i8={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},i9=({id:e,type:t,onComplete:n,release:i})=>{let r=(0,x.q3J)(),{duplicate:l}=(0,x.QSs)(e,t,i),{navigateIntent:o}=(0,T.rd)(),[a,c]=(0,d.useState)(!1),[p,m]=(0,x.LyQ)({id:e,type:t,version:i,permission:"duplicate"}),{t:h}=(0,x.Bdt)(eB),f=(0,x.iZK)(),g=(0,d.useCallback)(async()=>{let i=(0,w.A)();c(!0);let s=(0,U._)(r.pair.operationEvents(e,t).pipe((0,B.p)(e=>"duplicate"===e.op&&"success"===e.type)));l.execute(i),await s,o("edit",{id:i,type:t}),n()},[r.pair,l,e,o,n,t]);return(0,d.useMemo)(()=>m||p?.granted?{icon:u.TdU,disabled:a||!!l.disabled||m,label:h(a?"action.duplicate.running.label":"action.duplicate.label"),title:l.disabled?h(i8[l.disabled]):"",onHandle:g}:{icon:u.TdU,disabled:!0,label:h("action.duplicate.label"),title:(0,s.jsx)(x.TLO,{context:"duplicate-document",currentUser:f})},[f,l.disabled,g,a,m,p?.granted,h])};i9.action="duplicate",i9.displayName="DuplicateAction";let re=e=>{let t,n,i,r,s,o;let a=(0,l.c)(27),{id:c,type:p,revision:m,onComplete:h,release:f}=e,{restore:g}=(0,x.QSs)(c,p,f),y=(0,x.cUp)(c,p),{navigateIntent:b}=(0,T.rd)(),j=(0,d.useRef)(y),[v,_]=(0,d.useState)(!1),{t:w}=(0,x.Bdt)(eB);a[0]!==h||a[1]!==g||a[2]!==m?(t=()=>{g.execute(m),h()},a[0]=h,a[1]=g,a[2]=m,a[3]=t):t=a[3];let I=t;a[4]!==y||a[5]!==c||a[6]!==b||a[7]!==p?(n=()=>{y&&y!==j.current&&("success"===y.type&&"restore"===y.op&&b("edit",{id:c,type:p}),j.current=y)},i=[y,c,b,p],a[4]=y,a[5]=c,a[6]=b,a[7]=p,a[8]=n,a[9]=i):(n=a[8],i=a[9]),(0,d.useEffect)(n,i),a[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{_(!0)},a[10]=r):r=a[10];let S=r;e:{if(v){let e,t;a[11]!==w?(e=w("action.restore.confirm.message"),a[11]=w,a[12]=e):e=a[12],a[13]!==I||a[14]!==h||a[15]!==e?(t={type:"confirm",tone:"critical",onCancel:h,onConfirm:I,message:e},a[13]=I,a[14]=h,a[15]=e,a[16]=t):t=a[16],s=t;break e}s=null}let E=s,k="@initial"===m,C=void 0===m;t:{let e,t,n;if(C){o=null;break t}a[17]!==w?(e=w("action.restore.label"),a[17]=w,a[18]=e):e=a[18];let i=k?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";a[19]!==w||a[20]!==i?(t=w(i),a[19]=w,a[20]=i,a[21]=t):t=a[21],a[22]!==E||a[23]!==k||a[24]!==e||a[25]!==t?(n={label:e,tone:"caution",onHandle:S,title:t,icon:u.AAk,dialog:E,disabled:k},a[22]=E,a[23]=k,a[24]=e,a[25]=t,a[26]=n):n=a[26],o=n}return o};re.action="restore",re.displayName="HistoryRestoreAction";let rt=(0,ev.g_)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),rn={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"};function ri(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,s.jsx)(rr,{publishedAt:t}):n(rn[e])}function rr(e){let t,n,i;let r=(0,l.c)(6),{publishedAt:o}=e,{t:a}=(0,x.Bdt)(eB);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},r[0]=t):t=r[0];let d=(0,x.Vq9)(o,t);return r[1]!==a||r[2]!==d?(n=a("action.publish.already-published.tooltip",{timeSincePublished:d}),r[1]=a,r[2]=d,r[3]=n):n=r[3],r[4]!==n?(i=(0,s.jsx)("span",{children:n}),r[4]=n,r[5]=i):i=r[5],i}let rs=e=>{let t,n,i,r,o,a,c,p,m,h,f;let y=(0,l.c)(78),{id:b,type:j,liveEdit:v,draft:_,published:w,release:I}=e,[S,E]=(0,d.useState)(null),{publish:k}=(0,x.QSs)(b,j),T=(0,x.dWw)(b,j),C=(0,x.M7h)(b,j),{changesOpen:D,documentId:R,documentType:z,value:P}=nk(),A=(0,x.zX2)(R,z),{t:M}=(0,x.Bdt)(eB);y[0]!==A?.draft||y[1]!==A?.published?(t=A?.draft||A?.published||{},y[0]=A?.draft,y[1]=A?.published,y[2]=t):t=y[2];let $=t._rev;y[3]!==T.validation?(n=T.validation.some(g.Uw),y[3]=T.validation,y[4]=n):n=y[4];let L=n,[B,O]=(0,d.useState)(!1),H=C.isSyncing,N=T.isValidating;y[5]!==b||y[6]!==j?(i={id:b,type:j,permission:"publish"},y[5]=b,y[6]=j,y[7]=i):i=y[7];let[Y,V]=(0,x.LyQ)(i),U=(0,x.iZK)();y[8]!==L||y[9]!==k.disabled||y[10]!==w||y[11]!==M?(r=k.disabled?ri(k.disabled,(w||{})._updatedAt,M)||"":L?M("action.publish.validation-issues.tooltip"):"",y[8]=L,y[9]=k.disabled,y[10]=w,y[11]=M,y[12]=r):r=y[12];let F=r,W=!!_;y[13]!==k?(o=()=>{k.execute(),E("publishing")},y[13]=k,y[14]=o):o=y[14];let K=o;y[15]!==K||y[16]!==L||y[17]!==H||y[18]!==B||y[19]!==$||y[20]!==T.isValidating||y[21]!==T.revision?(a=()=>{let e=!1===T.isValidating&&T.revision!==$;B&&!H&&e&&(L||K(),O(!1))},y[15]=K,y[16]=L,y[17]=H,y[18]=B,y[19]=$,y[20]=T.isValidating,y[21]=T.revision,y[22]=a):a=y[22],y[23]!==K||y[24]!==L||y[25]!==H||y[26]!==N||y[27]!==B||y[28]!==$||y[29]!==T.isValidating||y[30]!==T.revision?(c=[H,K,L,B,T.revision,$,N,T.isValidating],y[23]=K,y[24]=L,y[25]=H,y[26]=N,y[27]=B,y[28]=$,y[29]=T.isValidating,y[30]=T.revision,y[31]=c):c=y[31],(0,d.useEffect)(a,c),y[32]!==W||y[33]!==S?(p=()=>{let e="publishing"===S&&!W,t=e?"published":null,n=setTimeout(()=>{E(t)},e?200:4e3);return()=>clearTimeout(n)},y[32]=W,y[33]=S,y[34]=p):p=y[34],y[35]!==D||y[36]!==W||y[37]!==S?(m=[D,S,W],y[35]=D,y[36]=W,y[37]=S,y[38]=m):m=y[38],(0,d.useEffect)(p,m);let Q=(0,ej.Jr)();y[39]!==K||y[40]!==_?._createdAt||y[41]!==w||y[42]!==$||y[43]!==C.isSyncing||y[44]!==Q||y[45]!==T.isValidating||y[46]!==T.revision?(h=()=>{Q.log(rt,{publishedImmediately:!_?._createdAt,previouslyPublished:!!w}),C.isSyncing||T.isValidating||T.revision!==$?O(!0):K()},y[39]=K,y[40]=_?._createdAt,y[41]=w,y[42]=$,y[43]=C.isSyncing,y[44]=Q,y[45]=T.isValidating,y[46]=T.revision,y[47]=h):h=y[47];let q=h;e:{let e,t,n;if(I||v){f=null;break e}if((0,x._4P)(P._id)&&null!==_){let e,t,n;y[48]!==M?(e=M("action.publish.label"),y[48]=M,y[49]=e):e=y[49];let i=w?._updatedAt;y[50]!==M||y[51]!==i?(t=ri("ALREADY_PUBLISHED",i,M),y[50]=M,y[51]=i,y[52]=t):t=y[52],y[53]!==e||y[54]!==t?(n={tone:"default",icon:u.VQ$,label:e,title:t,disabled:!0},y[53]=e,y[54]=t,y[55]=n):n=y[55],f=n;break e}if(!V&&!Y?.granted){let e,t,n;y[56]!==M?(e=M("action.publish.label"),y[56]=M,y[57]=e):e=y[57],y[58]!==U?(t=(0,s.jsx)(x.TLO,{context:"publish-document",currentUser:U}),y[58]=U,y[59]=t):t=y[59],y[60]!==e||y[61]!==t?(n={tone:"default",icon:u.VQ$,label:e,title:t,disabled:!0},y[60]=e,y[61]=t,y[62]=n):n=y[62],f=n;break e}let i=!!(B||A?.transactionSyncLock?.enabled||"publishing"===S||"published"===S||L||k.disabled),r=i||V;y[63]!==B||y[64]!==S||y[65]!==M?(e=M("published"===S?"action.publish.published.label":B||"publishing"===S?"action.publish.running.label":"action.publish.draft.label"),y[63]=B,y[64]=S,y[65]=M,y[66]=e):e=y[66],y[67]!==B||y[68]!==S||y[69]!==M||y[70]!==F?(t=B?M("action.publish.waiting"):"published"===S||"publishing"===S?null:F,y[67]=B,y[68]=S,y[69]=M,y[70]=F,y[71]=t):t=y[71];let l=i||B?null:"Ctrl+Alt+P";y[72]!==q||y[73]!==r||y[74]!==e||y[75]!==t||y[76]!==l?(n={disabled:r,tone:"default",label:e,icon:u.VQ$,title:t,shortcut:l,onHandle:q},y[72]=q,y[73]=r,y[74]=e,y[75]=t,y[76]=l,y[77]=n):n=y[77],f=n}return f};rs.action="publish",rs.displayName="PublishAction";let rl={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},ro=({id:e,type:t,draft:n,onComplete:i,liveEdit:r,release:l})=>{let{unpublish:o}=(0,x.QSs)(e,t),[a,c]=(0,d.useState)(!1),[p,m]=(0,x.LyQ)({id:e,type:t,permission:"unpublish"}),h=(0,x.iZK)(),{displayed:f}=nk(),{t:g}=(0,x.Bdt)(eB),y=f?._id&&(0,x.R8D)(f?._id),b=(0,d.useCallback)(()=>{c(!1),i()},[i]),j=(0,d.useCallback)(()=>{c(!1),o.execute(),i()},[i,o]),v=(0,d.useMemo)(()=>a?{type:"dialog",onClose:i,content:(0,s.jsx)(tr,{id:n?._id||e,type:t,action:"unpublish",onCancel:b,onConfirm:j})}:null,[n,e,b,j,a,i,t]);return(0,d.useMemo)(()=>l||y||r?null:m||p?.granted?{tone:"critical",icon:u.wvk,disabled:!!o.disabled||m,label:g("action.unpublish.label"),title:o.disabled?g(rl[o.disabled]):"",onHandle:()=>c(!0),dialog:v}:{tone:"critical",icon:u.wvk,label:"Unpublish",title:(0,s.jsx)(x.TLO,{context:"unpublish-document",currentUser:h}),disabled:!0},[l,y,r,m,p?.granted,o.disabled,g,v,h])};ro.action="unpublish",ro.displayName="UnpublishAction";let ra=(0,d.memo)(function(e){let t,n,i,a,c,u,p,m,h;let f=(0,l.c)(34),{disabled:g,showMenu:y,states:b}=e,{__internal_tasks:j}=(0,x.For)(),{editState:v}=nk(),{selectedReleaseId:_}=(0,x.QO2)();f[0]!==b?([t,...n]=b,f[0]=b,f[1]=t,f[2]=n):(t=f[1],n=f[2]);let[w,I]=(0,d.useState)(null);e:{let e,n,l,a;if(!t||!t.title&&!t.shortcut){i=null;break e}f[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},f[3]=e):e=f[3],f[4]!==t.title?(n=t.title&&(0,s.jsx)(o.EY,{size:1,children:t.title}),f[4]=t.title,f[5]=n):n=f[5],f[6]!==t.shortcut?(l=t.shortcut&&(0,s.jsx)(r.qW,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(rp)}),f[6]=t.shortcut,f[7]=l):l=f[7],f[8]!==n||f[9]!==l?(a=(0,s.jsxs)(o.so,{style:e,align:"center",gap:3,children:[n,l]}),f[8]=n,f[9]=l,f[10]=a):a=f[10],i=a}let S=i;f[11]!==t||f[12]!==n||f[13]!==_?(c=_?[t,...n]:n,f[11]=t,f[12]=n,f[13]=_,f[14]=c):c=f[14],a=c;let E=t&&!_&&!v?.liveEdit,k=j&&j.footerAction;return f[15]!==E||f[16]!==g||f[17]!==t||f[18]!==S?(u=E&&(0,s.jsx)(o.XS,{zOffset:200,children:(0,s.jsx)(r.m_,{disabled:!S,content:S,placement:"top",children:(0,s.jsx)(o.BJ,{children:(0,s.jsx)(r.$n,{"data-testid":`action-${tm(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:I,text:t.label,tone:t.tone||"primary"})})})}),f[15]=E,f[16]=g,f[17]=t,f[18]=S,f[19]=u):u=f[19],f[20]!==g||f[21]!==n||f[22]!==_||f[23]!==y||f[24]!==a?(p=(y&&n.length>0||_)&&(0,s.jsx)(i1,{actionStates:a,disabled:g}),f[20]=g,f[21]=n,f[22]=_,f[23]=y,f[24]=a,f[25]=p):p=f[25],f[26]!==w||f[27]!==t?(m=t&&t.dialog&&(0,s.jsx)(iX,{dialog:t.dialog,referenceElement:w}),f[26]=w,f[27]=t,f[28]=m):m=f[28],f[29]!==k||f[30]!==u||f[31]!==p||f[32]!==m?(h=(0,s.jsxs)(o.so,{align:"center",gap:1,children:[k,u,p,m]}),f[29]=k,f[30]=u,f[31]=p,f[32]=m,f[33]=h):h=f[33],h}),rd=(0,d.memo)(function(){let e,t,n,i,r;let o=(0,l.c)(12),{actions:a,connectionState:d,documentId:c,editState:u}=nk();o[0]!==a?(t=a??[],o[0]=a,o[1]=t):t=o[1],o[2]!==t?(n=t.filter(rm),o[2]=t,o[3]=n):n=o[3],e=n,o[4]!==e.length||o[5]!==d||o[6]!==c?(i=t=>{let{states:n}=t;return(0,s.jsx)(ra,{disabled:"connected"!==d,showMenu:e.length>1,states:n},c)},o[4]=e.length,o[5]=d,o[6]=c,o[7]=i):i=o[7];let p=i;return 0!==e.length&&u?(o[8]!==e||o[9]!==u||o[10]!==p?(r=(0,s.jsx)(t4,{actions:e,actionProps:u,group:"default",children:p}),o[8]=e,o[9]=u,o[10]=p,o[11]=r):r=o[11],r):null}),rc=(0,d.memo)(function(){let e,t,n,i,r,o,a,d;let c=(0,l.c)(16),{actions:u,connectionState:p,editState:m,revisionId:h}=nk(),f=(m?.draft||m?.published||{})._rev===h;c[0]!==m?(t=m||{},c[0]=m,c[1]=t):t=c[1],c[2]!==h||c[3]!==t?(n={...t,revision:h},c[2]=h,c[3]=t,c[4]=n):n=c[4],e=n,c[5]!==u?(r=u??[],c[5]=u,c[6]=r):r=c[6],c[7]!==r?(o=r.filter(ru).slice(-1),c[7]=r,c[8]=o):o=c[8],i=o,c[9]!==p||c[10]!==f?(a=e=>{let{states:t}=e;return(0,s.jsx)(ra,{disabled:"connected"!==p||!!f,showMenu:!1,states:t})},c[9]=p,c[10]=f,c[11]=a):a=c[11];let x=a;return c[12]!==i||c[13]!==x||c[14]!==e?(d=(0,s.jsx)(t4,{actions:i,actionProps:e,group:"default",children:x}),c[12]=i,c[13]=x,c[14]=e,c[15]=d):d=c[15],d});function ru(e){return e.action===re.action}function rp(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function rm(e){return!ru(e)}let rh=e=>{let t=(0,l.c)(16),{release:n}=e,{t:i}=(0,x.Bdt)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,s.jsx)(o.EY,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,s.jsx)(o.EY,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e;let r="active"===n.state;return t[8]!==r||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,s.jsx)(o.EY,{size:1,children:r?(0,s.jsx)(x.HTc,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,x.drb)(n)}}):(0,s.jsx)(x.HTc,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,x.drb)(n)}})}),t[8]=r,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,s.jsx)(o.EY,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},rf={dateStyle:"medium",timeStyle:"short"},rx=(0,d.memo)(function(){let{selectedReleaseId:e,selectedPerspectiveName:t}=(0,x.QO2)(),{t:n}=(0,x.Bdt)(),i=(0,x._T7)(),{params:r,setParams:l}=(0,C.usePaneRouter)(),a=(0,x.ixk)(rf),{loading:c}=(0,x.K0D)(),u=(0,x.pDY)(),{editState:p,displayed:m,documentType:h,documentId:f}=nk(),g=m&&!m._createdAt,y=nD({displayed:m,documentId:f}),b=(0,x.Jr6)({documentId:f}),j=(0,d.useCallback)(e=>()=>{"published"===e&&r?.historyVersion&&l({...r,rev:r?.historyEvent||void 0,since:void 0,historyVersion:void 0}),i(e)},[i,l,r]),v=u.get(h),_=!!v&&nY(v),w=(0,d.useMemo)(()=>(!_||!!e)&&!p?.published,[_,e,p?.published]),I=(0,d.useCallback)(e=>{if(!r?.historyVersion)return{selected:(0,x._hI)(e._id)===(0,x._Sr)(m?._id||"")};let t=(0,x._hI)(e._id)===r.historyVersion;return{selected:t,disabled:t}},[m?._id,r?.historyVersion]),S=(0,d.useMemo)(()=>!!(_&&!p?.draft?._id&&!e||(0,x._4P)(m?._id||"")&&(0,x.xo4)(t||"")),[m?._id,p?.draft?._id,_,t,e]),E=(0,d.useMemo)(()=>{let e=m?._id||"";return!(S||r?.historyVersion||t||(0,x.A_X)(e))&&(!!(0,x.R8D)(e)||!((0,x._4P)(e)&&p?.published&&(0,x.xo4)(t||"")))},[m?._id,p?.published,S,r?.historyVersion,t]),k=(0,d.useMemo)(()=>!!b||!!g&&!!e||(!!p?.draft||!!_)&&!!(g&&e||_),[p?.draft,g,_,b,e]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.FCT,{tooltipContent:(0,s.jsx)(o.EY,{size:1,children:p?.published&&p?.published?._updatedAt?(0,s.jsx)(x.HTc,{t:n,i18nKey:"release.chip.tooltip.published-date",values:{date:a.format(new Date(p?.published._updatedAt))}}):(0,s.jsx)(s.Fragment,{children:n("release.chip.tooltip.not-published")})}),disabled:w,onClick:j("published"),selected:S,text:n("release.chip.published"),tone:"positive",contextValues:{documentId:p?.published?._id||p?.id||"",menuReleaseId:p?.published?._id||p?.id||"",releases:y.notCurrentReleases,releasesLoading:c,documentType:h,fromRelease:"published",isVersion:!1,disabled:!p?.published}}),(0,s.jsx)(x.FCT,{tooltipContent:(0,s.jsx)(o.EY,{size:1,children:p?.draft?(0,s.jsx)(s.Fragment,{children:p?.draft._updatedAt?(0,s.jsx)(x.HTc,{t:n,i18nKey:"release.chip.tooltip.edited-date",values:{date:a.format(new Date(p?.draft._updatedAt))}}):(0,s.jsx)(x.HTc,{t:n,i18nKey:"release.chip.tooltip.created-date",values:{date:a.format(new Date(p?.draft._createdAt))}})}):(0,s.jsx)(s.Fragment,{children:n(_?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:E,disabled:k,text:n("release.chip.draft"),tone:p?.draft?"caution":"neutral",onClick:j("drafts"),contextValues:{documentId:p?.draft?._id||p?.published?._id||p?.id||"",menuReleaseId:p?.draft?._id||p?.published?._id||p?.id||"",releases:y.notCurrentReleases,releasesLoading:c,documentType:h,fromRelease:"draft",isVersion:!1,disabled:!p?.draft}}),y.inCreation&&(0,s.jsx)(x.FCT,{tooltipContent:(0,s.jsx)(rh,{release:y.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,x.Y73)(y.inCreation),text:y.inCreation.metadata.title||n("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:m?._id||"",menuReleaseId:y.inCreation._id,releases:y.notCurrentReleases,releasesLoading:c,documentType:h,fromRelease:(0,x._hI)(y.inCreation._id),releaseState:y.inCreation.state,isVersion:!0}}),m&&y.currentReleases?.map(e=>s.jsx(x.FCT,{tooltipContent:s.jsx(rh,{release:e}),...I(e),onClick:j(x._hI(e._id)),text:e.metadata.title||n("release.placeholder-untitled-release"),tone:x.Y73(e),locked:x.KJ$(e),contextValues:{documentId:m?._id||"",menuReleaseId:e._id,releases:y.notCurrentReleases,releasesLoading:c,documentType:h,fromRelease:x._hI(e._id),releaseState:e.state,isVersion:!0}},e._id))]})}),rg=(0,I.I4)(o.Zp)(e=>{let t=(0,ek.JW)(e.theme);return(0,I.AH)`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    &::after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      width: ${t.space[3]}px;
      background: linear-gradient(to right, ${(0,eT.B3)(t.color.bg,0)}, var(--card-bg-color));
    }
  `}),ry=(0,d.memo)((0,d.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:l,onMenuAction:a,onPaneClose:c,onPaneSplit:p,menuItemGroups:m,schemaType:h,connectionState:f,views:g,unstable_languageFilter:y}=nk(),{features:b}=nP(),{index:j,BackLink:v,hasGroupSiblings:_}=eX(),{actions:w}=(0,x.vM8)(),[I,S]=(0,d.useState)(null),E=(0,d.useMemo)(()=>(i??[]).filter(e=>!ru(e)),[i]),k=(0,d.useMemo)(()=>tY({actionHandler:a,fieldActions:w,menuItems:n,menuItemGroups:m}),[a,w,m,n]),T=(0,d.useMemo)(()=>k.filter(tH),[k]),C=(0,d.useMemo)(()=>k.filter(tN),[k]),{collapsed:D,isLast:R}=tu(),z=b.splitViews&&p&&g.length>1,P=z&&_,A=b.backButton&&j>0,M=!P&&!A&&!!v,{t:$}=(0,x.Bdt)(eB),L=(0,d.useCallback)(({states:e})=>(0,s.jsx)(rb,{contextMenuNodes:C,setReferenceElement:S,referenceElement:I,states:e}),[C,I]),B=(0,d.useMemo)(()=>(0,s.jsx)(i$,{}),[]),O=(0,d.useMemo)(()=>A&&(0,s.jsx)(r.$n,{as:v,"data-as":"a",icon:u.A60,mode:"bleed",tooltipProps:{content:$("pane-header.back-button.text")}}),[v,A,$]),H=(0,d.useMemo)(()=>(0,s.jsxs)(o.so,{align:"center",gap:1,children:[y.length>0&&(0,s.jsx)(s.Fragment,{children:y.map((e,t)=>(0,s.jsx)(e,{schemaType:h},`language-filter-${t}`))}),T.map(e=>(0,s.jsx)(tz,{node:e},e.key)),l&&(0,s.jsx)(t4,{actions:E,actionProps:l,group:"paneActions",children:L}),z&&(0,s.jsx)(r.$n,{"aria-label":$("buttons.split-pane-button.aria-label"),icon:u.CwM,mode:"bleed",onClick:p,tooltipProps:{content:$("buttons.split-pane-button.tooltip")}},"split-pane-button"),P&&(0,s.jsx)(r.$n,{icon:u.USm,mode:"bleed",onClick:c,tooltipProps:{content:$("buttons.split-pane-close-button.title")}},"close-view-button"),M&&(0,s.jsx)(r.$n,{icon:u.USm,mode:"bleed",tooltipProps:{content:$("buttons.split-pane-close-group-button.title")},as:v},"close-view-button")]}),[v,E,l,T,c,p,L,h,M,z,P,$,y]);return(0,s.jsx)(r.vE,{children:D?(0,s.jsx)(tD,{border:!0,ref:t,loading:"connecting"===f&&!l?.draft&&!l?.published,title:B,tabIndex:R&&!D?-1:0,backButton:O}):(0,s.jsx)(o.Zp,{hidden:D,style:{lineHeight:0},borderBottom:!0,children:(0,s.jsxs)(o.so,{gap:3,paddingY:3,children:[(0,s.jsx)(rg,{children:(0,s.jsx)(o.so,{flex:1,gap:1,overflow:"auto",paddingX:3,children:(0,s.jsx)(rx,{})})}),(0,s.jsx)(o.az,{flex:"none",paddingRight:3,children:H})]})})})})),rb=(0,d.memo)(function(e){let t;let n=(0,l.c)(5),{setReferenceElement:i,referenceElement:r,contextMenuNodes:o}=e,a=(0,d.useDeferredValue)(e.states);return n[0]!==o||n[1]!==r||n[2]!==i||n[3]!==a?(t=(0,s.jsx)(rj,{setReferenceElement:i,referenceElement:r,contextMenuNodes:o,states:a}),n[0]=o,n[1]=r,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}),rj=(0,d.memo)(function(e){let t,n;let i=(0,l.c)(8),{states:r,setReferenceElement:o,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==o||i[2]!==r?(t=e=>{let{handleAction:t}=e;return(0,s.jsx)("div",{ref:o,children:(0,s.jsx)(tv,{nodes:a,actionsNodes:r.length>0?r.map((e,n)=>(0,s.jsx)(i2,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=o,i[2]=r,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==r?(n=(0,s.jsx)(i0,{actionStates:r,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=r,i[7]=n):n=i[7],n});function rv(e){let t,n;let i=(0,l.c)(3),{size:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==o?(n=(0,s.jsx)(r.$n,{"aria-hidden":!0,disabled:!0,size:o,style:t,text:"-"}),i[1]=o,i[2]=n):n=i[2],n}let r_={primary:"primary",success:"positive",warning:"caution",danger:"critical"},rw=(0,d.memo)(function(e){let t,n;let i=(0,l.c)(4),{states:r}=e;return 0===r.length?null:(i[0]!==r?(t=r.map(rk),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,s.jsx)(o.cV,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),rI=(0,d.memo)(function(e){let t;let n=(0,l.c)(2),i=(0,d.useDeferredValue)(e.states);return n[0]!==i?(t=(0,s.jsx)(rw,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function rS(){let e;let t=(0,l.c)(3),{badges:n,editState:i}=nk();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,s.jsx)(t5,{badges:n,badgeProps:i,children:rE}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function rE(e){let{states:t}=e;return(0,s.jsx)(rI,{states:t})}function rk(e,t){return(0,s.jsx)(r.m_,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,s.jsx)(o.Ex,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?r_[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let rT={create:u.REV,delete:u.ucK,discardDraft:u.USm,initial:u.REV,editDraft:u.qUP,editLive:u.qUP,publish:u.VQ$,unpublish:u.wvk},rC=(0,I.I4)(u.YJP)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function rD(e){let t,n,i,o,a;let d=(0,l.c)(14),{isExpanded:c,onExpand:u}=e,{t:p}=(0,x.Bdt)(eB);d[0]!==c||d[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(rW);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(c),u()},d[0]=c,d[1]=u,d[2]=t):t=d[2];let m=t;return d[3]!==c?(n=(0,s.jsx)(rC,{"data-expanded":c}),d[3]=c,d[4]=n):n=d[4],d[5]!==c||d[6]!==p?(i=p(c?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),d[5]=c,d[6]=p,d[7]=i):i=d[7],d[8]!==i?(o={content:i},d[8]=i,d[9]=o):o=d[9],d[10]!==m||d[11]!==n||d[12]!==o?(a=(0,s.jsx)(r.$n,{mode:"bleed",icon:n,tooltipProps:o,onClick:m}),d[10]=m,d[11]=n,d[12]=o,d[13]=a):a=d[13],a}let rR=(0,I.I4)(o.BJ)`
  max-width: 200px;
`,rz=(0,I.I4)(o.so)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,rP=(0,I.I4)(o.az)(({$visible:e})=>(0,I.AH)`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&(0,I.AH)`
      opacity: 1;
      pointer-events: auto;
    `}
  `),rA={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function rM(e){let t,n;let i=(0,l.c)(9),{maxLength:r,userIds:a,size:d,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==a||i[1]!==u){let e;i[3]!==u?(e=e=>(0,s.jsx)(x.H8m,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=a.map(e),i[0]=a,i[1]=u,i[2]=t}else t=i[2];return i[5]!==r||i[6]!==d||i[7]!==t?(n=(0,s.jsx)(o.GE,{maxLength:r,size:d,children:t}),i[5]=r,i[6]=d,i[7]=t,i[8]=n):n=i[8],n}let r$=(0,I.I4)(o.so)(e=>{let t=(0,ek.JW)(e.theme),n=e.$color;return(0,I.AH)`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),rL={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},rB={minimal:!0,useTemporalPhrase:!0},rO=(0,I.I4)(a.EA)(e=>{let t=(0,ek.JW)(e.theme);return(0,I.AH)`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),rH=e=>{let t,n,i;let r=(0,l.c)(10),{userId:a}=e,[d,c]=(0,x.Jd3)(a);return r[0]!==c||r[1]!==d?(t=(0,s.jsx)(o.az,{children:c||!d?(0,s.jsx)(x.LIN,{animated:!0}):(0,s.jsx)(x.H8m,{user:d})}),r[0]=c,r[1]=d,r[2]=t):t=r[2],r[3]!==c||r[4]!==d?(n=(0,s.jsx)(o.az,{children:c||!d?.displayName?(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(rO,{animated:!0})}):(0,s.jsx)(o.EY,{muted:!0,size:1,children:d.displayName})}),r[3]=c,r[4]=d,r[5]=n):n=r[5],r[6]!==t||r[7]!==n||r[8]!==a?(i=(0,s.jsxs)(o.so,{align:"center",gap:2,padding:1,children:[t,n]},a),r[6]=t,r[7]=n,r[8]=a,r[9]=i):i=r[9],i},rN=e=>{let t,n,i,r;let a=(0,l.c)(9),{collaborators:d}=e,{t:c}=(0,x.Bdt)("studio");return a[0]!==c?(t=c("timeline.changes.title"),a[0]=c,a[1]=t):t=a[1],a[2]!==t?(n=(0,s.jsx)(o.az,{padding:1,paddingBottom:2,children:(0,s.jsx)(o.EY,{size:1,weight:"medium",children:t})}),a[2]=t,a[3]=n):n=a[3],a[4]!==d?(i=d.map(rV),a[4]=d,a[5]=i):i=a[5],a[6]!==n||a[7]!==i?(r=(0,s.jsxs)(o.BJ,{paddingBottom:1,children:[n,i]}),a[6]=n,a[7]=i,a[8]=r):r=a[8],r};function rY(e){let t,n,i,a,d,c,u,p,m,h,f,g,y,b,j,v,_,w,I,S,E,k;let T=(0,l.c)(55),{chunk:C,isSelected:D,onSelect:R,collaborators:z,optionsMenu:P}=e,{t:A}=(0,x.Bdt)("studio"),{type:M,endTimestamp:$}=C;T[0]!==M?(t=rT[M],T[0]=M,T[1]=t):t=T[1];let L=t;T[2]!==C.authors?(n=Array.from(C.authors),T[2]=C.authors,T[3]=n):n=T[3];let B=n;T[4]!==z?(i=z?Array.from(z):[],T[4]=z,T[5]=i):i=T[5];let O=i,H="delete"!==M;T[6]===Symbol.for("react.memo_cache_sentinel")?(a={dateStyle:"medium",timeStyle:"short"},T[6]=a):a=T[6];let N=(0,x.ixk)(a);T[7]!==$?(d=new Date($),T[7]=$,T[8]=d):d=T[8];let Y=(0,x.Vq9)(d||"",rB);if(T[9]!==N||T[10]!==$){let e=new Date($);u=N.format(e),T[9]=N,T[10]=$,T[11]=u}else u=T[11];c=u,T[12]!==C||T[13]!==H||T[14]!==R?(p=e=>{e.preventDefault(),e.stopPropagation(),H&&R(C)},T[12]=C,T[13]=H,T[14]=R,T[15]=p):p=T[15];let V=p;T[16]===Symbol.for("react.memo_cache_sentinel")?(m={position:"relative"},T[16]=m):m=T[16],T[17]!==B?(h=(0,s.jsx)(rM,{maxLength:3,userIds:B,size:2}),T[17]=B,T[18]=h):h=T[18];let U=rL[M];return T[19]!==L?(f=L&&(0,s.jsx)(L,{}),T[19]=L,T[20]=f):f=T[20],T[21]!==f?(g=(0,s.jsx)(o.EY,{size:0,children:f}),T[21]=f,T[22]=g):g=T[22],T[23]!==U||T[24]!==g?(y=(0,s.jsx)(r$,{align:"center",justify:"center",$color:U,children:g}),T[23]=U,T[24]=g,T[25]=y):y=T[25],T[26]!==h||T[27]!==y?(b=(0,s.jsxs)("div",{style:m,children:[h,y]}),T[26]=h,T[27]=y,T[28]=b):b=T[28],T[29]!==A||T[30]!==M?(j=A(rA[M])||(0,s.jsx)("code",{children:M}),T[29]=A,T[30]=M,T[31]=j):j=T[31],T[32]!==j?(v=(0,s.jsx)(o.EY,{size:1,weight:"medium",children:j}),T[32]=j,T[33]=v):v=T[33],T[34]!==c||T[35]!==$||T[36]!==Y?(_=(0,s.jsx)(o.EY,{as:"time",size:1,muted:!0,dateTime:$,title:c,children:Y}),T[34]=c,T[35]=$,T[36]=Y,T[37]=_):_=T[37],T[38]!==v||T[39]!==_?(w=(0,s.jsxs)(o.BJ,{space:2,children:[v,_]}),T[38]=v,T[39]=_,T[40]=w):w=T[40],T[41]!==O?(I=O.length>0&&(0,s.jsx)(o.so,{flex:1,justify:"flex-end",align:"center",children:(0,s.jsx)(r.m_,{placement:"top",content:(0,s.jsx)(rN,{collaborators:O}),portal:!0,children:(0,s.jsx)(o.az,{paddingLeft:2,paddingY:2,children:(0,s.jsx)(rM,{maxLength:3,userIds:O,size:0,withTooltip:!1})})})}),T[41]=O,T[42]=I):I=T[42],T[43]!==b||T[44]!==w||T[45]!==I?(S=(0,s.jsxs)(o.so,{align:"center",gap:3,children:[b,w,I]}),T[43]=b,T[44]=w,T[45]=I,T[46]=S):S=T[46],T[47]!==C.id||T[48]!==V||T[49]!==D||T[50]!==S?(E=(0,s.jsx)(o.Zp,{as:"button",onClick:V,padding:2,pressed:D,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":C.id,children:S}),T[47]=C.id,T[48]=V,T[49]=D,T[50]=S,T[51]=E):E=T[51],T[52]!==P||T[53]!==E?(k=(0,s.jsxs)(o.so,{align:"center",gap:1,children:[E,P]}),T[52]=P,T[53]=E,T[54]=k):k=T[54],k}function rV(e){return(0,s.jsx)(rH,{userId:e},e)}let rU=e=>"publish"!==e.type,rF=e=>"publish"===e.type,rW="timeline-list-wrapper",rK=({chunks:e,hasMoreChunks:t,lastChunk:n,onLoadMore:i,onSelect:r,listMaxHeight:l="calc(100vh - 280px)"})=>{let[a,c]=(0,d.useState)(!1),{t:u}=(0,x.Bdt)("studio"),p=n?.id,m=(0,d.useMemo)(()=>(function(e){let t=[];for(let n of e){if(rF(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(rU(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(rF(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}rU(n)&&t.push(n)}return t})(e),[e]),[h,f]=(0,d.useState)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&rU(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,d.useEffect)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&rU(e)&&e.parentId){let t=e.parentId;f(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[m,p]);let g=(0,d.useMemo)(()=>m.filter(e=>!!rF(e)||!e.parentId||h.has(e.parentId)),[m,h]);(0,d.useEffect)(()=>{g.length<16&&t&&i()},[g,t,i]);let y=(0,d.useCallback)(e=>()=>f(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),b=(0,d.useMemo)(()=>p?g.findIndex(e=>e.id===p):-1,[p,g]),j=(0,d.useCallback)(t=>{let n=e.find(e=>e.id===t.id);n?r(n):(console.error("TimelineItem: chunk not found"),r(t))},[e,r]),v=(0,d.useCallback)((e,{activeIndex:n})=>(0,s.jsxs)(o.az,{paddingBottom:1,paddingTop:+(0===n),paddingRight:1,paddingLeft:rU(e)&&e.parentId?4:1,children:[(0,s.jsx)(rY,{chunk:e,isSelected:p===e.id,onSelect:j,collaborators:rF(e)?e.collaborators:void 0,optionsMenu:rF(e)&&e.children.length>0?(0,s.jsx)(rD,{isExpanded:h.has(e.id),onExpand:y(e.id)}):null}),n===g.length-1&&t&&(0,s.jsx)(x.gd4,{})]}),[h,g.length,y,j,t,p]);return(0,d.useEffect)(()=>c(!0),[]),(0,s.jsxs)(rP,{$visible:!b||a,"data-ui":"timeline",children:[0===g.length&&(0,s.jsxs)(rR,{padding:3,space:3,children:[(0,s.jsx)(o.EY,{size:1,weight:"medium",children:u("timeline.error.no-document-history-title")}),(0,s.jsx)(o.EY,{muted:!0,size:1,children:u("timeline.error.no-document-history-description")})]}),g.length>0&&(0,s.jsx)(rz,{direction:"column",$maxHeight:l,id:rW,children:(0,s.jsx)(x.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:u("timeline.list.aria-label"),autoFocus:"list",initialIndex:b,initialScrollAlign:"center",itemHeight:57,items:g,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:v,wrapAround:!1})})]})};function rQ(e){let t,n,i,r,a,d;let c=(0,l.c)(14),{versionError:p}=e,{t:m}=(0,x.Bdt)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(x.SxK,{tone:"critical",children:(0,s.jsx)(u.YZv,{})}),c[0]=t):t=c[0],c[1]!==m||c[2]!==p?(n=m(p?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=m,c[2]=p,c[3]=n):n=c[3],c[4]!==n?(i=(0,s.jsx)(x.SxK,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==m||c[7]!==p?(r=m(p?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=m,c[7]=p,c[8]=r):r=c[8],c[9]!==r?(a=(0,s.jsx)(x.SxK,{size:1,tone:"critical",children:r}),c[9]=r,c[10]=a):a=c[10],c[11]!==i||c[12]!==a?(d=(0,s.jsxs)(o.so,{align:"flex-start",gap:3,padding:4,children:[t,(0,s.jsxs)(o.BJ,{space:4,children:[i,a]})]}),c[11]=i,c[12]=a,c[13]=d):d=c[13],d}rK.displayName="Timeline";let rq=(0,I.I4)(r.AM)`
  overflow: hidden;
  overflow: clip;
`,rJ="timeline-menu";function rZ({chunk:e,mode:t,placement:n}){let{setTimelineRange:i,timelineError:l,ready:c,timelineStore:p}=nk(),[m,h]=(0,d.useState)(!1),[f,g]=(0,d.useState)(null),[y,b]=(0,d.useState)(null),j=(0,a.dj)(),v=(0,x.SfM)(p,e=>e.chunks),_=(0,x.SfM)(p,e=>e.isLoading),w=(0,x.SfM)(p,e=>e.hasMoreChunks),I=(0,x.SfM)(p,e=>e.realRevChunk),S=(0,x.SfM)(p,e=>e.sinceTime),{t:E}=(0,x.Bdt)("studio"),k=(0,d.useCallback)(()=>{h(!0)},[]),T=(0,d.useCallback)(()=>{h(!1)},[]),C=(0,d.useCallback)(e=>{m&&("Escape"===e.key||"Tab"===e.key)&&(T(),f?.focus())},[f,T,m]);(0,o.Pm)(C),(0,o.PR)(m&&T,()=>[f,y]);let D=(0,d.useCallback)(e=>{try{let[t,n]=p?.findRangeForRev(e)||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[i,E,p,j]),R=(0,d.useCallback)(e=>{try{let[t,n]=p?.findRangeForSince(e)||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[i,E,p,j]),z=(0,d.useCallback)(()=>{_||p?.loadMore()},[_,p]),P=(0,d.useMemo)(()=>{if(l)return(0,s.jsx)(rQ,{});if("rev"===t)return(0,s.jsx)(rK,{chunks:v,hasMoreChunks:w,lastChunk:I,onLoadMore:z,onSelect:D});let e=I?v.filter(e=>e.index<I.index):v;return(0,s.jsx)(rK,{chunks:e,hasMoreChunks:w,lastChunk:S,onLoadMore:z,onSelect:R})},[v,z,w,t,I,D,R,S,l]),A={timestamp:{dateStyle:"medium",timeStyle:"short"}},M=e?E(rA[e.type],{context:"timestamp",timestamp:new Date(e?.endTimestamp),formatParams:A}):E("timeline.latest-revision"),$=e?E("timeline.since",{timestamp:new Date(e?.endTimestamp),formatParams:A}):E("timeline.since-version-missing"),L="rev"===t?M:$;return(0,s.jsx)(o.GD,{__unstable_elements:{[rJ]:y},children:(0,s.jsx)(rq,{"data-testid":"timeline-menu",constrainSize:!0,content:m&&P,"data-ui":"versionMenu",open:m,placement:n,matchReferenceWidth:!0,portal:!0,ref:b,children:(0,s.jsx)(o.so,{width:"fill",children:(0,s.jsx)(r.$n,{"data-testid":m?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!c,mode:"ghost",onClick:m?T:k,ref:g,selected:m,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:u.D3D,text:c?L:E("timeline.loading-history")})})})})}let rG=(0,I.I4)(S.P.path)`
  transform-origin: center;
`,rX=e=>{let t;let n=(0,l.c)(2);return n[0]!==e?(t=(0,s.jsx)(S.P.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},r0=e=>{let t;let n=(0,l.c)(2);return n[0]!==e?(t=(0,s.jsx)(rG,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},r1=e=>{let t;let n=(0,l.c)(2);return n[0]!==e?(t=(0,s.jsx)(S.P.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},r2=(0,I.i7)`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,r3=I.I4.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${r2} 1s ease-in-out infinite;
  }
`,r4={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},r5={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},r6={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},r7={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function r8(e){let t,n,i,r,o;let a=(0,l.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,s.jsx)(r0,{variants:r6,initial:d,animate:d}),n=(0,s.jsx)(rX,{variants:r5,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,s.jsxs)(r3,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(r=(0,s.jsx)(r1,{variants:r7,initial:d,animate:d}),a[7]=d,a[8]=r):r=a[8],a[9]!==d||a[10]!==i||a[11]!==r?(o=(0,s.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,s.jsxs)(S.P.g,{variants:r4,initial:d,animate:d,children:[i,r]})}),a[9]=d,a[10]=i,a[11]=r,a[12]=o):o=a[12],o}let r9={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},se=e=>{let t,n,i,r,a;let d=(0,l.c)(13),{status:c}=e,{t:u}=(0,x.Bdt)(eB);if("saved"!==c&&"syncing"!==c)return null;let p=r9[c];return d[0]!==c?(t=(0,s.jsx)(r8,{status:c}),d[0]=c,d[1]=t):t=d[1],d[2]!==p.tone||d[3]!==t?(n=(0,s.jsx)(x.SxK,{size:1,tone:p.tone,children:t}),d[2]=p.tone,d[3]=t,d[4]=n):n=d[4],d[5]!==p.i18nKey||d[6]!==u?(i=u(p.i18nKey),d[5]=p.i18nKey,d[6]=u,d[7]=i):i=d[7],d[8]!==i?(r=(0,s.jsx)(o.EY,{muted:!0,size:1,children:i}),d[8]=i,d[9]=r):r=d[9],d[10]!==n||d[11]!==r?(a=(0,s.jsxs)(o.so,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,r]}),d[10]=n,d[11]=r,d[12]=a):a=d[12],a},st={minimal:!0,useTemporalPhrase:!0},sn=S.P.create(o.$n),si=S.P.create(o.az),sr=()=>{let e,t;let n=(0,l.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{style:{margin:-5},children:(0,s.jsx)(x.LIN,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)(o.so,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,s.jsx)(a.EA,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},ss=e=>{let t,n,i,r,a,d,c,u;let p=(0,l.c)(17),{author:m,translationKey:h,timestamp:f}=e,{onHistoryOpen:g,inspector:y,onHistoryClose:b}=nk(),{t:j}=(0,x.Bdt)(),v=(0,x.Vq9)(void 0===f?"":f,st);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let _=y?.name===nL?b:g;return p[3]!==m?(r=m&&(0,s.jsx)("div",{style:{margin:-5},children:(0,s.jsx)(x.H8m,{user:m,size:0})}),p[3]=m,p[4]=r):r=p[4],p[5]!==j||p[6]!==h?(a=j(h),p[5]=j,p[6]=h,p[7]=a):a=p[7],p[8]!==v||p[9]!==a?(d=(0,s.jsxs)(o.EY,{muted:!0,size:1,children:[a," ",v]}),p[8]=v,p[9]=a,p[10]=d):d=p[10],p[11]!==r||p[12]!==d?(c=(0,s.jsxs)(o.so,{align:"center",flex:"none",gap:3,children:[r,d]}),p[11]=r,p[12]=d,p[13]=c):c=p[13],p[14]!==_||p[15]!==c?(u=(0,s.jsx)(sn,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:_,padding:2,muted:!0,children:c}),p[14]=_,p[15]=c,p[16]=u):u=p[16],u},sl=()=>{let{editState:e}=nk(),{selectedPerspective:t}=(0,x.QO2)(),n=(0,d.useMemo)(()=>(0,x.xo4)(t)&&e?.published?._updatedAt?{translationKey:x.uMx.createDocumentVersion,timestamp:e.published._updatedAt}:e?.version?._updatedAt?{translationKey:e?.version?._updatedAt===e?.version?._createdAt?x.uMx.createDocumentVersion:x.uMx.editDocumentVersion,timestamp:e.version._updatedAt}:e?.draft?._updatedAt?{translationKey:e?.draft?._updatedAt===e?.draft?._createdAt?x.uMx.createDocumentVersion:x.uMx.editDocumentVersion,timestamp:e.draft._updatedAt}:null,[t,e?.published?._updatedAt,e?.version?._updatedAt,e?.version?._createdAt,e?.draft?._updatedAt,e?.draft?._createdAt]);return n?(0,s.jsx)(ss,{author:"",translationKey:n.translationKey,timestamp:n.timestamp}):null},so=()=>{let e;let t=(0,l.c)(6),{events:n,loading:i}=(0,x.LJN)(),r=n?.[0];if(!r&&i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(sr,{}),t[0]=e):e=t[0],e}if(!r){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(sl,{}),t[1]=e):e=t[1],e}let o=x.uMx[r.type];return t[2]!==r.author||t[3]!==r.timestamp||t[4]!==o?(e=(0,s.jsx)(ss,{author:r.author,translationKey:o,timestamp:r.timestamp}),t[2]=r.author,t[3]=r.timestamp,t[4]=o,t[5]=e):e=t[5],e},sa=()=>{let e,t;let n=(0,l.c)(8),{timelineStore:i}=nk(),r=(0,x.SfM)(i,sc),o=(0,x.SfM)(i,su),a=r?.[0];if(!a&&o){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(sr,{}),n[0]=e):e=n[0],e}if(!a){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(sl,{}),n[1]=e):e=n[1],e}n[2]!==a.authors?(e=Array.from(a.authors),n[2]=a.authors,n[3]=e):e=n[3];let d=e[0],c=rA[a.type];return n[4]!==d||n[5]!==a.endTimestamp||n[6]!==c?(t=(0,s.jsx)(ss,{author:d,translationKey:c,timestamp:a.endTimestamp}),n[4]=d,n[5]=a.endTimestamp,n[6]=c,n[7]=t):t=n[7],t};function sd(){let e,t,n,i,r,o,a;let c=(0,l.c)(18),{documentId:u,documentType:p,editState:m,value:h}=nk(),[f,g]=(0,d.useState)(null),y=x.For().beta?.eventsAPI?.documents,b=(0,x.M7h)(u,p,m?.release),j=h?._updatedAt;return c[0]!==f||c[1]!==b.isSyncing?(e=()=>{if("syncing"===f&&!b.isSyncing){let e=setTimeout(()=>g("saved"),1e3);return()=>clearTimeout(e)}if("saved"===f){let e=setTimeout(()=>g(null),3e3);return()=>clearTimeout(e)}},c[0]=f,c[1]=b.isSyncing,c[2]=e):e=c[2],c[3]!==j||c[4]!==f||c[5]!==b.isSyncing?(t=[f,j,b.isSyncing],c[3]=j,c[4]=f,c[5]=b.isSyncing,c[6]=t):t=c[6],(0,d.useEffect)(e,t),c[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{g(null)},c[7]=n):n=c[7],c[8]!==u?(i=[u],c[8]=u,c[9]=i):i=c[9],(0,d.useLayoutEffect)(n,i),c[10]!==b.isSyncing?(r=()=>{b.isSyncing&&g("syncing")},c[10]=b.isSyncing,c[11]=r):r=c[11],c[12]!==j||c[13]!==b.isSyncing?(o=[b.isSyncing,j],c[12]=j,c[13]=b.isSyncing,c[14]=o):o=c[14],(0,d.useLayoutEffect)(r,o),c[15]!==y||c[16]!==f?(a=(0,s.jsx)(E.N,{children:f?(0,s.jsx)(si,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,s.jsx)(se,{status:f||void 0})}):(0,s.jsx)(s.Fragment,{children:y?(0,s.jsx)(so,{}):(0,s.jsx)(sa,{})})}),c[15]=y,c[16]=f,c[17]=a):a=c[17],a}function sc(e){return e.chunks}function su(e){return e.isLoading}let sp=(0,I.I4)(o.EY)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function sm(){let e,t,n,i;let r=(0,l.c)(8),{displayed:a}=nk(),{t:d}=(0,x.Bdt)(),c=a?._updatedAt||a?._createdAt;r[0]!==c||r[1]!==d?(e=c?(0,s.jsx)(x.HTc,{t:d,i18nKey:"document-status.revision-from",values:{date:(0,eS.A)(new Date(c),"MMM d, yyyy '@' pp")}}):null,r[0]=c,r[1]=d,r[2]=e):e=r[2],r[3]!==e?(t={name:"revision",text:e,tone:"caution"},r[3]=e,r[4]=t):t=r[4];let p=t;return r[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(u.G2W,{})})}),r[5]=n):n=r[5],r[6]!==p.text?(i=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.so,{flex:1,gap:3,padding:2,children:[n,(0,s.jsx)(o.az,{flex:1,children:(0,s.jsx)(sp,{size:1,textOverflow:"ellipsis",children:p.text})})]})}),r[6]=p.text,r[7]=i):i=r[7],i}let sh=S.P.create(o.Zp);function sf(e){let t,n,i,r,a,c,u,p;let m=(0,l.c)(22),{actionsBoxRef:h,createLinkMetadata:f}=e,{editState:g,revisionId:y,onChange:b}=nk(),{selectedPerspective:j}=(0,x.QO2)(),{title:v}=nO(),_=x.eaL().components?.documentLinkedActions,w=!!y,[I,S]=(0,d.useState)(null),[E,k]=(0,d.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{S(e.contentRect.width<480)},m[0]=t):t=m[0];let T=t;m[1]!==E?(n={element:E,onResize:T},m[1]=E,m[2]=n):n=m[2],function(e){let t,n;let i=(0,l.c)(4),{element:r,onResize:s}=e;i[0]!==r||i[1]!==s?(t=()=>(r&&x.bCC.observe(r,s),()=>{r&&x.bCC.unobserve(r)}),n=[r,s],i[0]=r,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,d.useLayoutEffect)(t,n)}(n);e:{let e=!!(g?.ready&&"boolean"==typeof I);if(j){if((0,x.xo4)(j)){i=e&&!!g?.published;break e}if((0,x.Jrl)(j)){i=e&&!!g?.version;break e}}i=e}let C=i;if(f&&(0,x.Y07)(f)&&_){let e;m[3]!==_||m[4]!==f||m[5]!==b||m[6]!==v?(e=(0,s.jsx)(_,{metadata:f,panelPortalElementId:iU,onDocumentChange:b,documentTitle:v}),m[3]=_,m[4]=f,m[5]=b,m[6]=v,m[7]=e):e=m[7],r=e}else if(w){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rc,{}),m[8]=e):e=m[8],r=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(rd,{}),m[9]=e):e=m[9],r=e}let D=w?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:.2},m[10]=a):a=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},m[11]=c):c=m[11];let R=w?"caution":void 0;return m[12]!==r||m[13]!==h||m[14]!==I||m[15]!==C||m[16]!==w?(u=C&&(0,s.jsxs)(o.so,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!w,paddingRight:+!w,children:[(0,s.jsxs)(o.so,{align:"center",flex:1,gap:I?2:3,wrap:"wrap",paddingRight:3,children:[(0,s.jsxs)(o.so,{align:"center",children:[w?(0,s.jsx)(sm,{}):(0,s.jsx)(sd,{}),(0,s.jsx)(rv,{})]}),(0,s.jsx)(rS,{})]}),(0,s.jsxs)(o.so,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,s.jsx)(rv,{}),r]})]}),m[12]=r,m[13]=h,m[14]=I,m[15]=C,m[16]=w,m[17]=u):u=m[17],m[18]!==D||m[19]!==R||m[20]!==u?(p=(0,s.jsx)(sh,{initial:a,animate:c,tone:R,radius:3,ref:k,sizing:"border",padding:2,children:u},D),m[18]=D,m[19]=R,m[20]=u,m[21]=p):p=m[21],p}let sx=(0,d.memo)(function(e){let t,n,i,r,o,a,d,c,u,p,m,h,f;let g=(0,l.c)(26);g[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:r,onActionStart:o,onKeyDown:a,rootRef:c,states:u,...d}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=r,g[5]=o,g[6]=a,g[7]=d,g[8]=c,g[9]=u,g[10]=p):(t=g[1],n=g[2],i=g[3],r=g[4],o=g[5],a=g[6],d=g[7],c=g[8],u=g[9],p=g[10]);let y=void 0===p?"div":p,b=u[n];g[11]!==o||g[12]!==a||g[13]!==u?(m=e=>{let t=u.filter(t=>t.shortcut&&(0,ex.v_)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),o(u.indexOf(n));return}a&&a(e)},g[11]=o,g[12]=a,g[13]=u,g[14]=m):m=g[14];let j=m;return g[15]!==t||g[16]!==b?(h=b&&b.dialog&&(0,s.jsx)(x.wG1,{zOffset:"paneFooter",children:(0,s.jsx)(iX,{dialog:b.dialog,referenceElement:t})}),g[15]=t,g[16]=b,g[17]=h):h=g[17],g[18]!==y||g[19]!==i||g[20]!==j||g[21]!==r||g[22]!==d||g[23]!==c||g[24]!==h?(f=(0,s.jsxs)(y,{id:r,onKeyDown:j,tabIndex:-1,...d,ref:c,children:[i,h]}),g[18]=y,g[19]=i,g[20]=j,g[21]=r,g[22]=d,g[23]=c,g[24]=h,g[25]=f):f=g[25],f}),sg=(0,d.memo)(e=>{let t,n,i,r,o,a,c,u,p;let m=(0,l.c)(18);m[0]!==e?({actionsBoxElement:t,as:r,children:n,...i}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=r):(t=m[1],n=m[2],i=m[3],r=m[4]);let h=void 0===r?"div":r,{actions:f,editState:x}=nk(),[g,y]=(0,d.useState)(-1);m[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{y(e)},m[5]=o):o=m[5];let b=o;m[6]!==x?(c=x&&{...x,onComplete:sy,revision:void 0},m[6]=x,m[7]=c):c=m[7],a=c,m[8]!==t||m[9]!==g||m[10]!==h||m[11]!==n||m[12]!==i?(u=e=>{let{states:r}=e;return(0,s.jsx)(sx,{...i,activeIndex:g,actionsBoxElement:t,as:h,onActionStart:b,states:r,children:n})},m[8]=t,m[9]=g,m[10]=h,m[11]=n,m[12]=i,m[13]=u):u=m[13];let j=u;return a&&f?(m[14]!==a||m[15]!==f||m[16]!==j?(p=(0,s.jsx)(t4,{actionProps:a,actions:f,children:j}),m[14]=a,m[15]=f,m[16]=j,m[17]=p):p=m[17],p):null});function sy(){}function sb(e){let t,n,i,r,a,d,c;let u=(0,l.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:f,minWidth:g}=e,{t:y}=(0,x.Bdt)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==y||u[3]!==t?(n=(0,s.jsx)(x.HTc,{t:y,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=y,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==y?(i=p&&(0,s.jsx)(o.EY,{as:"p",children:(0,s.jsx)(x.HTc,{t:y,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=y,u[7]=i):i=u[7],u[8]!==p||u[9]!==y?(r=!p&&(0,s.jsx)(o.EY,{as:"p",children:y("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=y,u[10]=r):r=u[10],u[11]!==m?(a=x.Cu5&&m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.EY,{as:"p",children:"Here is the JSON representation of the document:"}),(0,s.jsx)(o.Zp,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,s.jsx)(o.Cy,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=a):a=u[12],u[13]!==i||u[14]!==r||u[15]!==a?(d=(0,s.jsxs)(o.BJ,{space:4,children:[i,r,a]}),u[13]=i,u[14]=r,u[15]=a,u[16]=d):d=u[16],u[17]!==h||u[18]!==g||u[19]!==f||u[20]!==n||u[21]!==d?(c=(0,s.jsx)(nw,{currentMinWidth:h,flex:2.5,minWidth:g,paneKey:f,title:n,tone:"caution",children:d}),u[17]=h,u[18]=g,u[19]=f,u[20]=n,u[21]=d,u[22]=c):c=u[22],c}sg.displayName="Memo(DocumentActionShortcuts)";let sj=["fixed","fixed","absolute"];function sv(e){let t,n,i,d,c,u,p,m;let h=(0,l.c)(24),{documentPanelPortalElement:f,setFooterElement:g,setActionsBoxElement:y}=e,b=(0,x.YKH)(),{value:j,isInitialValueLoading:v,ready:_,documentId:w,schemaType:I}=nk();h[0]!==f?(n={[iU]:f},h[0]=f,h[1]=n):n=h[1],t=n,h[2]!==j?(i=(0,x.G_3)(j),h[2]=j,h[3]=i):i=h[3];let S=i,{startInCreateBanner:E}=(0,x.eaL)().components??{};return h[4]!==E||h[5]!==w||h[6]!==v||h[7]!==_||h[8]!==I||h[9]!==j?(d=E&&(0,s.jsx)(s_,{children:(0,s.jsx)(E,{document:j,documentId:w,documentType:I,documentReady:_,isInitialValueLoading:!!v,panelPortalElementId:iU})}),h[4]=E,h[5]=w,h[6]=v,h[7]=_,h[8]=I,h[9]=j,h[10]=d):d=h[10],h[11]!==S||h[12]!==y?(c=(0,s.jsx)(r.vE,{children:(0,s.jsx)(sf,{actionsBoxRef:y,createLinkMetadata:S})}),h[11]=S,h[12]=y,h[13]=c):c=h[13],h[14]!==g||h[15]!==d||h[16]!==c?(u=(0,s.jsxs)(tI,{ref:g,padding:1,children:[d,c]}),h[14]=g,h[15]=d,h[16]=c,h[17]=u):u=h[17],h[18]!==u||h[19]!==b.portal?(p=(0,s.jsx)(a.Co,{position:sj,zOffset:b.portal,children:u}),h[18]=u,h[19]=b.portal,h[20]=p):p=h[20],h[21]!==t||h[22]!==p?(m=(0,s.jsx)(o.GD,{__unstable_elements:t,children:p}),h[21]=t,h[22]=p,h[23]=m):m=h[23],m}function s_(e){let{collapsed:t}=tu();return t?null:e.children}let sw=[],sI=["fixed","fixed","absolute"],sS=(0,I.I4)(x.olN)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function sE(){let{changesOpen:e,displayed:t,documentId:n,documentType:i,editState:r,fieldActions:l,focusPath:c,inspectOpen:p,inspector:m,inspectors:h,onFocus:f,onHistoryOpen:g,onMenuAction:y,onPathOpen:b,paneKey:j,schemaType:v,value:_,previewUrl:w}=nk(),{params:I}=eX(),{features:S}=nP(),{t:E}=(0,eg.Bd)(eB),{collapsed:k}=eq(),T=(0,x.YKH)(),[C,D]=(0,d.useState)(null),[R,z]=(0,d.useState)(null),[P,A]=(0,d.useState)(null),[M,$]=(0,d.useState)(null),[L,B]=(0,d.useState)(null);(0,x.ti5)({element:C,focusPath:c,value:_});let[O,H]=(0,d.useState)([]),[N,Y]=(0,d.useState)([]),V=(0,a.sQ)(R),U=(0,a.sQ)(P),F=V?.height,W=U?.height,K=600+320*!!m,Q=320+320*!!m,q=(0,d.useMemo)(()=>h?.find(e=>e.name===m?.name),[h,m?.name]),J=nR({displayed:t,documentId:n,editState:r}),Z=!!_,G=(0,d.useMemo)(()=>(function(e){let t=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,r)=>{let s=i[r];return!s||s.hidden?null:{action:`${nM}${n.name}`,group:s.showAsAction?void 0:"inspectors",icon:s.icon,isDisabled:!t,selected:e?.name===n.name,shortcut:s.hotkeys?.join("+"),showAsAction:s.showAsAction,title:s.title,tone:s.tone}}).filter(Boolean)}(e),n=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:u.Pe7,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u";return n?null:{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:u.ppF,isDisabled:n}}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:u.qYV},...t,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:u.qzt,isDisabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:q,features:S,hasValue:Z,inspectorMenuItems:O,inspectors:h,previewUrl:w,documentIdStack:J,t:E}),[q,J,S,Z,O,h,w,E]),X=(0,d.useCallback)(e=>{for(let t of G)if(t.shortcut&&(0,ex.v_)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),y(t);return}},[y,G]),ee=(0,d.useCallback)(e=>{b(e),f(e)},[b,f]);return v?(0,s.jsxs)(x.niW,{value:_,children:[h.length>0&&(0,s.jsx)(nB,{documentId:n,documentType:i,inspectors:h,onMenuItems:H}),l.length>0&&v&&(0,s.jsx)(x.yW8,{actions:l,documentId:n,documentType:i,onActions:Y,path:sw,schemaType:v}),(0,s.jsx)(x.tdH,{actions:N,path:sw,children:(0,s.jsxs)(sg,{actionsBoxElement:M,as:td,currentMinWidth:K,"data-testid":"document-pane",flex:2.5,id:j,minWidth:Q,onKeyUp:X,rootRef:D,children:[(0,s.jsx)(ry,{ref:A,menuItems:G}),(0,s.jsx)(a.Co,{position:sI,zOffset:T.paneDialog,children:(0,s.jsx)(o.so,{direction:"column",flex:1,height:k?void 0:"fill",children:(0,s.jsx)(sS,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&I?.changesInspectorTab==="review",onOpenReviewChanges:g,onSetFocus:ee,children:(0,s.jsx)(iH,{footerHeight:F||null,headerHeight:W||null,isInspectOpen:p,rootElement:C,setDocumentPanelPortalElement:B,footer:(0,s.jsx)(sv,{documentPanelPortalElement:L,setFooterElement:z,setActionsBoxElement:$})})})})}),(0,s.jsx)(nN,{})]})})]}):(0,s.jsx)(sb,{currentMinWidth:K,documentType:i,minWidth:Q,paneKey:j,value:_})}let sk=(0,ev.g_)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),sT=e=>{let t,n;let i=(0,l.c)(13),{paneOptions:r,documentType:s,documentId:o,params:a}=e,d=(0,x.bgA)(),c=eX(),u=(0,x.$6H)(c.payload);i[0]!==s||i[1]!==r.template||i[2]!==r.templateParameters||i[3]!==u||i[4]!==a.template||i[5]!==d?(t=function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${i}". Using "${i}".`);let r=i||t.urlTemplate,s=e.filter(e=>e.schemaType===t.documentType),l={...t.templateParams,..."object"==typeof n&&n||{}},o=r;return r||1!==s.length||(o=s[0].id),{templateName:o,templateParams:l}}(d,{documentType:s,templateName:r.template,templateParams:r.templateParameters,panePayload:u,urlTemplate:a.template}),i[0]=s,i[1]=r.template,i[2]=r.templateParameters,i[3]=u,i[4]=a.template,i[5]=d,i[6]=t):t=i[6];let{templateName:p,templateParams:m}=t;i[7]!==o||i[8]!==s||i[9]!==a.version||i[10]!==p||i[11]!==m?(n={documentId:o,documentType:s,templateName:p,templateParams:m,version:a.version},i[7]=o,i[8]=s,i[9]=a.version,i[10]=p,i[11]=m,i[12]=n):n=i[12];let h=(0,x.nfZ)(n);return(0,x.$6H)(h)},sC=e=>(0,x.u4i)(e)&&"string"==typeof e._id&&"string"==typeof e._type;function sD(e){let t=(0,x.u4i)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}let sR=(0,d.memo)(e=>{let{children:t,index:n,pane:i,paneKey:r,onFocusPath:o,forcedVersion:u,historyStore:p}=e,{store:m,error:h,ready:f,revisionDocument:g,onOlderRevision:y,sinceDocument:b,isPristine:j,revisionId:v,lastNonDeletedRevId:_}=p,w=(0,x.pDY)(),{setDocumentMeta:I}=(0,x.e8q)(),{document:{actions:S,badges:E,unstable_fieldActions:T,unstable_languageFilter:C}}=(0,x.For)(),z=(0,ej.Jr)(),P=eX(),A=P.setParams,{push:$}=(0,a.dj)(),{options:B,menuItemGroups:O=n$,title:H=null,views:N=[]}=i,V=(0,x.$6H)(B),U=V.id,K=(0,x.IMx)(U),Q=B.type,q=(0,x.$6H)(P.params)||nA,J=(0,x.QO2)(),{selectedReleaseId:Z,selectedPerspectiveName:G}=(0,d.useMemo)(()=>u||{selectedPerspectiveName:J.selectedPerspectiveName,selectedReleaseId:J.selectedReleaseId},[u,J.selectedPerspectiveName,J.selectedReleaseId]),X=t9(),ee=sT({paneOptions:V,documentId:K,documentType:Q,params:q}),et=ee.loading,{changesOpen:en,currentInspector:ei,inspectors:er,closeInspector:es,openInspector:el,handleHistoryClose:eo,handleHistoryOpen:ed,handleInspectorAction:ec,inspectOpen:eu,handleLegacyInspectClose:em}=function({documentId:e,documentType:t,params:n,setParams:i}){let{features:r}=nP(),s=(0,x.For)().document.inspectors,l=(0,d.useMemo)(()=>s({documentId:e,documentType:t}),[e,t,s]),[o,a]=(0,d.useState)(()=>n.inspect||null),c=(0,d.useRef)(n.inspect);(0,d.useEffect)(()=>{c.current!==n.inspect&&(c.current=n.inspect,a(n.inspect||null))},[n.inspect]);let u=(0,d.useMemo)(()=>l?.find(e=>e.name===o),[l,o]),p=(0,d.useMemo)(()=>l.find(e=>e.name===nL),[l]),m=u?.name===nL,h=(0,d.useCallback)(e=>{let t=e&&l.find(t=>t.name===e);if(e&&!t){console.warn(`No inspector named "${e}"`);return}if(u){if(t){let e=t.onClose?.({params:n})??{params:n};a(null),c.current=void 0,i({...e.params,inspect:void 0});return}if(u){let e=u.onClose?.({params:n})??{params:n};a(null),c.current=void 0,i({...e.params,inspect:void 0})}}},[u,l,n,i]),f=(0,d.useCallback)((e,t)=>{let r=l.find(t=>t.name===e);if(!r){console.warn(`No inspector named "${e}"`);return}if(u?.name===r.name){i({...n,...t,inspect:r.name});return}let s=n;u&&(s=(r.onClose?.({params:s})??{params:s}).params);let o=r.onOpen?.({params:s})??{params:s};a(r.name),c.current=r.name,i({...o.params,...t,inspect:r.name})},[u,l,n,i]),g=(0,d.useCallback)(()=>{p&&h(p.name)},[h,p]),y=(0,d.useCallback)(()=>{r.reviewChanges&&p&&f(p.name,{changesInspectorTab:"review"})},[r.reviewChanges,f,p]),b="on"===n.inspect,j=(0,d.useCallback)((e=!b)=>{i(e?{...n,inspect:"on"}:D(n,"inspect"))},[b,n,i]),v=(0,d.useCallback)(()=>j(!1),[j]),_=(0,d.useCallback)(e=>{if("inspect"===e.action)return j(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(nM.length),n=l.find(e=>e.name===t);return!!n&&(n.name===o?h(n.name):f(n.name),!0)},[h,o,l,f,j]);return{changesOpen:m,currentInspector:u,inspectors:l,closeInspector:h,openInspector:f,handleHistoryClose:g,handleHistoryOpen:y,handleInspectorAction:_,handleLegacyInspectClose:v,inspectOpen:b}}({documentId:K,documentType:Q,params:q,setParams:A}),[eh,ef]=(0,d.useState)(!1),ex=(0,d.useCallback)(e=>!!f&&!e?.draft&&!e?.published&&!e?.version&&!j,[f,j]),eg=(0,d.useCallback)(e=>en?b:e?.published||null,[en,b]),ey=w.get(Q),eb=(0,d.useCallback)(e=>{let t=ex(e);return null!==v||eh||t},[ex,eh,v]),ev=(0,d.useCallback)(e=>y?g||{_id:e._id,_type:e._type}:e,[y,g]),{editState:e_,connectionState:ew,focusPath:eI,onChange:eS,validation:eE,ready:ek,value:eT,formState:eC,permissions:eD,onPathOpen:eR,isPermissionsLoading:ez,formStateRef:eP,onProgrammaticFocus:eA,collapsedFieldSets:eM,collapsedPaths:e$,onBlur:eL,onFocus:eO,onSetActiveFieldGroup:eH,onSetCollapsedPath:eN,onSetCollapsedFieldSet:eY,openPath:eV}=(0,x.Lay)({documentType:Q,documentId:K,initialValue:ee.value,comparisonValue:eg,releaseId:Z,selectedPerspectiveName:G,initialFocusPath:q.path?(0,R.sH)(q.path):x.Mlv,readOnly:eb,onFocusPath:o,getFormDocumentValue:ev}),eU=(0,d.useCallback)(()=>{let e;switch(!0){case!!q.rev:e="revision";break;case Z&&(0,x.A_X)(eT._id):e="version";break;case"published"===G:e="published";break;default:e="draft"}return e},[G,Z,q,eT._id]),eF=(0,d.useMemo)(()=>eU(),[eU]),eW=(0,d.useMemo)(()=>({schemaType:Q,documentId:K,versionType:eF,...Z&&{versionName:Z}}),[Q,K,eF,Z]),eK=(0,d.useMemo)(()=>S(eW),[S,eW]),eQ=(0,d.useMemo)(()=>E({schemaType:Q,documentId:K}),[E,K,Q]),eq=(0,d.useMemo)(()=>C({schemaType:Q,documentId:K}),[K,Q,C]),eJ=(0,x.$6H)(N),eZ=q.view||eJ[0]&&eJ[0].id||null,eG=function(e){let t,n,i,r,s,o;let a=(0,l.c)(6),{resolveProductionUrl:c}=(0,x.For)().document;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=new F.t(void 0),a[0]=n):n=a[0],t=n,a[1]!==e?(i=()=>{t.next(e)},r=[t,e],a[1]=e,a[2]=i,a[3]=r):(i=a[2],r=a[3]),(0,d.useEffect)(i,r),a[4]!==c?(o=t.asObservable().pipe((0,L.F)(),(0,ep.B)(500),(0,ea.n)(e=>sC(e)?(0,W.H)(c({document:e})):(0,M.of)(void 0)),(0,L.F)(),(0,Y.W)(sD)),a[4]=c,a[5]=o):o=a[5],s=o,(0,k.J)(s)}(eT),{t:e0}=(0,x.Bdt)(eB),e1=(0,d.useMemo)(()=>ey?T({documentId:K,documentType:Q,schemaType:ey}):[],[K,Q,T,ey]),e2=ek&&(!q.rev||f||!!h),e3=(0,d.useMemo)(()=>ev(eT),[ev,eT]),{previousId:e4}=nR({displayed:e3,documentId:K,editState:e_}),e5=(0,d.useCallback)((e,t)=>{A({...q,since:e,rev:t||void 0})},[q,A]),e6=(0,d.useCallback)(()=>P.closeCurrent(),[P]),e7=(0,d.useCallback)(()=>P.duplicateCurrent(),[P]),e8=(0,d.useCallback)(e=>"production-preview"===e.action&&eG?(window.open(eG),!0):"copy-document-url"===e.action&&navigator?(z.log(sk),navigator.clipboard.writeText(window.location.toString()),$({id:"copy-document-url",status:"info",title:e0("panes.document-operation-results.operation-success_copy-url")}),!0):"reviewChanges"===e.action?(ed(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(nM))&&ec(e),"compareVersions"===e.action&&"u">typeof e4&&(X.navigateDiffView({mode:"version",previousDocument:{type:Q,id:e4},nextDocument:{type:Q,id:eT._id}}),!0)),[eG,e4,z,$,e0,ed,ec,X,Q,eT._id]);(0,d.useEffect)(()=>{I({documentId:K,documentType:Q,schemaType:ey,onChange:eS})},[K,Q,ey,eS,I]);let e9=(0,d.useMemo)(()=>eg(e_),[e_,eg]),te=(0,d.useMemo)(()=>ex(e_),[e_,ex]),tt=(0,d.useMemo)(()=>({actions:eK,activeViewId:eZ,badges:eQ,changesOpen:en,closeInspector:es,collapsedFieldSets:eM,collapsedPaths:e$,compareValue:e9,connectionState:ew,displayed:e3,documentId:K,documentIdRaw:U,documentType:Q,editState:e_,fieldActions:e1,focusPath:eI,inspector:ei||null,inspectors:er,onBlur:eL,onChange:eS,onFocus:eO,onPathOpen:eR,onHistoryClose:eo,onHistoryOpen:ed,onInspectClose:em,onMenuAction:e8,onPaneClose:e6,onPaneSplit:e7,onSetActiveFieldGroup:eH,onSetCollapsedPath:eN,onSetCollapsedFieldSet:eY,openInspector:el,openPath:eV,index:n,inspectOpen:eu,validation:eE,menuItemGroups:O||[],paneKey:r,previewUrl:eG,ready:e2,schemaType:ey,isPermissionsLoading:ez,isInitialValueLoading:et,permissions:eD,setTimelineRange:e5,setIsDeleting:ef,isDeleting:eh,isDeleted:te,timelineError:h,timelineStore:m,title:H,value:eT,selectedReleaseId:Z,views:eJ,formState:eC,unstable_languageFilter:eq,revisionId:v,lastNonDeletedRevId:_}),[eK,eZ,eQ,en,es,eM,e$,e9,ew,e3,K,U,Q,e_,e1,eI,ei,er,eL,eS,eO,eR,eo,ed,em,e8,e6,e7,eH,eN,eY,el,eV,n,eu,eE,O,r,eG,e2,ey,ez,et,eD,e5,eh,te,h,m,H,eT,Z,eJ,eC,eq,v,_]);return(0,d.useEffect)(()=>{if(e2&&q.path){let{path:e,...t}=q;eA((0,R.Y7)(eP.current?.value,(0,R.sH)(e))),P.setParams(t)}},[eP,eA,P,q,e2]),(0,s.jsx)(c.Fi.Provider,{value:tt,children:t})});sR.displayName="Memo(DocumentPaneProvider)";let sz=e=>{let t,n,i,r,o,a,d,c;let u=(0,l.c)(37),{params:p}=eX(),m=void 0===p?nA:p,h=sW(e.pane.options,m),f=(0,x.pDY)(),g=h.type,y=!!f.get(h.type)?.liveEdit,{selectedPerspectiveName:b,selectedReleaseId:j,selectedPerspective:v}=(0,x.QO2)(),{data:_}=(0,x.gJZ)();u[0]!==h.id?(t=(0,x.IMx)(h.id),u[0]=h.id,u[1]=t):t=u[1];let w=(0,x.zX2)(t,g,"default",j),I=y&&"drafts"===v&&!w?.draft,{rev:S,since:E}=m,k=m.historyVersion;e:{if(I){let e;u[2]!==h.id?(e=(0,x.IMx)(h.id),u[2]=h.id,u[3]=e):e=u[3],n=e;break e}if(k&&_.some(e=>(0,x._hI)(e._id)===k)){let e;u[4]!==k||u[5]!==h.id?(e=(0,x.ctg)(h.id,k),u[4]=k,u[5]=h.id,u[6]=e):e=u[6],n=e;break e}if(typeof b>"u"){let e;u[7]!==h.id?(e=(0,x.T4)(h.id),u[7]=h.id,u[8]=e):e=u[8],n=e;break e}if("published"===b){let e;u[9]!==h.id?(e=(0,x.IMx)(h.id),u[9]=h.id,u[10]=e):e=u[10],n=e;break e}if(j){let e;u[11]!==h.id||u[12]!==b?(e=(0,x.ctg)(h.id,b),u[11]=h.id,u[12]=b,u[13]=e):e=u[13],n=e;break e}n=h.id}let T=n;u[14]!==T||u[15]!==h.type||u[16]!==S||u[17]!==E?(i={documentId:T,documentType:h.type,rev:S,since:E},u[14]=T,u[15]=h.type,u[16]=S,u[17]=E,u[18]=i):i=u[18];let C=(0,x.Sjd)(i),D=C.error,R=C.revision?.revisionId||null,z=!!(C.revision?.document&&C.revision?.revisionId),P=C.revision?.document||null,A=C.sinceRevision?.document||null,M=!C.loading,$=0===C.events.length;return u[19]!==C.events?(o=C.events.find(sP)?.id||null,u[19]=C.events,u[20]=o):o=u[20],u[21]!==C.error||u[22]!==M||u[23]!==$||u[24]!==o||u[25]!==R||u[26]!==z||u[27]!==P||u[28]!==A?(a={error:D,revisionId:R,onOlderRevision:z,revisionDocument:P,sinceDocument:A,ready:M,isPristine:$,lastNonDeletedRevId:o},u[21]=C.error,u[22]=M,u[23]=$,u[24]=o,u[25]=R,u[26]=z,u[27]=P,u[28]=A,u[29]=a):a=u[29],r=a,u[30]!==r||u[31]!==k||u[32]!==e?(d=k?(0,s.jsx)(x.g19,{selectedPerspectiveName:k,excludedPerspectives:x.Mlv,children:(0,s.jsx)(sR,{...e,historyStore:r})}):(0,s.jsx)(sR,{...e,historyStore:r}),u[30]=r,u[31]=k,u[32]=e,u[33]=d):d=u[33],u[34]!==d||u[35]!==C?(c=(0,s.jsx)(x.tGd,{value:C,children:d}),u[34]=d,u[35]=C,u[36]=c):c=u[36],c};function sP(e){return!(0,x.GDb)(e)&&!(0,x.zOx)(e)}let sA=e=>{let t,n,i,r,o;let a=(0,l.c)(20),{pane:c}=e,u=eX(),p=sW(c.options,u.params),m=u.params||nA,[h,f]=(0,d.useState)(null);a[0]!==p.id?(t=(0,x.IMx)(p.id),a[0]=p.id,a[1]=t):t=a[1],a[2]!==p.type||a[3]!==m.rev||a[4]!==m.since||a[5]!==t?(n={documentId:t,documentType:p.type,onError:f,rev:m.rev,since:m.since},a[2]=p.type,a[3]=m.rev,a[4]=m.since,a[5]=t,a[6]=n):n=a[6];let g=(0,x.Az$)(n),y=(0,x.SfM)(g,sM),b=(0,x.SfM)(g,s$),j=(0,x.SfM)(g,sL),v=(0,x.SfM)(g,sB),_=(0,x.SfM)(g,sO),w=(0,x.SfM)(g,sH),I=(0,x.SfM)(g,sN),S=b?.id||null,E=!!w;return a[7]!==I||a[8]!==y||a[9]!==g||a[10]!==S||a[11]!==v||a[12]!==j||a[13]!==E||a[14]!==h||a[15]!==_?(r={store:g,error:h,revisionId:S,onOlderRevision:y,revisionDocument:v,sinceDocument:j,ready:_,isPristine:E,lastNonDeletedRevId:I},a[7]=I,a[8]=y,a[9]=g,a[10]=S,a[11]=v,a[12]=j,a[13]=E,a[14]=h,a[15]=_,a[16]=r):r=a[16],i=r,a[17]!==i||a[18]!==e?(o=(0,s.jsx)(sR,{...e,historyStore:i}),a[17]=i,a[18]=e,a[19]=o):o=a[19],o};function sM(e){return e.onOlderRevision}function s$(e){return e.revTime}function sL(e){return e.sinceAttributes}function sB(e){return e.timelineDisplayed}function sO(e){return e.timelineReady}function sH(e){return e.isPristine}function sN(e){return e.lastNonDeletedRevId}let sY=(0,d.memo)(e=>{let t;let n=(0,l.c)(4);if(x.For().beta?.eventsAPI?.documents){let t;return n[0]!==e?(t=(0,s.jsx)(sz,{...e}),n[0]=e,n[1]=t):t=n[1],t}return n[2]!==e?(t=(0,s.jsx)(sA,{...e}),n[2]=e,n[3]=t):t=n[3],t});sY.displayName="Memo(DocumentPaneProviderWrapper)";let sV=(0,d.memo)(function(e){let t,n;let i=(0,l.c)(5),{name:r}=(0,x.For)(),o=e.pane.source||r;return i[0]!==e?(t=(0,s.jsx)(x.K1$,{children:(0,s.jsx)(sU,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,s.jsx)(x.NeO,{name:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n});function sU(e){var t,n,i;let r,a,c,u,p,m,h,f,g,y,b,j,v;let _=(0,l.c)(57),{pane:w,paneKey:I}=e,{resolveNewDocumentOptions:S}=(0,x.For)().document,{selectedPerspectiveName:E}=(0,x.QO2)(),k=eX(),T=sW(w.options,k.params),{documentType:C,isLoaded:D}=(0,x.fRg)(T.id,T.type);!function(){let e,t,n,i,r;let s=(0,l.c)(10),{params:o,setParams:a}=eX(),c=void 0===o?nA:o,{selectedPerspectiveName:u}=(0,x.QO2)(),p=(0,d.useRef)(!1);s[0]!==c||s[1]!==a?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>c[e])&&a({...c,rev:"true"===c.preserveRev?c.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},s[0]=c,s[1]=a,s[2]=e):e=s[2];let m=(0,eE.J)(e);s[3]!==u||s[4]!==m?(t=()=>{p.current&&m(u)},s[3]=u,s[4]=m,s[5]=t):t=s[5],s[6]!==u?(n=[u],s[6]=u,s[7]=n):n=s[7],(0,d.useEffect)(t,n),s[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),r=[],s[8]=i,s[9]=r):(i=s[8],r=s[9]),(0,d.useEffect)(i,r)}();let z=function(){let e;let t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:nc,defaultComponent:sE},t[0]=e):e=t[0],(0,x.A1m)(e)}();_[0]!==T.id||_[1]!==T.type||_[2]!==S?(a=S({type:"document",documentId:T.id,schemaType:T.type}),_[0]=T.id,_[1]=T.type,_[2]=S,_[3]=a):a=_[3],r=a,_[4]!==r?(c={templateItems:r},_[4]=r,_[5]=c):c=_[5];let[P,A]=(0,x.CzS)(c),M=D&&!A;_[6]!==C||_[7]!==M||_[8]!==T||_[9]!==e?(p=M&&C&&T.type!==C?(t=e,n=T,i=C,{...t,pane:{...t.pane,options:{...n,type:i}}}):e,_[6]=C,_[7]=M,_[8]=T,_[9]=e,_[10]=p):p=_[10],u=p;let{ReferenceChildLink:$,handleEditReference:L,groupIndex:B,routerPanesState:O}=k;_[11]!==B||_[12]!==O?(m=O[B+1]?.[0].params||{},_[11]=B,_[12]=O,_[13]=m):m=_[13];let H=m,N=O.length,{parentRefPath:Y}=H;_[14]!==B||_[15]!==Y||_[16]!==N?(f=Y?{path:(0,R.sH)(Y),state:B>=N-1?"none":B>=N-2?"selected":"pressed"}:{path:[],state:"none"},_[14]=B,_[15]=Y,_[16]=N,_[17]=f):f=_[17],h=f;let{t:V}=(0,x.Bdt)(eB);if("*"===T.type&&!M){let e,t;return _[18]!==V?(e=V("panes.document-pane.document-not-found.loading"),_[18]=V,_[19]=e):e=_[19],_[20]!==I||_[21]!==e?(t=(0,s.jsx)(nE,{flex:2.5,minWidth:320,paneKey:I,title:e}),_[20]=I,_[21]=e,_[22]=t):t=_[22],t}if(!C){let e,t,n,i,r;return _[23]!==V?(e=V("panes.document-pane.document-not-found.title"),_[23]=V,_[24]=e):e=_[24],_[25]!==T.id?(t={id:T.id},_[25]=T.id,_[26]=t):t=_[26],_[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sF},_[27]=n):n=_[27],_[28]!==V||_[29]!==t?(i=(0,s.jsx)(o.BJ,{space:4,children:(0,s.jsx)(o.EY,{as:"p",children:(0,s.jsx)(x.HTc,{t:V,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),_[28]=V,_[29]=t,_[30]=i):i=_[30],_[31]!==I||_[32]!==i||_[33]!==e?(r=(0,s.jsx)(nw,{flex:2.5,minWidth:320,paneKey:I,title:e,children:i}),_[31]=I,_[32]=i,_[33]=e,_[34]=r):r=_[34],r}let U=`${C}-${T.id}-${E||""}`;return _[35]!==z||_[36]!==T.id||_[37]!==T.type?(g=(0,s.jsx)(z,{documentId:T.id,documentType:T.type}),_[35]=z,_[36]=T.id,_[37]=T.type,_[38]=g):g=_[38],_[39]!==T.id||_[40]!==T.type||_[41]!==g?(y=(0,s.jsx)(nT,{documentId:T.id,documentType:T.type,children:g}),_[39]=T.id,_[40]=T.type,_[41]=g,_[42]=y):y=_[42],_[43]!==T.id||_[44]!==T.type||_[45]!==y?(b=(0,s.jsx)(n_,{documentId:T.id,documentType:T.type,children:y}),_[43]=T.id,_[44]=T.type,_[45]=y,_[46]=b):b=_[46],_[47]!==$||_[48]!==h||_[49]!==L||_[50]!==b||_[51]!==P?(j=(0,s.jsx)(x.NO5,{EditReferenceLinkComponent:$,onEditReference:L,initialValueTemplateItems:P,activePath:h,children:b}),_[47]=$,_[48]=h,_[49]=L,_[50]=b,_[51]=P,_[52]=j):j=_[52],_[53]!==u||_[54]!==j||_[55]!==U?(v=(0,s.jsx)(sY,{...u,children:j},U),_[53]=u,_[54]=j,_[55]=U,_[56]=v):v=_[56],v}function sF(e){let{children:t}=e;return(0,s.jsx)("code",{children:t})}function sW(e,t){let n,i;let r=(0,l.c)(8);r[0]!==t?(n=void 0===t?{}:t,r[0]=t,r[1]=n):n=r[1];let s=n,o=(0,x.bgA)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let l=e.template||s.template;r[2]!==l||r[3]!==o?(t=l?o.find(e=>e.id===l):void 0,r[2]=l,r[3]=o,r[4]=t):t=r[4];let a=t?.schemaType;if(!a){i=e;break e}r[5]!==a||r[6]!==e?(n={...e,type:a},r[5]=a,r[6]=e,r[7]=n):n=r[7],i=n}return i}let sK={by:[{field:"_updatedAt",direction:"desc"}]},sQ={},sq=(0,I.I4)(o.az)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,sJ=(0,I.I4)(o.az)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,sZ=[...Array(30).keys()];function sG(e){let t,n;let i=(0,l.c)(4),{layout:r}=e;return i[0]!==r?(t=sZ.map(e=>(0,s.jsx)(x.m6P,{isPlaceholder:!0,layout:r},e)),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,s.jsx)(o.BJ,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function sX(e){let t,n,i,r,a,c,u;let p=(0,l.c)(59),{childItemId:m,error:h,filterIsSimpleTypeConstraint:f,hasMaxItems:g,hasSearchQuery:y,isActive:b,isLazyLoading:j,isLoading:v,items:_,layout:w,loadingVariant:I,onEndReached:S,onRetry:E,paneTitle:k,searchInputElement:T,showIcons:C}=e,D=(0,x.pDY)(),{collapsed:R}=eq(),{collapsed:z,index:P}=tu(),[A,M]=(0,d.useState)(!z),{t:$}=(0,x.Bdt)(eB);p[0]!==S||p[1]!==A?(t=()=>{A&&S()},p[0]=S,p[1]=A,p[2]=t):t=p[2];let L=t;p[3]!==z?(n=()=>{if(z)return;let e=setTimeout(()=>{M(!0)},0);return()=>{clearTimeout(e)}},p[3]=z,p[4]=n):n=p[4],p[5]!==z||p[6]!==_?(i=[z,_],p[5]=z,p[6]=_,p[7]=i):i=p[7],(0,d.useEffect)(n,i),p[8]!==m||p[9]!==g||p[10]!==b||p[11]!==j||p[12]!==_.length||p[13]!==w||p[14]!==D||p[15]!==C||p[16]!==$?(r=(e,t)=>{let{activeIndex:n}=t,i=(0,x.IMx)(e._id),r=m===i,l=!b&&r,a=b&&r,d=n===_.length-1,c=d&&j,u=d&&g;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t2,{icon:!1!==C&&void 0,id:i,layout:w,marginBottom:1,pressed:l,schemaType:D.get(e._type),selected:a,value:e}),c&&(0,s.jsx)(x.gd4,{}),u&&(0,s.jsx)(o.az,{marginY:1,paddingX:3,paddingY:4,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,size:1,children:$("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},p[8]=m,p[9]=g,p[10]=b,p[11]=j,p[12]=_.length,p[13]=w,p[14]=D,p[15]=C,p[16]=$,p[17]=r):r=p[17];let B=r;e:{let e,t;if(y){let e,t;p[18]!==$?(e=$("panes.document-list-pane.no-documents.text"),p[18]=$,p[19]=e):e=p[19],p[20]!==e?(t=(0,s.jsx)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(o.mc,{width:1,children:(0,s.jsx)(o.az,{paddingX:4,paddingY:5,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,children:e})})})}),p[20]=e,p[21]=t):t=p[21],a=t;break e}p[22]!==f||p[23]!==$?(e=$(f?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),p[22]=f,p[23]=$,p[24]=e):e=p[24],p[25]!==e?(t=(0,s.jsx)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(o.mc,{width:1,children:(0,s.jsx)(o.az,{paddingX:4,paddingY:5,children:(0,s.jsx)(o.EY,{align:"center",muted:!0,children:e})})})}),p[25]=e,p[26]=t):t=p[26],a=t}let O=a;t:{let e,t;if(!A){c=null;break t}if(h){let e,t,n,i,r,l,a;p[27]!==$?(e=$("panes.document-list-pane.error.title"),p[27]=$,p[28]=e):e=p[28],p[29]!==e?(t=(0,s.jsx)(o.DZ,{as:"h3",children:e}),p[29]=e,p[30]=t):t=p[30],p[31]!==h.message?(n={error:h.message},p[31]=h.message,p[32]=n):n=p[32],p[33]===Symbol.for("react.memo_cache_sentinel")?(i={Code:s0},p[33]=i):i=p[33],p[34]!==$||p[35]!==n?(r=(0,s.jsx)(o.EY,{as:"p",children:(0,s.jsx)(x.HTc,{t:$,i18nKey:"panes.document-list-pane.error.text",values:n,components:i})}),p[34]=$,p[35]=n,p[36]=r):r=p[36],p[37]!==h||p[38]!==E?(l=(0,s.jsx)(x.kbS,{error:h,eventId:null,onRetry:E}),p[37]=h,p[38]=E,p[39]=l):l=p[39],p[40]!==r||p[41]!==l||p[42]!==t?(a=(0,s.jsx)(o.so,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,s.jsx)(o.mc,{width:1,children:(0,s.jsxs)(o.BJ,{paddingX:4,paddingY:5,space:4,children:[t,r,l]})})}),p[40]=r,p[41]=l,p[42]=t,p[43]=a):a=p[43],c=a;break t}if(!v&&0===_.length){c=O;break t}if("initial"===I&&v){let e;p[44]!==w?(e=(0,s.jsx)(ts,{ms:300,children:(0,s.jsx)(sG,{layout:w})}),p[44]=w,p[45]=e):e=p[45],c=e;break t}if("spinner"===I&&v){c=null;break t}let n=`${P}-${z}`,i="subtle"===I?.8:1;p[46]!==L||p[47]!==_||p[48]!==n||p[49]!==k||p[50]!==B||p[51]!==T?(e=(0,s.jsx)(sJ,{children:(0,s.jsx)(x.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:k,canReceiveFocus:!0,inputElement:T,itemHeight:51,items:_,onEndReached:L,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:B,wrapAround:!1},n)}),p[46]=L,p[47]=_,p[48]=n,p[49]=k,p[50]=B,p[51]=T,p[52]=e):e=p[52],p[53]!==i||p[54]!==e?(t=(0,s.jsx)(sq,{overflow:"hidden",height:"fill",$opacity:i,children:e}),p[53]=i,p[54]=e,p[55]=t):t=p[55],c=t}let H=c,N=R||"initial"===I?"hidden":"auto";return p[56]!==H||p[57]!==N?(u=(0,s.jsx)(tp,{"data-testid":"document-list-pane",overflow:N,children:H}),p[56]=H,p[57]=N,p[58]=u):u=p[58],u}function s0(e){let{children:t}=e;return(0,s.jsx)("code",{children:t})}function s1(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base?null:"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,eP.qg)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let s2=["_id","_type","_createdAt","_updatedAt","_rev"];function s3(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[r,...s]=n;if(!("fields"in t))return"";let l=t.fields.find(e=>e.name===r);if(!l){if(!s2.includes(r)){let e=`The current ordering config targeted the nonexistent field "${r}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in l.type&&"reference"===l.type.name){let t=l.type.to;return`${r}->{${t.map(t=>e(t,s)).join(",")}}`}let o=s.length>0&&e(l.type,s),a=o?`{${o}}`:"";return s.length>0?`${r}${a}`:r})(e,t.field.split("."),n)).join(", ")}let s4=(0,x.pTS)({maxSize:100});function s5(e){let{client:t,schema:n,sort:i,perspective:r,limit:s,params:l,filter:o,searchQuery:a,staticTypeNames:d,maxFieldDepth:c,searchStrategy:u}=e,p=i.by,m=i?.extendedProjection,h=(0,K.v)(()=>t.listen(`*[${o}]`,l,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,Q.Z)((e,t)=>0===t&&"welcome"!==e.type?(0,q.$)(()=>Error("reconnect"===e.type?"Could not establish EventSource connection":`Received unexpected type of first event "${e.type}"`)):(0,M.of)(e)),(0,J.u)()),[f,g]=(0,Z.j)(h,e=>"welcome"===e.type),y=JSON.stringify({filter:o,limit:s,params:l,searchQuery:a,perspective:r,sort:i,staticTypeNames:d});return(0,H.h)(f.pipe((0,G.s)(1)),g.pipe((0,X.c)(1e3,ee.E,{leading:!0,trailing:!0}))).pipe((0,eM.L)(e=>(d?(0,M.of)(d):t.observable.fetch(`array::unique(*[${o}][]._type)`,l)).pipe((0,Q.Z)(h=>{let f=(0,x._oG)(n,d||[]).filter(e=>!!h.includes(e.name)&&(s3(e,i.by,!0),!0)),g=(0,x.XZv)(f,t,{filter:o,params:l,strategy:u,maxDepth:c}),y=()=>g({query:a||"",types:f},{__unstable_extendedProjection:m,comments:[`findability-source: ${a?"list-query":"list"}`],limit:s,skipSortByScore:!0,sort:p,perspective:r}).pipe((0,O.T)(e=>e.hits.map(({hit:e})=>e)));return"mutation"===e.type&&"query"!==e.visibility?(0,P.O)(1200).pipe((0,Q.Z)(y)):y()}))),s4(y),(0,O.T)(({fromCache:e,value:t})=>({fromCache:e,documents:t})))}let s6={error:null,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},s7="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",s8=(0,I.i7)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,s9=(0,I.i7)`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,le=(0,I.I4)(u.Nl1)`
  animation: ${s8} 500ms linear infinite;
`,lt=(0,I.I4)(u.Nl1)`
  animation: ${s8} 1500ms linear infinite;
  opacity: 0.4;
`,ln=(0,I.I4)(u.Nl1)`
  animation:
    ${s8} 1500ms linear infinite,
    ${s9} 1000ms linear;
  opacity: 0.4;
`,li=(0,d.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:r,sortOrder:l,layout:a}=e,c=(0,x.pDY)(),p=(0,x.K0D)(),{perspectiveStack:m}=(0,x.QO2)(),{displayOptions:h,options:f}=i,{apiVersion:y,filter:b}=f,j=lP(f.params||sQ),v=(0,d.useMemo)(()=>{let e=s1(b,j);return e?.length===1?e[0]:null},[b,j]),_=h?.showIcons!==!1,{t:w}=(0,x.Bdt)(eB),{title:I}=(0,x.FP1)(i),[S,E]=(0,d.useState)(""),[T,C]=(0,d.useState)(""),[D,A]=(0,d.useState)(null),$=v&&l?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=R.sH(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,g.tA)(e)||(0,g.wr)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,g.do)(t)){i=t;continue}let[r,s]=t.to||[];if(s||!r)return;i=r}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(l,c.get(v)):l,L=(0,x.$6H)($),{error:N,isLoadingFullList:U,isLoading:F,items:W,fromCache:K,onLoadFullList:q,onRetry:Z}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:r,perspective:s,apiVersion:l}=e,o=(0,x.tH7)({...x.miu,apiVersion:l||x.miu.apiVersion}),{strategy:a}=(0,x.hA9)().search,c=(0,x.pDY)(),u=(0,x.xx_)(),p=(0,d.useMemo)(()=>s1(t,n),[t,n]),[[m,h]]=(0,d.useState)(()=>(0,eA.t)()),[[f,g]]=(0,d.useState)(()=>(0,eA.t)()),y=(0,d.useMemo)(()=>{let e={client:o,filter:t,limit:100,params:n,schema:c,perspective:s,searchQuery:r||"",sort:i||sK,staticTypeNames:p,maxFieldDepth:u,searchStrategy:a},l=s5(e).pipe((0,ed.t)({refCount:!0,bufferSize:1})),d=f.pipe((0,em.E)(l),(0,B.p)(([,e])=>e?.documents.length===100),(0,G.s)(1),(0,Q.Z)(()=>(0,V.x)((0,M.of)({type:"loadFullList"}),s5({...e,limit:2e3}).pipe((0,O.T)(e=>({type:"result",result:e}))))),(0,J.u)());return(0,H.h)(l.pipe((0,O.T)(e=>({type:"result",result:e})),(0,eh.Q)(d)),d).pipe((0,Y.W)((e,t)=>{var n;return(0,V.x)((0,M.of)({type:"error",error:(n=e)instanceof Error?n:"object"==typeof n&&null!==n&&"message"in n&&"string"==typeof n.message?Error(`${n.message} ${s7}`):Error(`${String(n)} ${s7}`)}),(0,H.h)((0,z.R)(window,"online"),m).pipe((0,G.s)(1),(0,Q.Z)(()=>t)))}),(0,ef.S)((e,t)=>{if("error"===t.type)return{...e,error:t.error};if("result"===t.type){var n;return{...e,error:null,fromCache:t.result.fromCache,isLoading:!1,items:(n=t.result.documents,(0,x.Zck)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error("Unexpected")},s6))},[o,t,n,c,s,r,i,p,u,a,f,m]),{error:b,items:j,isLoading:v,fromCache:_,isLoadingFullList:w}=(0,k.J)(y,s6);return{error:b,onRetry:h,isLoading:v,items:j,fromCache:_,onLoadFullList:g,isLoadingFullList:w}}({apiVersion:y,filter:b,perspective:m,params:j,searchQuery:S?.trim(),sortOrder:L}),X=F||p.loading,ee=(0,k.N)(e=>e.pipe((0,O.T)(e=>e.target.value),(0,et.M)(C),(0,en.s)(e=>""===e?(0,M.of)(""):(0,P.O)(300)),(0,et.M)(E))),ei=(0,d.useCallback)(()=>{E(""),C("")},[]),er=(0,d.useCallback)(e=>{"Escape"===e.key&&ei()},[ei]),[es,el]=(0,d.useState)();(0,d.useEffect)(()=>{es||X||el(r)},[es,X,r]),(0,d.useEffect)(()=>{ei(),el()},[r,ei]);let eo=(0,d.useMemo)(()=>X&&es===r?"spinner":K?"subtle":"initial",[es,K,X,r]),ea=(0,d.useMemo)(()=>"spinner"===eo?le:T&&"subtle"===eo?lt:u.WIv,[eo,T]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.az,{paddingX:3,paddingBottom:3,children:(0,s.jsx)(o.ks,{"aria-label":w("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!S,disabled:!!N,fontSize:[2,2,1],icon:ea,iconRight:"subtle"!==eo||T?null:ln,onChange:ee,onClear:ei,onKeyDown:er,padding:2,placeholder:w("panes.document-list-pane.search-input.placeholder"),radius:2,ref:A,spellCheck:!1,value:T})}),(0,s.jsx)(sX,{childItemId:t,error:N,filterIsSimpleTypeConstraint:!!v,hasMaxItems:2e3===W.length,hasSearchQuery:!!S,isActive:n,isLazyLoading:U,isLoading:X,items:W,layout:a,loadingVariant:eo,onEndReached:q,onRetry:Z,paneTitle:I,searchInputElement:D,showIcons:_},r)]})}),lr=(0,d.memo)(e=>{let t,n,i,o,a,d,c,p,m,h;let f=(0,l.c)(27),{contentAfter:x,index:g,initialValueTemplates:y,menuItemGroups:b,menuItems:j,setLayout:v,setSortOrder:_,title:w}=e;f[0]!==y?(t=void 0===y?[]:y,f[0]=y,f[1]=t):t=f[1];let I=t;f[2]!==b?(n=void 0===b?[]:b,f[2]=b,f[3]=n):n=f[3];let S=n;f[4]!==j?(i=void 0===j?[]:j,f[4]=j,f[5]=i):i=f[5];let E=i,{features:k}=nP(),{collapsed:T,isLast:C}=tu(),D=C&&!T?-1:0;return f[6]!==v?(a=e=>{let{layout:t}=e;v(t)},f[6]=v,f[7]=a):a=f[7],f[8]!==_?(d=e=>{_(e)},f[8]=_,f[9]=d):d=f[9],f[10]!==a||f[11]!==d?(c={setLayout:a,setSortOrder:d},f[10]=a,f[11]=d,f[12]=c):c=f[12],o=c,f[13]!==o||f[14]!==I||f[15]!==S||f[16]!==E?(p=(0,s.jsx)(tG,{initialValueTemplateItems:I,actionHandlers:o,menuItemGroups:S,menuItems:E}),f[13]=o,f[14]=I,f[15]=S,f[16]=E,f[17]=p):p=f[17],f[18]!==k.backButton||f[19]!==g?(m=k.backButton&&g>0&&(0,s.jsx)(r.$n,{as:eQ,"data-as":"a",icon:u.A60,mode:"bleed",tooltipProps:{content:"Back"}}),f[18]=k.backButton,f[19]=g,f[20]=m):m=f[20],f[21]!==x||f[22]!==p||f[23]!==m||f[24]!==D||f[25]!==w?(h=(0,s.jsx)(r.vE,{children:(0,s.jsx)(tD,{actions:p,backButton:m,contentAfter:x,tabIndex:D,title:w})}),f[21]=x,f[22]=p,f[23]=m,f[24]=D,f[25]=w,f[26]=h):h=f[26],h});function ls(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:r}=n.options.meta||{},l=(0,d.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,r=e<i?e:i,s=e<i?i:e,l=n.getRowModel().flatRows.slice(r,s+1).map(({id:e})=>e),o=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...l,...o].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,r,n]);return(0,s.jsx)(o.Sc,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:l})}lr.displayName="Memo(PaneHeader)";let ll=()=>{let e=(0,d.useContext)(c.YW);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e};function lo({children:e,table:t}){let[n,i]=(0,d.useState)(null),[r,l]=(0,d.useState)([]),o=(0,d.useCallback)((e=null)=>{n?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),i(e),l([])},[n]),a=(0,d.useCallback)(()=>o(),[o]),u=(0,d.useCallback)(e=>{if(!n)return;let i=t.getVisibleLeafColumns(),r=i.findIndex(e=>e.id===n.colId)+("left"===e?-1:1);r<0||r>=i.length||o({colId:i[r].id,rowIndex:n.rowIndex,state:"selected"})},[o,n,t]),p=(0,d.useCallback)(e=>{n&&l(t=>{let{rowIndex:i}=n,r=t=>t+("down"===e?1:-1);if(!t.length){let e=r(i);return e<0?[]:[e]}let s=r(t[t.length-1]);return s<0?t:s===i?[]:t.includes(s)?t.slice(0,-1):[...t,s]})},[n]),m=(0,d.useCallback)((e,t)=>{o({colId:e,rowIndex:t,state:"selected"})},[o]),h=(0,d.useCallback)(()=>{n&&(r.length?l([]):o("selected"===n.state?null:{...n,state:"selected"}))},[o,n,r.length]),f=(0,d.useCallback)((e,t)=>{if(!n)return;let i="ArrowDown"===t?"down":"up",r="down"===i?1:-1;if(e)p(i);else{let e=n.rowIndex+r;if(e<0)return;m(n.colId,e)}},[p,n,m]),x=(0,d.useCallback)(e=>{if(!n)return;let{key:t,shiftKey:i}=e;switch(t){case"Shift":break;case"Escape":h();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),f(i,t);break;case"ArrowLeft":case"ArrowRight":"selected"===n.state&&(e.preventDefault(),u("ArrowLeft"===t?"left":"right"))}},[n,h,f,u]),g=(0,d.useCallback)(e=>{n&&(document.getElementById(`cell-${n.colId}-${n.rowIndex}`)?.contains(e.target)||a())},[a,n]);(0,d.useEffect)(()=>(n&&(document.addEventListener("keydown",x),document.addEventListener("click",g)),()=>{n&&(document.removeEventListener("keydown",x),document.removeEventListener("click",g))}),[g,x,n]);let y=(0,d.useCallback)(()=>i(e=>e?{...e,state:"focused"}:null),[]),b=(0,d.useCallback)((e,t)=>n?.colId!==e?null:n.rowIndex===t?"focused"===n.state?"focused":"selectedAnchor":r.includes(t)?"selectedRange":null,[n,r]),j=(0,d.useCallback)(()=>{n&&o({colId:n.colId,rowIndex:n.rowIndex+1,state:"selected"})},[o,n]),v=(0,d.useMemo)(()=>({focusAnchorCell:y,resetFocusSelection:a,setSelectedAnchorCell:m,getStateByCellId:b,submitFocusedCell:j}),[y,a,m,b,j]);return(0,s.jsx)(c.YW.Provider,{value:v,children:e})}let la=I.I4.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,ld=(0,I.I4)(la)`
  position: sticky;
  z-index: 2;
`;function lc(e){let{getValue:t,column:n,row:i,fieldType:r}=e,l=`cell-${n.id}-${i.index}`,[a,c]=(0,d.useState)(t()),[u,p]=(0,d.useState)(!1),m=(0,d.useRef)(null),{focusAnchorCell:h,resetFocusSelection:f,setSelectedAnchorCell:x,getStateByCellId:g,submitFocusedCell:y}=ll(),b=g(n.id,i.index),j=(0,d.useCallback)(()=>{x(n.id,i.index),h()},[n.id,h,i.index,x]),{patchDocument:v}=e.table.options.meta||{},_=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},w=(0,d.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===b&&_(),"focused"===b&&y())},[b,y]),I=(0,d.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(c(t),v?.(i.id,n.id,t))},[n.id,v,i.id]),S=(0,d.useCallback)(()=>{navigator.clipboard.writeText(a.toString())},[a]);(0,d.useEffect)(()=>(("selectedAnchor"===b||"focused"===b)&&document.addEventListener("keydown",w),("selectedAnchor"===b||"selectedRange"===b)&&document.addEventListener("paste",I),"selectedAnchor"===b&&document.addEventListener("copy",S),()=>{("selectedAnchor"===b||"focused"===b)&&document.removeEventListener("keydown",w),("selectedAnchor"===b||"selectedRange"===b)&&document.removeEventListener("paste",I),"selectedAnchor"===b&&document.removeEventListener("copy",S)}),[l,b,n.id,g,S,w,I,i.index]);let E=()=>"focused"===b?"2px solid blue":"selectedRange"===b?"1px solid green":"selectedAnchor"===b?"1px solid blue":"1px solid transparent",k={onFocus:j,onBlur:()=>{u&&(v?.(i.id,n.id,a),p(!1)),f()},onMouseDown:e=>{2===e.detail?_():(e.preventDefault(),x(n.id,i.index))},"aria-selected":!!b,"data-testid":l,id:l,ref:e=>{m.current=e}};return"boolean"===r.name?(0,s.jsxs)(o.l6,{...k,onChange:()=>null,radius:0,style:{boxShadow:"none",border:E(),padding:0},value:JSON.stringify(a),children:[(0,s.jsx)("option",{value:"True",children:"True"}),(0,s.jsx)("option",{value:"False",children:"False"})]}):(0,s.jsx)(o.ks,{...k,size:0,radius:0,border:!1,style:{border:E(),padding:"22px 16px"},value:"string"==typeof a||"number"==typeof a?a:JSON.stringify(a),onChange:e=>{p(!0),c(e.target.value)}})}function lu(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,s.jsx)(t?ld:la,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:(0,e$.Kv)(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let lp=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,r=(0,d.useMemo)(()=>(0,x.TU6)(t,i,n.original._id),[t,n.original._id,i]),l=(0,x.r0j)(n.original._id),{snapshot:a,isLoading:c}=(0,k.J)(r,{snapshot:null,isLoading:!0});if(c)return(0,s.jsx)(o.EY,{size:1,muted:!0,children:"Loading..."});let u=a?.title??"Untitled";return(0,s.jsxs)(o.so,{align:"center",gap:3,children:[(0,s.jsx)(x.ZDR,{draft:l.draft,published:l.published,versions:void 0}),(0,s.jsx)(o.EY,{size:1,children:u})]})},lm=(0,eL.FB)(),lh=["string","number","boolean"],lf=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:r}=n;return lh.includes(i.name)?[...e,lm.accessor(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,s.jsx)(lc,{...e,fieldType:i})})]:"object"===i.name&&(0,g.$d)(i)&&!t?[...e,lm.group({header:r,columns:lf(i,n.name)})]:e},[]),lx=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?lx(e.columns):[]);function lg({table:e}){let{t}=(0,x.Bdt)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,d.useCallback)(()=>{e.resetColumnVisibility()},[e]),l=e=>()=>{e.toggleVisibility()},a=t=>{let i=t.getIsVisible(),r=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return n&&!i||r&&i};return(0,s.jsx)(r.IU,{button:(0,s.jsx)(r.$n,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,s.jsx)(o.W1,{padding:3,paddingTop:4,style:{width:240},children:(0,s.jsxs)(o.so,{direction:"column",height:"fill",gap:3,children:[(0,s.jsx)(o.EY,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,s.jsx)(o.so,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,s.jsx)(o.BJ,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(e=>(0,s.jsxs)(o.so,{marginY:2,align:"center",children:[(0,s.jsx)(o.Sc,{readOnly:a(e),checked:e.getIsVisible(),onChange:l(e),id:`col-visibility-${e.id}`,style:{display:"block"}}),(0,s.jsx)(o.az,{flex:1,paddingLeft:3,children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)("label",{htmlFor:`col-visibility-${e.id}`,children:e.columnDef.header?.toString()})})})]},e.id))})}),(0,s.jsx)(r.$n,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let ly=(0,I.I4)(o.so)`
  flex-shrink: 0;
`;function lb(){let e,t,n;let i=(0,l.c)(5),{state:r}=(0,x.Z_W)(),{filtersVisible:o}=r;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(x.w1_,{}),i[0]=e):e=i[0],i[1]!==o?(t=o&&(0,s.jsx)(x.CuW,{showTypeFilter:!1}),i[1]=o,i[2]=t):t=i[2],i[3]!==t?(n=(0,s.jsxs)(ly,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let lj=I.I4.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,lv=(0,I.I4)(lj)`
  position: sticky;
  z-index: 2;
`,l_=I.I4.div`
  visibility: hidden;

  ${lj}:hover & {
    visibility: visible;
  }
`;function lw(e){let{header:t,headerGroup:n}=e,{t:i}=(0,x.Bdt)(),l=t.column.getIsPinned(),a=n.depth>0&&!t.column.parent?null:(0,s.jsx)(o.EY,{size:1,weight:"semibold",textOverflow:"ellipsis",children:(0,e$.Kv)(t.column.columnDef.header,t.getContext())}),d=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),c=l&&t.column.getIsLastColumn("left")?2:1;return(0,s.jsx)(l?lv:lj,{style:{left:t.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,s.jsxs)(o.so,{justify:"space-between",marginX:2,align:"baseline",children:[(0,s.jsx)(r.m_,{delay:500,content:a,children:(0,s.jsx)(o.az,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:a})}),d&&(0,s.jsx)(l_,{children:(0,s.jsx)(r.IU,{button:(0,s.jsx)(r.$n,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:u.riS,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,s.jsx)(o.W1,{children:(0,s.jsx)(r.Dr,{text:i("sheet-list.hide-field"),icon:u.USm,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function lI({table:e}){return(0,s.jsx)(r.vE,{children:(0,s.jsxs)(o.so,{gap:3,align:"center",children:[(0,s.jsx)(r.$n,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:u.Zxx,tooltipProps:{content:"Go to first page"}}),(0,s.jsx)(r.$n,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:u.YJP,tooltipProps:{content:"Go to previous page"}}),(0,s.jsxs)(o.EY,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,s.jsx)(r.$n,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:u.vKP,tooltipProps:{content:"Go to next page"}}),(0,s.jsx)(r.$n,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:u.yBO,tooltipProps:{content:"Go to last page"}}),(0,s.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})})}function lS(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,r={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:r}}}default:return e}}let lE={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},lk=(0,I.I4)(o.so)`
  height: 100%;
`,lT=I.I4.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,lC=I.I4.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function lD({documentSchemaType:e}){let{dispatch:t,state:n}=(0,x.Z_W)(),{columns:i,initialColumnsVisibility:r}=function(e){let t=(0,x.yKO)(),n=(0,d.useMemo)(()=>e?[lm.display({id:"selected",enableHiding:!1,header:e=>(0,s.jsxs)(o.az,{children:[(0,s.jsx)(o.Sc,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:ls}),lm.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,s.jsx)(lp,{...n,documentPreviewStore:t,schemaType:e})}),...lf(e)]:[],[t,e]),[i]=(0,d.useMemo)(()=>lx(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:a}=function(e){let t,n,i,r,s,o;let a=(0,l.c)(12),{typeName:c}=e,{state:u}=(0,x.Z_W)();a[0]!==u.result.hits?(n=new Map,u.result.hits.forEach(e=>n.set((0,x.IMx)(e.hit._id),e.hit)),a[0]=u.result.hits,a[1]=n):n=a[1],t=n;let p=`_type == "${c}"`;a[2]!==p?(i={filter:p},a[2]=p,a[3]=i):i=a[3];let{data:m,isLoading:h}=function(e){let t,n,i,r,s,o,a,c,u,p;let m=(0,l.c)(25),{filter:h,params:f,apiVersion:g}=e,y=`*[${h}][0...2000]`,b=g||x.miu.apiVersion;m[0]!==b?(t={...x.miu,apiVersion:b},m[0]=b,m[1]=t):t=m[1];let j=(0,x.tH7)(t);m[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},m[2]=n):n=m[2];let[v,_]=(0,d.useReducer)(lS,n),[w,I]=(0,d.useState)(null!==j),[S,E]=(0,d.useState)(null);m[3]!==y||m[4]!==j||m[5]!==f?(i=async()=>{if(!j){I(!1);return}try{let e=await j.fetch(y,f);_({type:"DOCUMENTS_SET",documents:e}),I(!1)}catch(e){E(e)}},m[3]=y,m[4]=j,m[5]=f,m[6]=i):i=m[6];let k=i;m[7]!==k?(r=async e=>{if("welcome"===e.type&&(I(!0),await k(),I(!1)),"reconnect"===e.type&&I(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&_({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_UPDATED",payload:t})}}},m[7]=k,m[8]=r):r=m[8];let T=r;e:{let e;if(!j){let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,M.of)(),m[9]=e):e=m[9],s=e;break e}if(m[10]!==y||m[11]!==j.observable||m[12]!==f){let t;m[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(E(e),(0,M.of)(e)),m[14]=t):t=m[14],e=j.observable.listen(y,f,lE).pipe((0,Y.W)(t)),m[10]=y,m[11]=j.observable,m[12]=f,m[13]=e}else e=m[13];s=e}let C=s;return m[15]!==T||m[16]!==C?(o=()=>{let e=C.subscribe(T);return()=>{e?.unsubscribe()}},a=[T,C],m[15]=T,m[16]=C,m[17]=o,m[18]=a):(o=m[17],a=m[18]),(0,d.useEffect)(o,a),m[19]!==v.documents?(u=Object.values(Object.keys(v.documents).reduce((e,t)=>{let n=v.documents[t],i=n._id===(0,x.T4)(n._id),r=i?n._id:(0,x.T4)(n._id);return e[r]&&!i||(e[r]=n),e},{})),m[19]=v.documents,m[20]=u):u=m[20],c=u,m[21]!==c||m[22]!==S||m[23]!==w?(p={data:c,isLoading:w,error:S},m[21]=c,m[22]=S,m[23]=w,m[24]=p):p=m[24],p}(i);if(a[4]!==m||a[5]!==t){let e;a[7]!==t?(e=e=>t.has((0,x.IMx)(e._id)),a[7]=t,a[8]=e):e=a[8],s=m.filter(e),a[4]=m,a[5]=t,a[6]=s}else s=a[6];return r=s,a[9]!==r||a[10]!==h?(o={data:r,isLoading:h},a[9]=r,a[10]=h,a[11]=o):o=a[11],o}({typeName:e.name}),[c,u]=(0,d.useState)(null),p=n.result.hits.length,m=(0,e$.N4)({data:a,columns:i,getCoreRowModel:(0,eL.HT)(),getFilteredRowModel:(0,eL.hM)(),getPaginationRowModel:(0,eL.kW)(),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:r},getRowId:e=>e._id,meta:{selectedAnchor:c,setSelectedAnchor:u,patchDocument:(e,t,n)=>null}}),{rows:h}=m.getRowModel();(0,d.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,d.useCallback)(e=>(0,s.jsx)(o.az,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,d.createElement)(lu,{...t,key:e.original._id+t.id}))},e.original._id+e.id),[]),g=`Total: ${p} rows, showing ${h.length} rows`;return(0,s.jsxs)(lk,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,s.jsxs)(o.so,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,s.jsxs)(o.so,{direction:"row",align:"center",children:[(0,s.jsx)(lb,{}),(0,s.jsx)(o.EY,{size:0,muted:!0,children:g})]}),(0,s.jsx)(lg,{table:m})]}),(0,s.jsx)(lT,{children:(0,s.jsx)(lo,{table:m,children:(0,s.jsxs)(lC,{children:[(0,s.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,s.jsx)(o.az,{as:"tr",children:e.headers.map(t=>(0,s.jsx)(lw,{header:t,headerGroup:e},t.id))},e.id))}),(0,s.jsx)("tbody",{children:m.getRowModel().rows.map(f)})]})})}),(0,s.jsx)(o.so,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,s.jsx)(lI,{table:m})})]})}function lR(e){let t=(0,x.pDY)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,g.JR)(i))throw Error(`Schema type "${n}" not found or not a document schema`);return(0,s.jsx)(x.YLU,{children:(0,s.jsx)(lD,{...e,documentSchemaType:i})})}let lz=e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:eC(n?.by,e?.params?.by||x.Mlv)}:{...e,selected:!1})};function lP(e){let[t,n]=(0,d.useState)(e);return eD(t,e)?t:(n(e),e)}let lA=(0,d.memo)(function(e){let t,n,i,r,o,a,c,u,p,m,h;let f=(0,l.c)(36),{index:g,isSelected:y,pane:b,paneKey:j}=e,{name:v}=(0,x.For)(),{defaultLayout:_,initialValueTemplates:w,menuItemGroups:I,menuItems:S,options:E}=b,k=void 0===w?x.Mlv:w,{defaultOrdering:T,filter:C}=E,D=void 0===T?x.Mlv:T,R=lP(E.params||sQ),z=b.source;e:{let e;f[0]!==C||f[1]!==R?(e=s1(C,R),f[0]=C,f[1]=R,f[2]=e):e=f[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let P=t,[A,M]=nW("layout",P??b.id,void 0===_?"default":_),{title:$}=(0,x.FP1)(b);f[3]!==D?(i=D?.length>0?{by:D}:sK,f[3]=D,f[4]=i):i=f[4],n=i;let[L,B]=nW("sort-order",P??b.id,n);f[5]!==A||f[6]!==S||f[7]!==L?(o=lz({menuItems:S,sortOrderRaw:L,layout:A}),f[5]=A,f[6]=S,f[7]=L,f[8]=o):o=f[8],r=o;let O="sheetList"===A;f[9]!==O||f[10]!==A||f[11]!==e||f[12]!==L?(a=O?(0,d.createElement)(lR,{...e,key:e.pane.id}):(0,s.jsx)(li,{...e,sortOrder:L,layout:A}),f[9]=O,f[10]=A,f[11]=e,f[12]=L,f[13]=a):a=f[13];let H=a,N=z||v;return f[14]!==O?(c=O?{}:{currentMaxWidth:350,maxWidth:640},f[14]=O,f[15]=c):c=f[15],f[16]!==b.source?(u=iN,f[16]=b.source,f[17]=u):u=f[17],f[18]!==g||f[19]!==k||f[20]!==I||f[21]!==r||f[22]!==M||f[23]!==B||f[24]!==$?(p=(0,s.jsx)(lr,{index:g,initialValueTemplates:k,menuItemGroups:I,menuItems:r,setLayout:M,setSortOrder:B,title:$}),f[18]=g,f[19]=k,f[20]=I,f[21]=r,f[22]=M,f[23]=B,f[24]=$,f[25]=p):p=f[25],f[26]!==y||f[27]!==j||f[28]!==H||f[29]!==c||f[30]!==u||f[31]!==p?(m=(0,s.jsxs)(td,{"data-ui":"DocumentListPane",id:j,minWidth:320,...c,selected:y,children:[u,p,H]}),f[26]=y,f[27]=j,f[28]=H,f[29]=c,f[30]=u,f[31]=p,f[32]=m):m=f[32],f[33]!==m||f[34]!==N?(h=(0,s.jsx)(x.NeO,{name:N,children:m}),f[33]=m,f[34]=N,f[35]=h):h=f[35],h});lA.displayName="Memo(PaneContainer)";class lM extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";let r=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${r} (${i})`:r)}withHelpUrl(e){return this.helpId=e,this}}let l$=function(e){return e.ID_REQUIRED="structure-node-id-required",e.TITLE_REQUIRED="structure-title-required",e.FILTER_REQUIRED="structure-filter-required",e.INVALID_LIST_ITEM="structure-invalid-list-item",e.COMPONENT_REQUIRED="structure-view-component-required",e.DOCUMENT_ID_REQUIRED="structure-document-id-required",e.DOCUMENT_TYPE_REQUIRED="structure-document-type-required",e.SCHEMA_TYPE_REQUIRED="structure-schema-type-required",e.SCHEMA_TYPE_NOT_FOUND="structure-schema-type-not-found",e.LIST_ITEMS_MUST_BE_ARRAY="structure-list-items-must-be-array",e.QUERY_PROVIDED_FOR_FILTER="structure-query-provided-for-filter",e.ACTION_OR_INTENT_REQUIRED="structure-action-or-intent-required",e.LIST_ITEM_IDS_MUST_BE_UNIQUE="structure-list-item-ids-must-be-unique",e.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE="structure-action-and-intent-mutually-exclusive",e.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER="structure-api-version-required-for-custom-filter",e}({}),lL={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:eB}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},lB=[lL,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:eB}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function lO(e,t,n){return e instanceof lH?e.serialize({path:n,index:t}):e}class lH{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new lM("`title` is required for menu item",e.path,e.index,t).withHelpUrl(l$.TITLE_REQUIRED)}if(!n&&!i)throw new lM(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl(l$.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new lM("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl(l$.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new lH(this._context);return t.spec={...this.spec,...e||{}},t}}function lN(e,{by:t,title:n,i18n:i},r){let s=new lH(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(u.ycB).action("setSortOrder").params({by:t,extendedProjection:r});return i&&(s=s.i18n(i)),s}function lY(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(lB):lB).map(t=>lN(e,t,s3(i,t.by))):[]}function lV(e,t,n){return e instanceof lU?e.serialize({path:n,index:t}):e}class lU{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new lU(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new lU(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new lU(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){let{_id:t,_title:n,_i18n:i}=this;if(!t)throw new lM("`id` is required for a menu item group",e.path,e.index,n).withHelpUrl(l$.ID_REQUIRED);if(!n)throw new lM("`title` is required for a menu item group",e.path,t).withHelpUrl(l$.TITLE_REQUIRED);return{id:t,title:n,i18n:i}}}let lF=/([^A-Za-z0-9-_.])/;function lW(e,t,n){if("string"!=typeof e)throw new lM(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(lF)||[];if(i)throw new lM(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new lM("Structure node id cannot start with __edit__",t,n);return e}function lK(e,t){if(t)return t;let n=p(e);return lF.test(n)?p(m(e)):n}class lQ{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lK(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:r,component:s}=this.spec;if(!t)throw new lM("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(l$.ID_REQUIRED);if(!s)throw new lM("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(l$.ID_REQUIRED);return{id:lW(t,e.path,e.index),title:n,type:"component",child:i,component:s,canHandleIntent:this.spec.canHandleIntent,options:r||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>lO(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>lV(t,n,e.path))}}clone(e){let t=new lQ;return t.spec={...this.spec,...e||{}},t}}async function lq(e,t){return await e(x.miu).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,x.IMx)(t)},{tag:"structure.resolve-type"})}class lJ{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||b(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new lM("`id` is required for view item",e.path,e.index).withHelpUrl(l$.ID_REQUIRED);if(!n)throw new lM("`title` is required for view item",e.path,e.index).withHelpUrl(l$.TITLE_REQUIRED);return{id:lW(t,e.path,e.index),title:n,icon:i}}}function lZ(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}let lG=e=>(0,x.u4i)(e)&&"component"===e.type;class lX extends lJ{constructor(e){let t=lG(e)?{...e}:{options:{}};super(),this.spec=t;let n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new lM("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(l$.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new lX;return t.spec={...this.spec,...e||{}},t}}class l0 extends lJ{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new l0;return t.spec={...this.spec,...e||{}},t}}let l1=e=>new l0(e),l2=e=>new lX(e);var l3=Object.freeze({__proto__:null,ComponentViewBuilder:lX,FormViewBuilder:l0,GenericViewBuilder:lJ,component:l2,form:l1,maybeSerializeView:lZ});let l4=({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:r})=>{let s=i.type,l=r.slice(0,r.length-1),o=r[r.length-1];if(s||(s=await lq(t,n)),!s)throw new lM("Failed to resolve document, and no type provided in parameters.",l,o);return e({documentId:n,schemaType:s})};class l5{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lK(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options||{},id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options||{},type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options||{},template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){let i=e[t||e.length-1],r=this.spec.id||i&&`${i}`||"",s={id:r,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof r||!r)throw new lM("`id` is required for document nodes",e,t,n).withHelpUrl(l$.ID_REQUIRED);if(!s||!s.id)throw new lM("document id (`id`) is required for document nodes",e,r,n).withHelpUrl(l$.DOCUMENT_ID_REQUIRED);if(!s||!s.type)throw new lM("document type (`schemaType`) is required for document nodes",e,r,n);let l=(this.spec.views&&this.spec.views.length>0?this.spec.views:[l1()]).map((t,n)=>lZ(t,n,e)),o=l.map(e=>e.id),a=y(o.filter((e,t)=>o.includes(e,t+1)));if(a.length>0)throw new lM(`document node has views with duplicate IDs: ${a.join(",  ")}`,e,r,n);return{...this.spec,child:this.spec.child||l4(this._context),id:lW(r,e,t),type:"document",options:function(e){let t={id:e.id||"",type:e.type||"*"};return e.template&&(t.template=e.template),e.templateParameters&&(t.templateParameters=e.templateParameters),t}(s),views:l}}clone(e={}){let t=new l5(this._context),n={...this.spec.options||{},...e.options||{}};return t.spec={...this.spec,...e,options:n},t}}function l6(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new l5(e);if(!t)return n;let{id:i,type:r,template:s,templateParameters:l}=t.options;return n=n.id(t.id).documentId(i),r&&(n=n.schemaType(r)),s&&(n=n.initialValueTemplate(s,l)),t.child&&(n=n.child(t.child)),n}function l7({resolveDocumentNode:e,templates:t},n,i){let r=t.find(e=>e.id===n);if(!r)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:r.schemaType}).initialValueTemplate(n,i)}class l8{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){let{spec:i,_context:r}=this,{templates:s}=r;if("string"!=typeof i.id||!i.id)throw new lM("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(l$.ID_REQUIRED);if(!i.templateId)throw new lM("template id (`templateId`) is required for initial value template item nodes",e,i.id,n).withHelpUrl(l$.ID_REQUIRED);let l=s.find(e=>e.id===i.templateId);if(!l)throw new lM("template id (`templateId`) is required for initial value template item nodes",e,i.id,n).withHelpUrl(l$.ID_REQUIRED);return{id:i.id,templateId:i.id,schemaType:l.schemaType,type:"initialValueTemplateItem",description:i.description||l.description,title:i.title||l.title,subtitle:i.subtitle,icon:i.icon||l.icon,initialDocumentId:i.initialDocumentId,parameters:i.parameters}}clone(e={}){let t=new l8(this._context);return t.spec={...this.spec,...e},t}}function l9(e){let{schema:t,getStructureBuilder:n,templates:i}=e,r=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>r.indexOf(e.schemaType)-r.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}function oe(e,t,n){return e instanceof l8?e.serialize({path:n,index:t}):e}function ot(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let r=i.find(e=>e.id===t.templateId),s=t.title||r?.title||"Create",l={};r&&r.schemaType&&(l.type=r.schemaType),t.templateId&&(l.template=t.templateId);let o=t.parameters?[l,t.parameters]:l,a=r&&n.get(r.schemaType),d=t.i18n||r?.i18n,c=new lH(e).title(s).icon(r&&r.icon||a?.icon||u.REV).intent({type:"create",params:o});return d&&(c=c.i18n(d)),c.serialize()})}let on=Symbol("Document type list canHandleIntent"),oi=(e,t,{pane:n})=>{let i="create"===e,r=n.options?.filter||"",s=n.options?.params||{},l=n.schemaTypeName?[n.schemaTypeName]:ou(r,s),o=n.initialValueTemplates||[];return i&&t.template?o.some(e=>e.templateId===t.template):"edit"===e&&t.id&&l.includes(t.type)||i&&l.includes(t.type)};oi.identity=on;let or=["default","card","media","detail","block"];function os(){}let ol=(e,t,{pane:n,index:i})=>i<=1&&oi(e,t,{pane:n});class oo{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lK(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions||{},showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!or.includes(i))throw new lM(`\`layout\` must be one of ${or.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let r=(this.spec.initialValueTemplates||[]).map((e,t)=>oe(e,t,n));return{id:lW(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||os,canHandleIntent:this.spec.canHandleIntent||ol,displayOptions:this.spec.displayOptions,initialValueTemplates:r,menuItems:(this.spec.menuItems||[]).map((e,t)=>lO(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>lV(e,t,n))}}}let oa=(e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new lM(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl(l$.QUERY_PROVIDED_FOR_FILTER);return n},od=e=>(t,n)=>{let i=n.parent,r=n.params?.template?e.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(r?r.schemaType:i.schemaTypeName||lq(e.getClient,t)).then(n=>n?e.resolveDocumentNode({schemaType:n,documentId:t}):new l5(e).id("editor").documentId(t).schemaType(""))};class oc extends oo{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options||{},filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new lM("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(l$.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new lM("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl(l$.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,j.i)(l$.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||od(this._context),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||x.miu.apiVersion,filter:oa(this.spec,e)}}}clone(e){let t=new oc(this._context);return t.spec={...this.spec,...e||{}},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:r}=t,{filter:s,params:l}=r||{filter:"",params:{}},o=i?[i]:Array.from(new Set(ou(s,l)));if(0!==o.length)return o.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:u.REV}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},r=ou(n,i);return 1===r.length?r[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function ou(e,t={}){let n=function(e,t={}){let n;let i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,r=[];for(;null!==(n=i.exec(e));)r.push(n[1]||n[2]);return r.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let op=e=>e instanceof ox?"ListBuilder":!function(e){return(0,x.u4i)(e)&&"function"==typeof e.then}(e)?Array.isArray(e)?"array":typeof e:"Promise",om=e=>"listItem"===e.type,oh=(e,t,n)=>(n.pane.items||[]).filter(oj).some(e=>e.schemaType.name===t.type&&e._id===t.id)||ol(e,t,n),of=(e,t)=>{let n=(t.parent.items.filter(om).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class ox extends oo{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new lM("`id` is required for lists",e.path,e.index).withHelpUrl(l$.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new lM("`items` must be an array of items",e.path,e.index).withHelpUrl(l$.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),r=n.map((e,t)=>(function(e,t,n){if(e instanceof og)return e.serialize({path:n,index:t});if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){let i=e&&e.type||op(e);throw new lM(`List items must be of type "listItem", got "${i}"${"array"===i?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl(l$.INVALID_LIST_ITEM)}return e})(e,t,i)),s=r.filter((e,t)=>v(r,{id:e.id},t+1));if(s.length>0){let t=s.map(e=>e.id).slice(0,5),n=s.length>5?`${t.join(", ")}...`:t.join(", ");throw new lM(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl(l$.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||oh,child:this.spec.child||of,items:r}}clone(e){let t=new ox(this._context);return t.spec={...this.spec,...e||{}},t}}class og{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:lK(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions||{},showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new lM("`id` is required for list items",e.path,e.index).withHelpUrl(l$.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new lM("`title` is required for list items",e.path,t).withHelpUrl(l$.TITLE_REQUIRED);let r=this.spec.schemaType;if("string"==typeof r){let n=this._context.schema.get(r);if(!n)throw new lM(`Could not find type "${r}" in schema`,e.path,t).withHelpUrl(l$.SCHEMA_TYPE_NOT_FOUND);r=n}let s={path:e.path.concat(t),hint:"child"},l=i instanceof lQ||i instanceof oc||i instanceof l5||i instanceof ox?i.serialize(s):i;if("function"==typeof l){let e=l;l=(t,n)=>e(t,{...n,serializeOptions:s})}return{...this.spec,id:lW(t,e.path,e.index),schemaType:r,child:l,title:n,type:"listItem"}}clone(e){let t=new og(this._context);return t.spec={...this.spec,...e||{}},t}}let oy=(e,t)=>n=>{let i=t.schemaType&&("string"==typeof t.schemaType?t.schemaType:t.schemaType.name);return i?e.resolveDocumentNode({schemaType:i,documentId:n}):new l5(e).id("documentEditor").documentId(n)};class ob extends og{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t=super.serialize({...e,titleIsOptional:!0});if(!t.schemaType)throw new lM("`schemaType` is required for document list items",e.path,e.index).withHelpUrl(l$.SCHEMA_TYPE_REQUIRED);let n=t.child||oy(this._context,t);return{...t,child:n,schemaType:t.schemaType,_id:t.id}}clone(e){let t=new ob(this._context);return t.spec={...this.spec,...e||{}},t}}function oj(e){return(0,x.u4i)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class ov extends oc{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new ov(this._context);return n.spec={...this.spec,...t.getSpec(),...e||{}},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new ov(this._context),i=this.spec.canHandleIntent,r=i&&i.identity===on?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e||{},...r},n}}let o_=["sanity.imageAsset","sanity.fileAsset"];function ow(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!o_.includes(e))})(e).map(t=>oI(e,t))}function oI(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let r=i.title||_(t);return new og(e).id(t).title(r).schemaType(i).child((n,i)=>{let r=i.parent,s="list"===r.type?r.items.find(e=>e.id===n):null,l=oS(e,t);return s&&s.title&&(l=l.title(s.title)),l})}function oS(e,t){let{schema:n,resolveDocumentNode:i}=e,r="string"==typeof t?t:t.schemaType,s="string"==typeof r?r:r.name,l="string"==typeof t?{}:t,o=n.get(s);if(!o)throw Error(`Schema type with name "${s}" not found`);let a=o.title||_(s);return new ov(e).id(l.id||s).title(l.title||a).filter("_type == $type").params({type:s}).schemaType(o).defaultOrdering(lL.by).menuItemGroups(l.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:eB}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:eB}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:eB}}}]).child(l.child||(e=>i({schemaType:s,documentId:e}))).canHandleIntent(l.canHandleIntent||oi).menuItems(l.menuItems||[...lY(e,o),new lH(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:eB}}).title("Compact view").icon(u.dSb).action("setLayout").params({layout:"default"}),new lH(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:eB}}).title("Detailed view").icon(u.m1D).action("setLayout").params({layout:"detail"})])}function oE({defaultDocumentNode:e,source:t}){let n=(0,x.VMk)(t),i={...t,getStructureBuilder:()=>r,resolveDocumentNode:t=>{let s=e?.(r,{...t,...n})||new l5(i);return s.getId()||(s=s.id("documentEditor")),t.documentId&&(s=s.documentId((0,x.IMx)(t.documentId))),s.schemaType(t.schemaType)}},r={defaults:()=>(function(e){let t=ow(e);return new ox(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:eB}}).items(t).showIcons(t.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))})(i),documentTypeList:(...e)=>oS(i,...e),documentTypeListItem:(...e)=>oI(i,...e),documentTypeListItems:(...e)=>ow(i,...e),document:(...e)=>new l5(i,...e),documentWithInitialValueTemplate:(...e)=>l7(i,...e),defaultDocument:i.resolveDocumentNode,list:(...e)=>new ox(i,...e),listItem:(...e)=>new og(i,...e),menuItem:(...e)=>new lH(i,...e),menuItemGroup:(...e)=>new lU(i,...e),menuItemsFromInitialValueTemplateItems:(...e)=>ot(i,...e),documentList:(...e)=>new oc(i,...e),documentListItem:(...e)=>new ob(i,...e),orderingMenuItem:(...e)=>lN(i,...e),orderingMenuItemsForType:(...e)=>lY(i,...e),editor:(...e)=>l6(i,...e),defaultInitialValueTemplateItems:(...e)=>l9(i,...e),initialValueTemplateItem:(e,t)=>new l8(i,{id:e,parameters:t,templateId:e}),component:e=>(0,f.isValidElementType)(e)?new lQ().component(e):new lQ(e),divider:()=>({id:h("__divider__"),type:"divider"}),view:l3,context:i};return r}let ok=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};ok.displayName="LiveEditBadge";let oT={activePanes:[]};function oC(e){oT.activePanes=e}function oD(e,t,n,i){let r=n?.panes||[],s=oT.activePanes||[],l=t.id||(0,w.A)();for(let n=s.length-1;n>=0;n--){let o=s[n];if("object"==typeof o&&(o.canHandleIntent?.(e,t,{pane:o,index:n})||"documentList"===o.type&&o.schemaTypeName===t.type&&"_type == $type"===o.options.filter)){let s=function(e,{template:t,version:n}){return"create"!==e?iY:t&&n?{template:t,version:n}:t?{template:t}:n?{version:n}:iY}(e,t);return{panes:r.slice(0,n).concat([[{id:l,params:s,payload:i}]])}}}return{intent:e,params:t,payload:i}}let oR=(0,I.I4)(x.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,oz=(0,I.I4)(o.az)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function oP(e){let t,n,i,r,a,c,u,p,m,h,f,g,y;let b=(0,l.c)(39),{showChanges:j}=e,{documentId:v,schemaType:_,timelineError:w,timelineStore:I,value:S}=nk(),{selectedReleaseId:E}=(0,x.QO2)(),[k,T]=(0,d.useState)(null),C=(0,x.SfM)(I,oB),D=(0,x.SfM)(I,oL),R=(0,x.SfM)(I,o$),z=(0,x.SfM)(I,oM),P=(0,x.SfM)(I,oA),A="loading"===z,M=!R,{t:$}=(0,x.Bdt)(eB);if(b[0]!==D||b[1]!==v||b[2]!==M||b[3]!==_||b[4]!==S?(n={documentId:v,schemaType:_,FieldWrapper:x.uD1,rootDiff:D,isComparingCurrent:M,value:S,showFromValue:!0},b[0]=D,b[1]=v,b[2]=M,b[3]=_,b[4]=S,b[5]=n):n=b[5],t=n,E){let e;return b[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(o.Zp,{flex:1,padding:2,paddingTop:0,children:(0,s.jsx)(rQ,{versionError:!0})})}),b[6]=e):e=b[6],e}return b[7]!==$?(i=$("changes.from.label"),b[7]=$,b[8]=i):i=b[8],b[9]!==i?(r=(0,s.jsx)(o.EY,{size:1,muted:!0,children:i}),b[9]=i,b[10]=r):r=b[10],b[11]!==P?(a=(0,s.jsx)(rZ,{mode:"since",chunk:P,placement:"bottom-start"}),b[11]=P,b[12]=a):a=b[12],b[13]!==$?(c=$("changes.to.label"),b[13]=$,b[14]=c):c=b[14],b[15]!==c?(u=(0,s.jsx)(o.EY,{size:1,muted:!0,children:c}),b[15]=c,b[16]=u):u=b[16],b[17]!==C?(p=(0,s.jsx)(rZ,{chunk:C,mode:"rev",placement:"bottom-end"}),b[17]=C,b[18]=p):p=b[18],b[19]!==r||b[20]!==a||b[21]!==u||b[22]!==p?(m=(0,s.jsx)(o.az,{padding:3,children:(0,s.jsxs)(oz,{paddingX:2,paddingBottom:2,children:[r,a,u,p]})}),b[19]=r,b[20]=a,b[21]=u,b[22]=p,b[23]=m):m=b[23],b[24]!==D||b[25]!==t||b[26]!==A||b[27]!==_||b[28]!==j||b[29]!==w?(h=j&&(0,s.jsx)(oO,{diff:D,documentContext:t,error:w,loading:A,schemaType:_}),b[24]=D,b[25]=t,b[26]=A,b[27]=_,b[28]=j,b[29]=w,b[30]=h):h=b[30],b[31]!==h?(f=(0,s.jsx)(oR,{"data-ui":"Scroller",ref:T,children:(0,s.jsx)(o.az,{flex:1,paddingX:3,height:"fill",children:h})}),b[31]=h,b[32]=f):f=b[32],b[33]!==k||b[34]!==f?(g=(0,s.jsx)(o.Zp,{flex:1,paddingX:2,paddingY:2,children:(0,s.jsx)(o.EZ,{element:k,children:f})}),b[33]=k,b[34]=f,b[35]=g):g=b[35],b[36]!==g||b[37]!==m?(y=(0,s.jsxs)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,g]}),b[36]=g,b[37]=m,b[38]=y):y=b[38],y}function oA(e){return e.sinceTime}function oM(e){return e.selectionState}function o$(e){return e.onOlderRevision}function oL(e){return e.diff}function oB(e){return e.revTime}function oO(e){let t,n;let i=(0,l.c)(9),{error:r,diff:o,documentContext:a,loading:d,schemaType:u}=e;if(r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(x.J7,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(x.gd4,{showText:!0}),i[1]=e):e=i[1],e}if(!o){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(x.J7,{}),i[2]=e):e=i[2],e}return i[3]!==o||i[4]!==u?(t=(0,s.jsx)(x.Vki,{diff:o,schemaType:u}),i[3]=o,i[4]=u,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,s.jsx)(c.HU.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let oH=e=>!(0,x.zOx)(e)&&!(0,x.GDb)(e)&&!(0,x.ayN)(e)&&!(0,x.Bkf)(e)&&!(0,x.azN)(e);function oN(e){let t,n,i,a,d,c,u,p;let m=(0,l.c)(27),{event:h,isSelected:f,onSelect:g,optionsMenu:y}=e,{t:b}=(0,x.Bdt)("studio");m[0]!==h?(t=oH(h),m[0]=h,m[1]=t):t=m[1];let j=t;m[2]!==h||m[3]!==j||m[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),j&&g(h)},m[2]=h,m[3]=j,m[4]=g,m[5]=n):n=m[5];let v=n;m[6]!==j||m[7]!==b?(i=j?"":b("changes.not-selectable"),m[6]=j,m[7]=b,m[8]=i):i=m[8];let _=j?"button":"div",w=j?"pointer":"default";return m[9]!==w?(a={cursor:w},m[9]=w,m[10]=a):a=m[10],m[11]!==h?(d=(0,s.jsx)(x.JhA,{event:h,showChangesBy:"tooltip"}),m[11]=h,m[12]=d):d=m[12],m[13]!==h.timestamp||m[14]!==v||m[15]!==f||m[16]!==_||m[17]!==a||m[18]!==d?(c=(0,s.jsx)(o.Zp,{as:_,onClick:v,padding:2,pressed:f,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":h.timestamp,style:a,children:d}),m[13]=h.timestamp,m[14]=v,m[15]=f,m[16]=_,m[17]=a,m[18]=d,m[19]=c):c=m[19],m[20]!==y||m[21]!==c?(u=(0,s.jsxs)(o.so,{gap:1,children:[c,y]}),m[20]=y,m[21]=c,m[22]=u):u=m[22],m[23]!==j||m[24]!==i||m[25]!==u?(p=(0,s.jsx)(r.m_,{content:i,disabled:j,children:u}),m[23]=j,m[24]=i,m[25]=u,m[26]=p):p=m[26],p}function oY(e){let t,n,i,a,d,c,u,p,m,h,f;let g=(0,l.c)(37),{event:y}=e,{t:b}=(0,x.Bdt)(eB),j=(0,o.WP)(),{params:v,setParams:_}=(0,C.usePaneRouter)(),w=(0,x._T7)();g[0]!==y.id||g[1]!==y.versionId||g[2]!==y.versionRevisionId||g[3]!==v||g[4]!==_?(t=()=>{_({...v,rev:y.versionRevisionId||"@lastPublished",since:void 0,historyEvent:y.id,historyVersion:(0,x._Sr)(y.versionId)})},g[0]=y.id,g[1]=y.versionId,g[2]=y.versionRevisionId,g[3]=v,g[4]=_,g[5]=t):t=g[5];let I=t;g[6]!==y.versionRevisionId||g[7]!==v||g[8]!==_||g[9]!==w?(n=()=>{_({...v,rev:y.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{w("drafts")},100)},g[6]=y.versionRevisionId,g[7]=v,g[8]=_,g[9]=w,g[10]=n):n=g[10];let S=n;g[11]!==y.release?(i=e=>{let{children:t}=e;return(0,s.jsx)(x.RwK,{$tone:y.release?(0,x.Y73)(y.release):void 0,children:t})},g[11]=y.release,g[12]=i):i=g[12];let E=i,k=`timeline-item-menu-button-${y.versionId}`;g[13]!==b?(a=b("timeline-item.menu-button.aria-label"),g[13]=b,g[14]=a):a=g[14],g[15]!==b?(d=b("timeline-item.menu-button.tooltip"),g[15]=b,g[16]=d):d=g[16],g[17]!==d?(c={content:d},g[17]=d,g[18]=c):c=g[18],g[19]!==a||g[20]!==c?(u=(0,s.jsx)(x.VJU,{"aria-label":a,tooltipProps:c}),g[19]=a,g[20]=c,g[21]=u):u=g[21],g[22]!==E||g[23]!==y.release||g[24]!==y.versionRevisionId||g[25]!==S||g[26]!==I||g[27]!==b?(p=(0,s.jsx)(o.W1,{padding:1,children:y.release?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.RZ,{intent:x.wwz,params:{id:(0,x._hI)(y.release._id)},style:{textDecoration:"none"},children:(0,s.jsx)(o.Dr,{padding:3,children:(0,s.jsx)(o.so,{align:"center",justify:"flex-start",children:(0,s.jsx)(o.EY,{size:1,style:{textDecoration:"none"},children:(0,s.jsx)(x.HTc,{components:{VersionBadge:e=>{let{children:t}=e;return(0,s.jsx)(E,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:y.release.metadata.title||b("release.placeholder-untitled-release")},t:b})})})})}),(0,s.jsx)(o.Dr,{onClick:I,children:(0,s.jsx)(o.so,{align:"center",justify:"flex-start",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{components:{VersionBadge:e=>{let{children:t}=e;return(0,s.jsx)(E,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:y.release.metadata.title||b("release.placeholder-untitled-release")},t:b})})})})]}):(0,s.jsx)(o.Dr,{onClick:S,disabled:!y.versionRevisionId,children:(0,s.jsx)(o.so,{align:"center",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(x.HTc,{components:{VersionBadge:oV},i18nKey:"events.open.draft",t:b})})})})}),g[22]=E,g[23]=y.release,g[24]=y.versionRevisionId,g[25]=S,g[26]=I,g[27]=b,g[28]=p):p=g[28];let D=!j.elements?.[rJ]||rJ;return g[29]===Symbol.for("react.memo_cache_sentinel")?(m=["bottom-end","bottom-start"],g[29]=m):m=g[29],g[30]!==D?(h={portal:D,placement:"bottom",fallbackPlacements:m},g[30]=D,g[31]=h):h=g[31],g[32]!==h||g[33]!==k||g[34]!==u||g[35]!==p?(f=(0,s.jsx)(r.IU,{id:k,button:u,menu:p,popover:h}),g[32]=h,g[33]=k,g[34]=u,g[35]=p,g[36]=f):f=g[36],f}function oV(e){let{children:t}=e;return(0,s.jsx)(x.RwK,{$tone:"caution",children:t})}let oU=S.P.create(o.az),oF={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},oW=({events:e,hasMoreEvents:t,selectedEventId:n,onLoadMore:i,onSelect:r,listMaxHeight:l="calc(100vh - 280px)",fetchEventChildren:a})=>{let[c,u]=(0,d.useState)(!1),{t:p}=(0,x.Bdt)("studio"),[m,h]=(0,d.useState)(()=>{if(n){let t=e.find(e=>e.id===n);if(t&&"parentId"in t&&t.parentId)return new Set([t.parentId])}return new Set}),[f,g]=(0,d.useState)(new Set),y=(0,d.useMemo)(()=>e.filter(t=>(0,x.y4b)(t)&&t.parentId?e[e.length-1].id===t.id||m.has(t.parentId):!(0,x.WUV)(t)||!t.parentId||m.has(t.parentId)),[m,e]),b=(0,d.useCallback)(e=>async()=>{let t=e.id,n=!1;h(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(g(e=>{let n=new Set(e);return n.add(t),n}),await a(e),g(e=>{let n=new Set(e);return n.delete(t),n}))},[a,g]),j=(0,d.useCallback)(e=>{r(e)},[r]),v=(0,d.useCallback)(e=>{let t=(0,x.tfA)(e.documentId);return(0,x.BaK)(e)&&"published"===t?(0,s.jsx)(oY,{event:e}):(0,x.BaK)(e)&&"draft"===t&&e.creationEvent?(0,s.jsx)(rD,{isExpanded:m.has(e.id),onExpand:b(e)}):null},[m,b]),_=(0,d.useCallback)((e,{activeIndex:i})=>{let r=(0,x.y4b)(e)&&e.parentId&&f.has(e.parentId),l=i===y.length-1;return r?(0,s.jsx)(oU,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,s.jsx)(o.so,{align:"center",justify:"center",style:{height:57},children:(0,s.jsx)(o.y$,{})})}):(0,s.jsxs)(oU,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?oF:void 0,paddingLeft:((0,x.WUV)(e)||(0,x.y4b)(e))&&e.parentId&&!l?4:1,children:[(0,s.jsx)(oN,{event:e,isSelected:e.id===n,onSelect:j,optionsMenu:v(e)}),l&&t&&(0,s.jsx)(x.gd4,{})]},e.timestamp)},[f,n,j,v,y.length,t]);(0,d.useEffect)(()=>u(!0),[]);let w=y.findIndex(e=>e.id===n);return(0,s.jsx)(rP,{$visible:!w||c,"data-ui":"timeline",children:y.length>0?(0,s.jsx)(rz,{direction:"column",$maxHeight:l,id:"timeline-list-wrapper",children:(0,s.jsx)(x.oIj,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:w,initialScrollAlign:"center",itemHeight:57,items:y,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:_,wrapAround:!1})}):(0,s.jsxs)(o.BJ,{padding:3,space:3,children:[(0,s.jsx)(o.EY,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,s.jsx)(o.EY,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]})})};oW.displayName="EventsTimeline";let oK=(0,I.I4)(r.AM)`
  overflow: hidden;
  overflow: clip;
`,oQ={timestamp:{dateStyle:"medium",timeStyle:"short"}};function oq({event:e,events:t,mode:n,placement:i}){let{setTimelineRange:l}=nk(),[c,p]=(0,d.useState)(!1),[m,h]=(0,d.useState)(null),[f,g]=(0,d.useState)(null),y=(0,a.dj)(),{nextCursor:b,loading:j,error:v,findRangeForRevision:_,findRangeForSince:w,loadMoreEvents:I,expandEvent:S}=(0,x.LJN)(),{t:E}=(0,x.Bdt)("studio"),k=(0,d.useCallback)(()=>{p(!0)},[]),T=(0,d.useCallback)(()=>{p(!1)},[]),C=(0,d.useCallback)(e=>{c&&("Escape"===e.key||"Tab"===e.key)&&(T(),m?.focus())},[m,T,c]);(0,o.Pm)(C),(0,o.PR)(c&&T,()=>[m,f]);let D=(0,d.useCallback)(e=>{try{if((0,x.zOx)(e)||(0,x.GDb)(e)||(0,x.ayN)(e)||(0,x.Bkf)(e)||(0,x.azN)(e)){console.error("Event is not selectable");return}let[t,n]=_(e?.id);l(t,n),T()}catch(e){y.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[E,y,l,_,T]),R=(0,d.useCallback)(e=>{try{let[t,n]=w(e.id);l(t,n),T()}catch(e){y.push({closable:!0,description:e.message,status:"error",title:E("timeline.error.unable-to-load-revision")})}},[w,l,y,E,T]),z=(0,d.useCallback)(()=>{!j&&b&&I()},[j,I,b]),P=(0,d.useMemo)(()=>v?(0,s.jsx)(rQ,{}):(0,s.jsx)(oW,{events:t,fetchEventChildren:S,hasMoreEvents:!!b,selectedEventId:e?.id,onLoadMore:z,onSelect:"rev"===n?D:R}),[v,n,S,t,b,e?.id,z,R,D]),A=e?E(x.uMx[e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:oQ}):E("timeline.latest-revision"),M=e?E(x.uMx[e.type],{context:"timestamp",timestamp:new Date(e.timestamp),formatParams:oQ}):t.length>0?E("timeline.since-version-missing"):E("timeline.no-previous-events"),$="rev"===n?A:M;return(0,s.jsx)(o.GD,{__unstable_elements:{"timeline-menu":f},children:(0,s.jsx)(oK,{"data-testid":"timeline-menu",constrainSize:!0,content:c&&P,"data-ui":"versionMenu",open:c,placement:i,matchReferenceWidth:!0,portal:!0,ref:g,children:(0,s.jsx)(o.so,{width:"fill",children:(0,s.jsx)(r.$n,{"data-testid":c?"timeline-menu-close-button":"timeline-menu-open-button",disabled:j||!t.length,mode:"ghost",onClick:c?T:k,ref:h,selected:c,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:u.D3D,text:j?E("timeline.loading-history"):$})})})})}let oJ=(0,I.I4)(x.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,oZ=(0,I.I4)(o.az)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,oG=(0,I.I4)(o.so)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,oX={diff:null,loading:!0};function o0({showChanges:e}){let{documentId:t,schemaType:n,timelineError:i,value:r,formState:l}=nk(),[a,c]=(0,d.useState)(null),{events:u,revision:p,sinceRevision:m,getChangesList:h}=(0,x.LJN)(),f=!p?.revisionId,g=(0,d.useMemo)(()=>h(),[h]),{diff:y,loading:b}=(0,k.J)(g,oX),{t:j}=(0,x.Bdt)("studio"),v=(0,d.useMemo)(()=>({documentId:t,schemaType:n,FieldWrapper:x.uD1,rootDiff:y,isComparingCurrent:f&&!l?.readOnly,value:r,showFromValue:!0}),[y,t,f,l?.readOnly,n,r]),[_,w]=(0,d.useMemo)(()=>u?[u.find(e=>e.id===m?.revisionId)||null,u.find(e=>e.id===p?.revisionId)||u[0]]:[null,null],[u,p?.revisionId,m?.revisionId]),I=(0,d.useMemo)(()=>w?u.slice(u.indexOf(w)+1).map(e=>"parentId"in w&&"parentId"in e&&e.parentId===w.parentId?{...e,parentId:void 0}:e):u.slice(1),[u,w]);return(0,s.jsxs)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,s.jsxs)(o.az,{padding:3,style:{position:"relative"},children:[(0,s.jsxs)(oZ,{paddingX:2,paddingBottom:2,children:[(0,s.jsx)(o.EY,{size:1,muted:!0,children:j("changes.inspector.from-label")}),(0,s.jsx)(oq,{event:_||null,events:I,mode:"since",placement:"bottom-start"}),(0,s.jsx)(o.EY,{size:1,muted:!0,children:j("changes.inspector.to-label")}),(0,s.jsx)(oq,{event:w||null,events:u,mode:"rev",placement:"bottom-end"})]}),b&&(0,s.jsx)(S.P.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,s.jsxs)(oG,{justify:"center",align:"center",gap:2,children:[(0,s.jsx)(o.EY,{muted:!0,size:0,children:j("changes.loading-changes")}),(0,s.jsx)(o.y$,{size:0})]})})]}),(0,s.jsx)(o.Zp,{flex:1,paddingX:2,paddingY:2,children:(0,s.jsx)(o.EZ,{element:a,children:(0,s.jsx)(oJ,{"data-ui":"Scroller",ref:c,children:(0,s.jsx)(o.az,{flex:1,paddingX:3,height:"fill",children:e&&(0,s.jsx)(o1,{documentContext:v,error:i,loading:p?.loading||m?.loading||!1,schemaType:n})})})})})]})}function o1(e){let t,n;let i=(0,l.c)(9),{error:r,documentContext:o,loading:a,schemaType:d}=e;if(r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(x.isY,{}),i[0]=e):e=i[0],e}if(a){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(x.gd4,{showText:!0}),i[1]=e):e=i[1],e}if(!o.rootDiff){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(S.P.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,s.jsx)(x.J7,{})}),i[2]=e):e=i[2],e}return i[3]!==o.rootDiff||i[4]!==d?(t=(0,s.jsx)(x.Vki,{diff:o.rootDiff,schemaType:d}),i[3]=o.rootDiff,i[4]=d,i[5]=t):t=i[5],i[6]!==o||i[7]!==t?(n=(0,s.jsx)(c.HU.Provider,{value:o,children:t}),i[6]=o,i[7]=t,i[8]=n):n=i[8],n}let o2=(0,I.I4)(x.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function o3({showList:e}){let[t,n]=(0,d.useState)(null),[i,r]=(0,d.useState)(0),{setTimelineRange:l}=(0,C.useDocumentPane)(),c=(0,d.useCallback)(e=>{!i&&e&&(r(e.clientHeight?e.clientHeight-1:0),n(e))},[i]),{events:u,nextCursor:p,loading:m,error:h,revision:f,loadMoreEvents:g,findRangeForRevision:y,expandEvent:b}=(0,x.LJN)(),{t:j}=(0,x.Bdt)("studio"),v=(0,a.dj)(),_=(0,d.useCallback)(e=>{try{if((0,x.zOx)(e)||(0,x.GDb)(e)||(0,x.ayN)(e)||(0,x.Bkf)(e)||(0,x.azN)(e)){console.error("Event is not selectable");return}let[t,n]=y(e.id);l(t,n)}catch(e){v.push({closable:!0,description:e.message,status:"error",title:j("timeline.error.unable-to-load-revision")})}},[j,v,l,y]),w=m&&!u.length;return(0,s.jsx)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(o.Zp,{flex:1,padding:2,paddingTop:0,children:h?(0,s.jsx)(rQ,{}):(0,s.jsx)(o.EZ,{element:t,children:(0,s.jsxs)(o2,{"data-ui":"Scroller",ref:c,children:[i&&e&&!w?(0,s.jsx)(oW,{events:u,fetchEventChildren:b,hasMoreEvents:!!p,selectedEventId:f?.revisionId||u[0]?.id,onLoadMore:g,onSelect:_,listMaxHeight:`${i}px`}):null,m&&(0,s.jsx)(x.gd4,{})]})})})})}let o4=(0,I.I4)(x.PaW)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function o5({showList:e}){let{timelineError:t,setTimelineRange:n,timelineStore:i}=nk(),{selectedReleaseId:r}=(0,x.QO2)(),[l,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(0),m=(0,d.useCallback)(e=>{e?.clientHeight&&(p(e.clientHeight-1),c(e))},[]),h=(0,x.SfM)(i,e=>e.chunks),f=(0,x.SfM)(i,e=>e.realRevChunk),g=(0,x.SfM)(i,e=>e.hasMoreChunks),y=(0,x.SfM)(i,e=>e.isLoading),{t:b}=(0,x.Bdt)("studio"),j=(0,a.dj)(),v=(0,d.useCallback)(e=>{try{let[t,r]=i?.findRangeForRev(e)||[null,null];n(t,r)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:b("timeline.error.unable-to-load-revision")})}},[n,b,i,j]),_=(0,d.useCallback)(()=>{y||i?.loadMore()},[y,i]);return(0,s.jsx)(o.so,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,s.jsx)(o.Zp,{flex:1,padding:2,paddingTop:0,children:t||r?(0,s.jsx)(rQ,{versionError:!!r}):(0,s.jsx)(o.EZ,{element:l,children:(0,s.jsx)(o4,{"data-ui":"Scroller",ref:m,children:u&&e?(0,s.jsx)(rK,{chunks:h,hasMoreChunks:g,lastChunk:f,onLoadMore:_,onSelect:v,listMaxHeight:`${u}px`}):null})})})})}let o6=(0,I.I4)(o.so)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,o7=["history","review"],o8=e=>e&&o7.includes(e),o9={error:u.YZv,warning:u.sAQ,info:u.YzR},ae={error:"critical",warning:"caution",info:"primary"};function at(e){let t,n,i,a;let c=(0,l.c)(17),{marker:u,onOpen:p,schemaType:m,value:h}=e;c[0]!==u.path||c[1]!==p?(t=()=>p(u.path),c[0]=u.path,c[1]=p,c[2]=t):t=c[2];let f=t,[x,g]=(0,d.useState)(null),y=o9[u.level];return c[3]!==x?(n=x&&(0,s.jsx)(o.Zp,{padding:3,radius:2,tone:"critical",children:(0,s.jsx)(o.EY,{size:1,children:x.error.message})}),c[3]=x,c[4]=n):n=c[4],c[5]!==y||c[6]!==x||c[7]!==f||c[8]!==u.level||c[9]!==u.message||c[10]!==u.path||c[11]!==m||c[12]!==h?(i=!x&&(0,s.jsx)(o.Zp,{__unstable_focusRing:!0,as:"button",onClick:f,padding:3,radius:2,tone:ae[u.level],children:(0,s.jsxs)(o.so,{align:"flex-start",gap:3,children:[(0,s.jsx)(o.az,{flex:"none",children:(0,s.jsx)(o.EY,{size:1,children:(0,s.jsx)(y,{})})}),(0,s.jsxs)(o.BJ,{flex:1,space:2,children:[(0,s.jsx)(an,{path:u.path,schemaType:m,value:h}),(0,s.jsx)(o.EY,{muted:!0,size:1,children:u.message})]})]})}),c[5]=y,c[6]=x,c[7]=f,c[8]=u.level,c[9]=u.message,c[10]=u.path,c[11]=m,c[12]=h,c[13]=i):i=c[13],c[14]!==n||c[15]!==i?(a=(0,s.jsxs)(r.tH,{onCatch:g,children:[n,i]}),c[14]=n,c[15]=i,c[16]=a):a=c[16],a}function an(e){let{path:t,schemaType:n,value:i}=e,r=(0,d.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,r=[],s=n,l=i;for(let e of t){if("string"==typeof e){if(!(0,x.u4i)(l)&&void 0!==l)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==s.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);l=l?.[e];let t=s.fields.find(t=>t.name===e);if(!t)return r.push({name:e}),r;s=t.type,r.push(s);continue}if("number"==typeof e){if(!(0,x.cyL)(l)&&void 0!==l)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==s.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);l=l?.[e];let t=s.of.find(e=>"string"==typeof l?"string"===e.jsonType:"number"==typeof l?"number"===e.jsonType:"boolean"==typeof l?"boolean"===e.jsonType:!!(0,x.u4i)(l)&&e.name===l?._type);if(!t)throw Error(`Item type not found: [${e}]`);s=t,r.push(s);continue}if((0,x.u4i)(e)&&e._key){if(!(0,x.cyL)(l))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==s.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(l=(l??[]).find(t=>(0,x.u4i)(t)&&t._key===e._key),!(0,x.u4i)(l))throw Error(`Array item not found: [_key == ${e._key}]`);let t=s.of.find(e=>(0,x.u4i)(l)&&e.name===l?._type);if(!t)throw Error(`Array item type not found: .${l?._type}`);s=t,r.push(s);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return r}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return r?.length?(0,s.jsx)(o.EY,{size:1,children:r.map((e,t)=>(0,s.jsxs)(d.Fragment,{children:[t>0&&(0,s.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,s.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let ai={},ar=T.wE.create("/",[T.wE.intents("/intent"),T.wE.create("/edit/:type/:editDocumentId",[T.wE.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),T.wE.create({path:"/:panes",children:[T.wE.create("/:action",T.wE.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,r]=n.match(as)||[];if(!e){n=n.slice(1);continue}let s=r&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(r);t.push({id:i,payload:s}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(",");return function(e,t){let n={...t,params:ai,payload:void 0};return e.reduce((e,t)=>{if(al(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else ao(t)?e.payload=function(e){try{return e?(0,T.fA)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},n)}(n,{id:t})});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...D(t.params,aa),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(ac).join("|")).map(encodeURIComponent).join(";")}}}})]),as=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,al=e=>/^[a-z0-9]+=[^=]+/i.test(e),ao=e=>/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(e),aa=["view","since","rev","inspect","comment"],ad=Boolean;function ac(e,t,n){let{payload:i,params:r={},id:s}=e,[l]=n,o=e===l,a=0!==t&&s===l.id,d=typeof i>"u"?void 0:(0,T.nk)(i),c=Object.entries(r).filter(e=>{let[t,n]=e;return!!n&&(!!o||!(n===l.params?.[t]&&!aa.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":s].concat([c.length>0&&c,d].filter(ad).flat()).join(",")||","}let au=[rs,ro,i7,i9,i5,re],ap=[ok],am=[{name:"sanity/structure/validation",component:function(e){let t,n,i,r,a,d,c,u;let p=(0,l.c)(25),{onClose:m}=e,{onFocus:h,onPathOpen:f,schemaType:g,validation:y,value:b}=nk(),{t:j}=(0,x.Bdt)("validation");p[0]!==h||p[1]!==f?(t=e=>{f(e),h(e)},p[0]=h,p[1]=f,p[2]=t):t=p[2];let v=t;return p[3]!==j?(n=j("panel.close-button-aria-label"),p[3]=j,p[4]=n):n=p[4],p[5]!==j?(i=j("panel.title"),p[5]=j,p[6]=i):i=p[6],p[7]!==m||p[8]!==n||p[9]!==i?(r=(0,s.jsx)(nU,{as:"header",closeButtonLabel:n,flex:"none",onClose:m,title:i}),p[7]=m,p[8]=n,p[9]=i,p[10]=r):r=p[10],p[11]!==j||p[12]!==y.length?(a=0===y.length&&(0,s.jsx)(o.az,{padding:2,children:(0,s.jsx)(o.EY,{muted:!0,size:1,children:j("panel.no-errors-message")})}),p[11]=j,p[12]=y.length,p[13]=a):a=p[13],p[14]!==v||p[15]!==g||p[16]!==y||p[17]!==b?(d=y.length>0&&(0,s.jsx)(o.BJ,{space:2,children:y.map((e,t)=>(0,s.jsx)(at,{marker:e,onOpen:v,schemaType:g,value:b},t))}),p[14]=v,p[15]=g,p[16]=y,p[17]=b,p[18]=d):d=p[18],p[19]!==a||p[20]!==d?(c=(0,s.jsxs)(o.Zp,{flex:1,overflow:"auto",padding:3,children:[a,d]}),p[19]=a,p[20]=d,p[21]=c):c=p[21],p[22]!==r||p[23]!==c?(u=(0,s.jsxs)(o.so,{direction:"column",height:"fill",overflow:"hidden",children:[r,c]}),p[22]=r,p[23]=c,p[24]=u):u=p[24],u},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,x.Bdt)("validation"),{selectedReleaseId:r}=(0,x.QO2)(),{validation:s}=(0,x.dWw)(t,n,r),l=(0,d.useMemo)(()=>s.map(e=>({level:e.level,message:e.message,path:e.path})),[s]),o=l.some(g.Ah),a=l.some(g.ci),c=(0,d.useMemo)(()=>o?u.YZv:a?u.sAQ:u.Dee,[o,a]),p=(0,d.useMemo)(()=>o?"critical":a?"caution":"positive",[o,a]);return{hidden:0===l.length,icon:c,title:i("panel.title"),tone:p,showAsAction:!0}}},{name:nL,useMenuItem:()=>{let{features:e}=nP(),{t}=(0,x.Bdt)();return{hidden:!e.reviewChanges,icon:u.G2W,title:t("changes.title")}},component:function(e){let t,n,i,d,c,p,m,h,f,g,y,b,j,v,_,w,I,S,E;let k=(0,l.c)(54),{params:T,setParams:C}=eX(),D=(0,x.For)(),{t:R}=(0,x.Bdt)(eB),z=T?.inspect===nL;k[0]!==T?(t=o8(T?.changesInspectorTab)?T.changesInspectorTab:o7[0],k[0]=T,k[1]=t):t=k[1];let P=t;k[2]!==T||k[3]!==C?(n=e=>C({...T,changesInspectorTab:e,since:"history"===e?void 0:T?.since}),k[2]=T,k[3]=C,k[4]=n):n=k[4];let A=n,M=z?"":void 0;k[5]!==R?(i=R("changes.tab.history"),k[5]=R,k[6]=i):i=k[6],k[7]!==A?(d=()=>A("history"),k[7]=A,k[8]=d):d=k[8];let $="history"===P;k[9]!==i||k[10]!==d||k[11]!==$?(c=(0,s.jsx)(r.oz,{"aria-controls":"history-panel",id:"history-tab",label:i,onClick:d,selected:$}),k[9]=i,k[10]=d,k[11]=$,k[12]=c):c=k[12],k[13]!==R?(p=R("changes.tab.review-changes"),k[13]=R,k[14]=p):p=k[14],k[15]!==A?(m=()=>A("review"),k[15]=A,k[16]=m):m=k[16];let L="review"===P;k[17]!==p||k[18]!==m||k[19]!==L?(h=(0,s.jsx)(r.oz,{"aria-controls":"review-changes-panel",id:"changes-tab",label:p,onClick:m,selected:L}),k[17]=p,k[18]=m,k[19]=L,k[20]=h):h=k[20],k[21]!==h||k[22]!==c?(f=(0,s.jsxs)(o.wb,{space:1,flex:1,children:[c,h]}),k[21]=h,k[22]=c,k[23]=f):f=k[23],k[24]!==R?(g=R("changes.action.close-label"),k[24]=R,k[25]=g):g=k[25];let B=e.onClose;k[26]!==R?(y=R("document-inspector.close-button.tooltip"),k[26]=R,k[27]=y):y=k[27],k[28]!==y?(b={content:y},k[28]=y,k[29]=b):b=k[29],k[30]!==e.onClose||k[31]!==g||k[32]!==b?(j=(0,s.jsx)(r.$n,{"aria-label":g,icon:u.USm,mode:"bleed",onClick:B,tooltipProps:b}),k[30]=e.onClose,k[31]=g,k[32]=b,k[33]=j):j=k[33],k[34]!==f||k[35]!==j?(v=(0,s.jsx)(o.Zp,{paddingBottom:1,children:(0,s.jsxs)(o.so,{align:"center",padding:3,gap:2,children:[f,j]})}),k[34]=f,k[35]=j,k[36]=v):v=k[36];let O="history"!==P;k[37]!==P||k[38]!==D.beta?.eventsAPI?.documents?(_=D.beta?.eventsAPI?.documents?(0,s.jsx)(o3,{showList:"history"===P}):(0,s.jsx)(o5,{showList:"history"===P}),k[37]=P,k[38]=D.beta?.eventsAPI?.documents,k[39]=_):_=k[39],k[40]!==O||k[41]!==_?(w=(0,s.jsx)(a.Kp,{"aria-labelledby":"history-tab",height:"fill",hidden:O,id:"history-panel",children:_}),k[40]=O,k[41]=_,k[42]=w):w=k[42];let H="review"!==P;return k[43]!==P||k[44]!==D.beta?.eventsAPI?.documents?(I=D.beta?.eventsAPI?.documents?(0,s.jsx)(s.Fragment,{children:"review"===P?(0,s.jsx)(o0,{showChanges:"review"===P}):null}):(0,s.jsx)(oP,{showChanges:"review"===P}),k[43]=P,k[44]=D.beta?.eventsAPI?.documents,k[45]=I):I=k[45],k[46]!==H||k[47]!==I?(S=(0,s.jsx)(a.Kp,{"aria-labelledby":"review-tab",hidden:H,id:"review-panel",height:"fill",children:I}),k[46]=H,k[47]=I,k[48]=S):S=k[48],k[49]!==v||k[50]!==M||k[51]!==w||k[52]!==S?(E=(0,s.jsxs)(o6,{direction:"column",padding:0,height:"fill","data-ready":M,children:[v,w,S]}),k[49]=v,k[50]=M,k[51]=w,k[52]=S,k[53]=E):E=k[53],E},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],ah=(0,x.bzQ)(e=>{let t=e?.icon||u.tN2;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...au])),badges:e=>Array.from(new Set([...e,...ap])),inspectors:e=>Array.from(new Set([...e,...am]))},tools:[{name:e?.name||"structure",title:e?.title||"Structure",icon:t,component:(0,d.lazy)(()=>n.e(4713).then(n.bind(n,4713))),canHandleIntent:(e,t)=>"create"===e?function(e){return"type"in e&&(!("template"in e)||{template:!0})}(t):"edit"===e&&function(e){return"id"in e&&(!("mode"in e)||{mode:"structure"===e.mode})}(t),getIntentState:oD,controlsDocumentTitle:!0,options:e,router:ar,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[eO]}}});function af({defaultDocumentNode:e,structure:t,children:n}){let[i,r]=(0,d.useState)(!1),l=(0,x.For)(),o=(0,x.Yfj)(l),a=(0,x.q3J)(),u=(0,d.useMemo)(()=>oE({defaultDocumentNode:e,source:l}),[e,l]),p=(0,d.useMemo)(()=>t?t(u,{...o,documentStore:a}):u.defaults(),[u,t,o,a]),m=(0,d.useMemo)(()=>({backButton:i,resizablePanes:!i,reviewChanges:!i,splitPanes:!i,splitViews:!i}),[i]),h=(0,d.useMemo)(()=>({features:m,layoutCollapsed:i,setLayoutCollapsed:r,rootPaneNode:p,structureContext:u.context}),[m,i,p,u.context]);return(0,s.jsx)(c.DI.Provider,{value:h,children:n})}var ax=Object.freeze({__proto__:null,default:sV}),ag=Object.freeze({__proto__:null,default:lA})}}]);