{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/jesusflores/Desktop/webdev/react/ecommerce-yt-build/sanity/lib/orders/getMyOrders.tsx"],"sourcesContent":["import { defineQuery } from \"next-sanity\";\nimport { sanityFetch } from \"../live\";\n\nexport async function getMyOrders(userId: string) {\n  if (!userId) {\n    throw new Error(\"userId is required!\");\n  }\n\n  const MY_ORDERS_QUERY = defineQuery(`\n        *[_type == \"order\" && clerkUserId == $userId] | order(orderDate desc) {\n            ...,\n            products[]{\n            ...,\n            product->\n            }\n        }\n        `);\n\n  try {\n    const orders = await sanityFetch({\n      query: MY_ORDERS_QUERY,\n      params: { userId },\n    });\n\n    return orders.data || [];\n  } catch (error) {\n    console.error(\"Error fetching the orders: \", error);\n    throw new Error(\"Error fetching orders\");\n  }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,YAAY,MAAc;IAC9C,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,kBAAkB,CAAA,GAAA,mIAAA,CAAA,cAAW,AAAD,EAAE,CAAC;;;;;;;;QAQ/B,CAAC;IAEP,IAAI;QACF,MAAM,SAAS,MAAM,CAAA,GAAA,qHAAA,CAAA,cAAW,AAAD,EAAE;YAC/B,OAAO;YACP,QAAQ;gBAAE;YAAO;QACnB;QAEA,OAAO,OAAO,IAAI,IAAI,EAAE;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/jesusflores/Desktop/webdev/react/ecommerce-yt-build/lib/formatCurrency.ts"],"sourcesContent":["export function formatCurrency(\n  amount: number,\n  currencyCode: string = \"GBP\"\n): string {\n  try {\n    return new Intl.NumberFormat(\"en-GB\", {\n      style: \"currency\",\n      currency: currencyCode.toUpperCase(),\n    }).format(amount);\n  } catch (error) {\n    // Fallback formatting if currency code is Invalid\n    console.error(\"Invalid currency code: \", currencyCode, error);\n    return `${currencyCode.toUpperCase()} ${amount.toFixed(2)}`;\n  }\n}\n"],"names":[],"mappings":";;;AAAO,SAAS,eACd,MAAc,EACd,eAAuB,KAAK;IAE5B,IAAI;QACF,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP,UAAU,aAAa,WAAW;QACpC,GAAG,MAAM,CAAC;IACZ,EAAE,OAAO,OAAO;QACd,kDAAkD;QAClD,QAAQ,KAAK,CAAC,2BAA2B,cAAc;QACvD,OAAO,GAAG,aAAa,WAAW,GAAG,CAAC,EAAE,OAAO,OAAO,CAAC,IAAI;IAC7D;AACF","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/jesusflores/Desktop/webdev/react/ecommerce-yt-build/app/%28store%29/orders/page.tsx"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\";\nimport { redirect } from \"next/navigation\";\nimport { getMyOrders } from \"@/sanity/lib/orders/getMyOrders\";\nimport { formatCurrency } from \"@/lib/formatCurrency\";\n\nconst Orders = async () => {\n  const { userId } = await auth();\n  if (!userId) {\n    return redirect(\"/\");\n  }\n\n  const orders = await getMyOrders(userId);\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4\">\n      <div className=\"bg-white p-4 sm:p-8 rounded-xl shadow-lg w-full max-w-4xl\">\n        <h1 className=\"text-4xl font-bold text-gray-900 trackin-tight mb-8\">\n          My Orders\n        </h1>\n\n        {orders.length === 0 ? (\n          <div className=\"text-center text-gray-600\">\n            <p>You have not placed any orders yet</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6 sm:space-y-8\">\n            {orders.map((order) => (\n              <div\n                key={order.orderNumber}\n                className=\"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden\"\n              >\n                <div className=\"p-4 sm:p-6 border-b border-gray-200\">\n                  <div className=\"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center mb-4\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1 font-bold\">\n                        Order Number\n                      </p>\n                      <p className=\"font-mono text-sm text-green-600 break-all\">\n                        {order.orderNumber}\n                      </p>\n                    </div>\n\n                    <div className=\"sm:text-right\">\n                      <p className=\"text-sm text-gray-600 mb-1\">Order Date</p>\n                      <p className=\"font-medium\">\n                        {order.orderDate\n                          ? new Date(order.orderDate).toLocaleDateString()\n                          : \"N/A\"}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center\">\n                  <div className=\"flex items-center\">\n                    <span className=\"text-sm mr-2\">Status:</span>\n                    <span\n                      className={`px-2 py-1 rounded-full text-sm\n                      ${\n                        order.status === \"paid\"\n                          ? \"bg-green-100 text-green-800\"\n                          : \"bg-gray-100 text-gray-800\"\n                      } \n                      `}\n                    >\n                      {order.status}\n                    </span>\n                  </div>\n                  <div className=\"sm:text-right\">\n                    <p className=\"text-sm text-gray-600 mb-1\">Total Amount</p>\n                    <p className=\"font-bold text-lg\">\n                      {formatCurrency(order.totalPrice ?? 0, order.currency)}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Orders;\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAEA,MAAM,SAAS;IACb,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAC5B,IAAI,CAAC,QAAQ;QACX,OAAO,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IAClB;IAEA,MAAM,SAAS,MAAM,CAAA,GAAA,uIAAA,CAAA,cAAW,AAAD,EAAE;IACjC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAsD;;;;;;gBAInE,OAAO,MAAM,KAAK,kBACjB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;kCAAE;;;;;;;;;;yCAGL,8OAAC;oBAAI,WAAU;8BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;4BAEC,WAAU;;8CAEV,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAE,WAAU;kEAAuC;;;;;;kEAGpD,8OAAC;wDAAE,WAAU;kEACV,MAAM,WAAW;;;;;;;;;;;;0DAItB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAE,WAAU;kEAA6B;;;;;;kEAC1C,8OAAC;wDAAE,WAAU;kEACV,MAAM,SAAS,GACZ,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB,KAC5C;;;;;;;;;;;;;;;;;;;;;;;8CAMZ,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAe;;;;;;8DAC/B,8OAAC;oDACC,WAAW,CAAC;sBACZ,EACE,MAAM,MAAM,KAAK,SACb,gCACA,4BACL;sBACD,CAAC;8DAEA,MAAM,MAAM;;;;;;;;;;;;sDAGjB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAA6B;;;;;;8DAC1C,8OAAC;oDAAE,WAAU;8DACV,CAAA,GAAA,qHAAA,CAAA,iBAAc,AAAD,EAAE,MAAM,UAAU,IAAI,GAAG,MAAM,QAAQ;;;;;;;;;;;;;;;;;;;2BA3CtD,MAAM,WAAW;;;;;;;;;;;;;;;;;;;;;AAsDtC;uCAEe","debugId":null}}]
}