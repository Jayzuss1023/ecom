{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/jesusflores/Desktop/webdev/react/ecommerce-yt-build/store/store.tsx"],"sourcesContent":["import { Product } from \"@/sanity.types\";\nimport { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nexport interface BasketItem {\n  product: Product;\n  quantity: number;\n}\n\ninterface BasketState {\n  items: BasketItem[];\n  addItem: (product: Product) => void;\n  removeItem: (productId: string) => void;\n  clearBasket: () => void;\n  getTotalPrice: () => number;\n  getItemCount: (productId: string) => number;\n  getGroupedItems: () => BasketItem[];\n}\n\nconst useBasketStore = create<BasketState>()(\n  persist(\n    (set, get) => ({\n      // Items in the user's basket will start out empty\n      items: [],\n\n      addItem: (product) =>\n        set((state) => {\n          const existingItem = state.items.find(\n            (item) => item.product._id === product._id\n          );\n          if (existingItem) {\n            return {\n              items: state.items.map((item) =>\n                item.product._id === product._id\n                  ? { ...item, quantity: item.quantity + 1 }\n                  : item\n              ),\n            };\n          } else {\n            return {\n              items: [...state.items, { product, quantity: 1 }],\n            };\n          }\n        }),\n\n      removeItem: (productId) =>\n        set((state) => ({\n          items: state.items.reduce((acc, item) => {\n            if (item.product._id === productId) {\n              if (item.quantity > 1) {\n                acc.push({ ...item, quantity: item.quantity - 1 });\n              }\n            } else {\n              acc.push(item);\n            }\n            return acc;\n          }, [] as BasketItem[]),\n        })),\n\n      clearBasket: () => set({ items: [] }),\n\n      getTotalPrice: () => {\n        // Below the double ? handles null values. if the var is not null then the left value will return\n        // If it turns out to be null then it'll return the value on the right\n        return get().items.reduce(\n          (total, item) => total + (item.product.price ?? 0) * item.quantity,\n          0\n        );\n      },\n\n      getItemCount: (productId) => {\n        const item = get().items.find((item) => item.product._id === productId);\n        return item ? item.quantity : 0;\n      },\n\n      getGroupedItems: () => get().items,\n    }),\n    {\n      name: \"basket-store\",\n    }\n  )\n);\n\nexport default useBasketStore;\n"],"names":[],"mappings":";;;AACA;AACA;;;AAiBA,MAAM,iBAAiB,CAAA,GAAA,wIAAA,CAAA,SAAM,AAAD,IAC1B,CAAA,GAAA,6IAAA,CAAA,UAAO,AAAD,EACJ,CAAC,KAAK,MAAQ,CAAC;QACb,kDAAkD;QAClD,OAAO,EAAE;QAET,SAAS,CAAC,UACR,IAAI,CAAC;gBACH,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CACnC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG;gBAE5C,IAAI,cAAc;oBAChB,OAAO;wBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,OACtB,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG,GAC5B;gCAAE,GAAG,IAAI;gCAAE,UAAU,KAAK,QAAQ,GAAG;4BAAE,IACvC;oBAER;gBACF,OAAO;oBACL,OAAO;wBACL,OAAO;+BAAI,MAAM,KAAK;4BAAE;gCAAE;gCAAS,UAAU;4BAAE;yBAAE;oBACnD;gBACF;YACF;QAEF,YAAY,CAAC,YACX,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK;wBAC9B,IAAI,KAAK,OAAO,CAAC,GAAG,KAAK,WAAW;4BAClC,IAAI,KAAK,QAAQ,GAAG,GAAG;gCACrB,IAAI,IAAI,CAAC;oCAAE,GAAG,IAAI;oCAAE,UAAU,KAAK,QAAQ,GAAG;gCAAE;4BAClD;wBACF,OAAO;4BACL,IAAI,IAAI,CAAC;wBACX;wBACA,OAAO;oBACT,GAAG,EAAE;gBACP,CAAC;QAEH,aAAa,IAAM,IAAI;gBAAE,OAAO,EAAE;YAAC;QAEnC,eAAe;YACb,iGAAiG;YACjG,sEAAsE;YACtE,OAAO,MAAM,KAAK,CAAC,MAAM,CACvB,CAAC,OAAO,OAAS,QAAQ,CAAC,KAAK,OAAO,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,QAAQ,EAClE;QAEJ;QAEA,cAAc,CAAC;YACb,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK;YAC7D,OAAO,OAAO,KAAK,QAAQ,GAAG;QAChC;QAEA,iBAAiB,IAAM,MAAM,KAAK;IACpC,CAAC,GACD;IACE,MAAM;AACR;uCAIW","debugId":null}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/jesusflores/Desktop/webdev/react/ecommerce-yt-build/components/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport {\n  ClerkLoaded,\n  SignedIn,\n  SignInButton,\n  UserButton,\n  useUser,\n} from \"@clerk/nextjs\";\nimport Link from \"next/link\";\nimport Form from \"next/form\";\nimport { PackageIcon, TrolleyIcon } from \"@sanity/icons\";\nimport useBasketStore from \"@/store/store\";\n\nfunction Header() {\n  const { user } = useUser();\n  const itemCount = useBasketStore((state) =>\n    state.items.reduce((total, item) => total + item.quantity, 0)\n  );\n\n  const createClerkPasskey = async () => {\n    try {\n      const response = await user?.createPasskey();\n      console.log(response);\n    } catch (err) {\n      console.error(\"Error:\", JSON.stringify(err, null, 2));\n    }\n  };\n  return (\n    <header className=\"flex flex-wrap justify-between items-center px-4 py-2\">\n      {/* Top Row */}\n      <div className=\"flex w-full flex-wrap justiufy-between items-center\">\n        <Link\n          href=\"/\"\n          className=\" justify-center text-2xl font-bold text-orange-400 hover:opacity-50 cursor-pointer mx-auto sm:mx-0\"\n        >\n          Shopr\n        </Link>\n\n        <Form\n          action=\"/search\"\n          className=\"w-full sm:w-auto sm:flex-1 sm:mx-4 mt- sm:mt-0 \"\n        >\n          <input\n            type=\"text\"\n            name=\"query\"\n            placeholder=\"Search for Products\"\n            className=\"bg-gray-100 text-gray-800 px-4 py-2 w-full max-w-4xl rounded border focus:outline-none focus:ring-2\"\n          />\n        </Form>\n\n        <div className=\"flex items-center space-x-4 mt-4 sm:mt-0 flex-1\">\n          <Link\n            href=\"/basket\"\n            className=\"flex-1 relative flex justify-center sm:justify-start sm:flex-none items-center space-x-2 bg-orange-300 hover:bg-orange-400 text-white font-bold py-2 px-4 rounded\"\n          >\n            <TrolleyIcon className=\"w-6 h-6\" />\n\n            <span className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs\">\n              {itemCount}\n            </span>\n            <span>My Basket</span>\n          </Link>\n\n          {/* User Area */}\n          {/* Waiting for Clerk to fully load before initializing */}\n          <ClerkLoaded>\n            <SignedIn>\n              <Link\n                href=\"/orders\"\n                className=\"flex-1 relative flex justify-center sm:justify-start sm:flex-none items-center space-x-2 bg-orange-300 hover:bg-orange-400 text-white font-bold py-2 px-4 rounded\"\n              >\n                <PackageIcon />\n                <span>My Orders</span>\n              </Link>\n            </SignedIn>\n          </ClerkLoaded>\n\n          {user ? (\n            <div className=\"flex items-center space-x-2\">\n              <UserButton />\n\n              <div className=\"hidden sm:block text-xs\">\n                <p className=\"text-gray-400\">Welcome Back!</p>\n                <p className=\"font-bold\">{user.fullName}</p>\n              </div>\n            </div>\n          ) : (\n            <SignInButton mode=\"modal\" />\n          )}\n\n          {user?.passkeys.length === 0 && (\n            <button\n              onClick={createClerkPasskey}\n              className=\"border border-orange-200 rounded py-2 px-4 text-orange-200\"\n            >\n              Create Passkey\n            </button>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n"],"names":[],"mappings":";;;;AAGA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAbA;;;;;;;AAeA,SAAS;IACP,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,4JAAA,CAAA,UAAO,AAAD;IACvB,MAAM,YAAY,CAAA,GAAA,+GAAA,CAAA,UAAc,AAAD,EAAE,CAAC,QAChC,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAG7D,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,UAAU,KAAK,SAAS,CAAC,KAAK,MAAM;QACpD;IACF;IACA,qBACE,8OAAC;QAAO,WAAU;kBAEhB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,4JAAA,CAAA,UAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;8BAID,8OAAC,4JAAA,CAAA,UAAI;oBACH,QAAO;oBACP,WAAU;8BAEV,cAAA,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAU;;;;;;;;;;;8BAId,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,WAAU;;8CAEV,8OAAC,kJAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CAEvB,8OAAC;oCAAK,WAAU;8CACb;;;;;;8CAEH,8OAAC;8CAAK;;;;;;;;;;;;sCAKR,8OAAC,uLAAA,CAAA,cAAW;sCACV,cAAA,8OAAC,yKAAA,CAAA,WAAQ;0CACP,cAAA,8OAAC,4JAAA,CAAA,UAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,8OAAC,kJAAA,CAAA,cAAW;;;;;sDACZ,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;wBAKX,qBACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,2KAAA,CAAA,aAAU;;;;;8CAEX,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAAgB;;;;;;sDAC7B,8OAAC;4CAAE,WAAU;sDAAa,KAAK,QAAQ;;;;;;;;;;;;;;;;;iDAI3C,8OAAC,2KAAA,CAAA,eAAY;4BAAC,MAAK;;;;;;wBAGpB,MAAM,SAAS,WAAW,mBACzB,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQb;uCAEe","debugId":null}}]
}