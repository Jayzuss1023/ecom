"use strict";exports.id=1944,exports.ids=[1944],exports.modules={31944:(e,t,n)=>{let r,i,o;n.r(t),n.d(t,{default:()=>oB});var a,s,u,l,c,d,p,f,m,y,h=n(60687),v=n(27117),g=n(75720),b=n(43210),w=n(51215),x=n(28656),E=n(2243),_=n(47237);function j(e){return e.split(/[[.\]]/g).filter(Boolean).map(e=>{var t;return e.includes("==")?function(e){let[t,n]=e.split("==");if("_key"!==t)throw Error(`Currently only "_key" is supported as path segment. Found ${t}`);if(typeof n>"u")throw Error('Invalid path segment, expected `key=="value"`');return{_key:n.replace(/^['"]/,"").replace(/['"]$/,"")}}(e):k.test(t=e)?Number(t):t})}let k=/^-?\d+$/;function I(e){return"string"==typeof e?._key}function S(e){return"object"==typeof e&&"_key"in e&&"string"==typeof e._key}function M(e){return"number"==typeof e||S(e)}let O=/^[a-z_$]+/;function $(e){return e.map((e,t)=>Array.isArray(e)?`[${e[0]}:${e[1]||""}]`:"number"==typeof e?`[${e}]`:S(e)?`[_key==${JSON.stringify(e._key)}]`:"string"==typeof e&&O.test(e)?0===t?e:`.${e}`:`['${e}']`).join("")}function A(e){if("createIfNotExists"in e)return{type:"createIfNotExists",document:e.createIfNotExists};if("createOrReplace"in e)return{type:"createOrReplace",document:e.createOrReplace};if("create"in e)return{type:"create",document:e.create};if("delete"in e)return{id:e.delete.id,type:"delete"};if("patch"in e){var t,n,r,i,o,a;return{type:"patch",id:e.patch.id,patches:[..."set"in(n=t=e.patch)?Object.keys(n.set).map(e=>({path:j(e),op:{type:"set",value:n.set[e]}})):[],..."setIfMissing"in(r=t)?Object.keys(r.setIfMissing).map(e=>({path:j(e),op:{type:"setIfMissing",value:r.setIfMissing[e]}})):[],..."unset"in(i=t)?i.unset.map(e=>({path:j(e),op:{type:"unset"}})):[],..."inc"in(o=t)?Object.keys(o.inc).map(e=>({path:j(e),op:{type:"inc",amount:o.inc[e]}})):[],..."inc"in(a=t)?Object.keys(a.dec).map(e=>({path:j(e),op:{type:"dec",amount:a.dec[e]}})):[],...function(e){if(!("insert"in e))return[];let t=function(e){let t=C.filter(t=>t in e);if(t.length>1)throw Error(`Insert patch is ambiguous. Should only contain one of: ${C.join(", ")}, instead found ${t.join(", ")}`);return t[0]}(e.insert);if(!t)throw Error("Insert patch missing position");let n=j(e.insert[t]),r=n.pop();return[{path:n,op:{type:"insert",position:t,referenceItem:r,items:e.insert.items}}]}(t)]}}throw Error(`Unknown mutation: ${JSON.stringify(e)}`)}let C=["before","replace","after"];function T(e){return L(e)}function P(e){return e.flatMap(T)}function R(e){return{transactionId:e.id,mutations:P(e.mutations)}}function L(e){if("create"===e.type||"createIfNotExists"===e.type||"createOrReplace"===e.type)return{[e.type]:e.document};if("delete"===e.type)return{delete:{id:e.id}};let t=e.options?.ifRevision;return e.patches.map(n=>({patch:{id:e.id,...t&&{ifRevisionID:t},...function(e){let{path:t,op:n}=e;if("unset"===n.type)return{unset:[$(t)]};if("insert"===n.type)return{insert:{[n.position]:$([...t,n.referenceItem]),items:n.items}};if("diffMatchPatch"===n.type)return{diffMatchPatch:{[$(t)]:n.value}};if("inc"===n.type)return{inc:{[$(t)]:n.amount}};if("dec"===n.type)return{dec:{[$(t)]:n.amount}};if("set"===n.type||"setIfMissing"===n.type)return{[n.type]:{[$(t)]:n.value}};if("truncate"===n.type){let e=[n.startIndex,"number"==typeof n.endIndex?n.endIndex:""].join(":");return{unset:[`${$(t)}[${e}]`]}}if("upsert"===n.type)return{unset:n.items.map(e=>$([...t,{_key:e._key}])),insert:{[n.position]:$([...t,n.referenceItem]),items:n.items}};if("assign"===n.type)return{set:Object.fromEntries(Object.keys(n.value).map(e=>[$(t.concat(e)),n.value[e]]))};if("unassign"===n.type)return{unset:n.keys.map(e=>$(t.concat(e)))};if("replace"===n.type)return{insert:{replace:$(t.concat(n.referenceItem)),items:n.items}};if("remove"===n.type)return{unset:[$(t.concat(n.referenceItem))]};throw Error(`Unknown operation type ${n.type}`)}(n)}}))}function D(e){return Array.isArray(e)?e:[e]}function z(e){return"string"==typeof e?{_key:e}:e}function N(e){return e?{options:{ifRevision:e}}:null}var U=Object.freeze({__proto__:null,decode:function(e){return A(e)},decodeAll:function(e){return e.map(A)},encode:T,encodeAll:P,encodeMutation:L,encodeTransaction:R});function V(e,t,n){return{type:"insert",referenceItem:n,position:t,items:D(e)}}function F(e,t){return{type:"truncate",startIndex:e,endIndex:t}}function W(e){return{type:"remove",referenceItem:e}}function Y(e,t){return{path:"string"==typeof e?j(e):e,op:t}}var q=n(44856);let B=(0,q.H6)(),G=B,X=new Set;var H=n(19942);let K=/_key\s*==\s*['"](.*)['"]/,Z=/^\d*:\d*$/;function J(e){return"number"==typeof e||"string"==typeof e&&/^\[\d+\]$/.test(e)}function Q(e){return"string"==typeof e?K.test(e.trim()):"object"==typeof e&&"_key"in e}let ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/_key\s*==\s*['"](.*)['"]/;function en(e,t,n){let r="string"==typeof t?function(e){if("string"!=typeof e)throw Error("Path is not a string");let t=e.match(ee);if(!t)throw Error("Invalid path string");return t.map(er)}(t):t;if(!Array.isArray(r))throw Error("Path must be an array or a string");let i=e;for(let e=0;e<r.length;e++){let t=r[e];if(J(t)){if(!Array.isArray(i))return n;i=i[t]}if(Q(t)){if(!Array.isArray(i))return n;i=i.find(e=>e._key===t._key)}if("string"==typeof t&&(i="object"==typeof i&&null!==i?i[t]:void 0),typeof i>"u")return n}return i}function er(e){return J(e)?Number(e.replace(/[^\d]/g,"")):Q(e)?{_key:e.match(et)[1]}:!function(e){if("string"==typeof e&&Z.test(e))return!0;if(!Array.isArray(e)||2!==e.length)return!1;let[t,n]=e;return("number"==typeof t||""===t)&&("number"==typeof n||""===n)}(e)?e:function(e){let[t,n]=e.split(":").map(e=>""===e?e:Number(e));return[t,n]}(e)}function ei(){return(0,b.useSyncExternalStore)(es,ea,eo)}function eo(){return B}function ea(){return G}function es(e){return X.add(e),()=>X.delete(e)}function eu(){return ei()!==B}function el(e,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(e,r)},t)}}function ec(e,t){let n=(0,g.Fk)(),r=(0,g.v$)();if(t===B||!n&&!r)throw Error("The `useDocuments` hook cannot be used in this context");let i=(0,x.T4)(e),o=(0,x.IM)(e),a=t.getSnapshot().context?.documents,s=a?.[i],u=a?.[o],l=s||u;if(!l)throw Error(`Document "${e}" not found`);let c=s.getSnapshot().context?.local||u.getSnapshot().context?.local,d=new Promise(e=>{if(c)e(c);else{let t=l.on("ready",n=>{let{snapshot:r}=n;e(r||null),t.unsubscribe()})}});return{draftDoc:s,draftId:i,getSnapshot:()=>d,publishedDoc:u,publishedId:o,get snapshot(){if(!c)throw Error(`Snapshot for document "${e}" not found`);return c}}}function ed(){let e,t,n;let r=(0,v.c)(7),i=ei();r[0]!==i?(e=e=>({id:e,commit:()=>{let{draftDoc:t}=ec(e,i);t.send({type:"submit"})},get:t=>{let{snapshot:n}=ec(e,i);return t?en(n,t):n},getSnapshot:function(e,t){let{getSnapshot:n}=ec(e,t);return n}(e,i),patch:async(t,n)=>{let r=ec(e,i),{draftDoc:o,draftId:a,getSnapshot:s,publishedId:u}=r,{commit:l=!0}=n||{},c=await ("function"==typeof t?t({draftId:a,publishedId:u,get snapshot(){return r.snapshot},getSnapshot:s}):t),d=await s();if(!d)throw Error(`Snapshot for document "${e}" not found`);o.send({type:"mutate",mutations:[{type:"createIfNotExists",document:{...d,_id:a}},{type:"patch",id:a,patches:D(c)}]}),l&&("object"==typeof l&&"debounce"in l?el(()=>o.send({type:"submit"}),l.debounce)():o.send({type:"submit"}))}}),r[0]=i,r[1]=e):e=r[1];let o=e;r[2]!==i?(t=(e,t,n)=>{let{draftDoc:r}=ec(e,i),{commit:o}=n||{},a=void 0===o||o;r.send({type:"mutate",mutations:t}),a&&("object"==typeof a&&"debounce"in a?el(()=>r.send({type:"submit"}),a.debounce)():r.send({type:"submit"}))},r[2]=i,r[3]=t):t=r[3];let a=t;return r[4]!==o||r[5]!==a?(n={getDocument:o,mutateDocument:a},r[4]=o,r[5]=a,r[6]=n):n=r[6],n}let ep=(()=>{let e;return()=>{if(e)return e;e=[];for(let t=0;t<256;++t)e[t]=(t+256).toString(16).slice(1);return e}})();function ef(e){let t=ep();return(function(e=16){let t=new Uint8Array(e);return(0,H.A)(t),t})(e).reduce((e,n)=>e+t[n],"").slice(0,e)}function em(e){let t,n;let r="string"==typeof e?e:e.path,i=r.lastIndexOf("."),o=r.substring(i+1,r.length);if(!o.indexOf("["))throw Error("Invalid path: not an array");let a=r.lastIndexOf("["),s=r.substring(0,a);if(o.includes("_key")){let e=o.indexOf('"')+1,r=o.indexOf('"',e);t=o.substring(e,r),n=!0}else{let e=o.indexOf("[")+1,r=o.indexOf("]",e);t=o.substring(e,r),n=!1}if(!s||!t)throw Error("Invalid path");return{path:s,key:t,hasExplicitKey:n}}async function ey(e,t,n){if(!e.type)throw Error("Node type is missing");let{path:r,key:i}=em(e),o=await t.getSnapshot(),a=en(o,r),s=en(o,e.path),u=a.findIndex(e=>e._key===i),l=-1,c="before";if("first"===n){if(0===u)return[];l=0,c="before"}else if("last"===n){if(u===a.length-1)return[];l=-1,c="after"}else if("next"===n){if(u===a.length-1)return[];l=u,c="after"}else if("previous"===n){if(0===u)return[];l=u-1,c="before"}return[Y(r,F(u,u+1)),Y(r,V(s,c,l))]}function eh(e){return{lang:e?.lang??p?.lang,message:e?.message,abortEarly:e?.abortEarly??p?.abortEarly,abortPipeEarly:e?.abortPipeEarly??p?.abortPipeEarly,skipPipe:e?.skipPipe}}function ev(e,t,n,r,i){var o,a,s,u,l;let c;let d=i&&"input"in i?i.input:n.value,p=i?.expected??e.expects,h=i?.received??("object"==(c=typeof(l=d))&&(c=(l&&Object.getPrototypeOf(l)?.constructor?.name)??"null"),"string"===c?`"${l}"`:"number"===c||"bigint"===c||"boolean"===c?`${l}`:c),v={kind:e.kind,type:e.type,input:d,expected:p,received:h,message:`Invalid ${t}: ${p?`Expected ${p} but r`:"R"}eceived ${h}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly,skipPipe:r.skipPipe},g="schema"===e.kind,b=e.message??(o=e.reference,a=v.lang,y?.get(o)?.get(a))??(g?(s=v.lang,m?.get(s)):null)??r.message??(u=v.lang,f?.get(u));b&&(v.message="function"==typeof b?b(v):b),g&&(n.typed=!1),n.issues?n.issues.push(v):n.issues=[v]}var eg=/\D/gu,eb=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ew(e,t){return{kind:"validation",type:"min_length",reference:ew,async:!1,expects:`>=${e}`,requirement:e,message:t,_run(e,t){return e.typed&&e.value.length<this.requirement&&ev(this,"length",e,t,{received:`${e.value.length}`}),e}}}function ex(e,t,n){return"function"==typeof e.fallback?e.fallback(t,n):e.fallback}function eE(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function e_(e){if("entries"in e){let t={};for(let n in e.entries)t[n]=e_(e.entries[n]);return t}return"items"in e?e.items.map(e_):eE(e)}async function ej(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await ej(t)]))):"items"in e?Promise.all(e.items.map(ej)):eE(e)}function ek(e){if("entries"in e){let t={};for(let n in e.entries)t[n]=ek(e.entries[n]);return t}return"items"in e?e.items.map(ek):ex(e)}async function eI(e){return"entries"in e?Object.fromEntries(await Promise.all(Object.entries(e.entries).map(async([e,t])=>[e,await eI(t)]))):"items"in e?Promise.all(e.items.map(eI)):ex(e)}function eS(e,t){return{kind:"schema",type:"object",reference:eS,expects:"Object",async:!1,entries:e,message:t,_run(e,t){let n=e.value;if(n&&"object"==typeof n)for(let r in e.typed=!0,e.value={},this.entries){let i=n[r],o=this.entries[r]._run({typed:!1,value:i},t);if(o.issues){let a={type:"object",origin:"value",input:n,key:r,value:i};for(let t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||r in n)&&(e.value[r]=o.value)}else ev(this,"type",e,t);return e}}}function eM(e,...t){let n={kind:"schema",type:"optional",reference:eM,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=eE(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function eO(e){return{kind:"schema",type:"string",reference:eO,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:ev(this,"type",e,t),e}}}function e$(...e){return{...e[0],pipe:e,_run(t,n){for(let r=0;r<e.length;r++){t=e[r]._run(t,n);let i=e[r+1];if(n.skipPipe||t.issues&&(n.abortEarly||n.abortPipeEarly||i?.kind==="schema"||i?.kind==="transformation")){t.typed=!1;break}}return t}}}function eA(e,t,n){let r=e._run({typed:!1,value:t},eh(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}let eC=e$(eO(),ew(1)),eT=eM(eC),eP=eS({baseUrl:eC,dataset:eT,id:eC,path:eC,projectId:eT,tool:eT,type:eT,workspace:eT}),eR=/^([\w-]+):(0|[1-9][0-9]*)$/,eL=/^([\w-]+):([0-9]+),([0-9]+)$/,eD=/^([\w-]+):([\w-]+)$/,ez=e$(eO(),ew(1)),eN=eS({origin:ez,href:ez,data:eM(function e(t,n,r){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:n,message:r,_run(e,t){let n=e.value;if(n&&"object"==typeof n)for(let i in e.typed=!0,e.value={},n){var r;if("__proto__"!==(r=i)&&"prototype"!==r&&"constructor"!==r){let r=n[i],o=this.key._run({typed:!1,value:i},t);if(o.issues){let a={type:"record",origin:"key",input:n,key:i,value:r};for(let t of o.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let a=this.value._run({typed:!1,value:r},t);if(a.issues){let o={type:"record",origin:"value",input:n,key:i,value:r};for(let t of a.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}o.typed&&a.typed||(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else ev(this,"type",e,t);return e}}}(eO(),function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}()))});function eU(e){let t=eA(eP,e);if(t.success)return t.output;let n=eA(eN,e);if(n.success)try{let e=new URL(n.output.href,typeof document>"u"?"https://example.com":location.origin);return e.searchParams.size>0?function(e,t,n){let r=e._run({typed:!1,value:t},eh(void 0));if(r.issues)throw new eb(r.issues);return r.value}(eP,Object.fromEntries(e.searchParams.entries())):n.output}catch(e){return console.error("Failed to parse sanity node",e),n.output}}var eV={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},eF={0:8203,1:8204,2:8205,3:65279},eW=[,,,,].fill(String.fromCodePoint(eF[0])).join(""),eY=Object.fromEntries(Object.entries(eF).map(e=>e.reverse())),eq=Object.fromEntries(Object.entries(eV).map(e=>e.reverse())),eB=`${Object.values(eV).map(e=>`\\u{${e.toString(16)}}`).join("")}`,eG=RegExp(`[${eB}]{4,}`,"gu");let eX=[];for(let e=0;e<256;++e)eX.push((e+256).toString(16).slice(1));let eH=new Uint8Array(16);var eK={randomUUID:"u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function eZ(e){let t=e.getBoundingClientRect();return{x:t.x+scrollX,y:t.y+scrollY,w:t.width,h:t.height}}function eJ(e,t,n){return"x"===n?{x:e.x+t,y:e.y,w:e.w-2*t,h:e.h}:{x:e.x,y:e.y+t,w:e.w,h:e.h-2*t}}function eQ(e,t){return e.x===t.x&&e.y===t.y&&e.w===t.w&&e.h===t.h}function e0(e,t){let n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function e1(e,t,n){let r,i;let o={x:e.x1,y:e.y1};if(t.some(e=>(function(e,t){let n=e.x>=t.x&&e.x<=t.x+t.w,r=e.y>=t.y&&e.y<=t.y+t.h;return n&&r})(o,eJ(e,Math.min(e.w,e.h)/10,"horizontal"===n?"x":"y"))))return null;for(let a of t){let t=function(e,t){let n=[{x1:t.x,y1:t.y,x2:t.x+t.w,y2:t.y},{x1:t.x+t.w,y1:t.y,x2:t.x+t.w,y2:t.y+t.h},{x1:t.x+t.w,y1:t.y+t.h,x2:t.x,y2:t.y+t.h},{x1:t.x,y1:t.y+t.h,x2:t.x,y2:t.y}],r=[];for(let t=0;t<n.length;t++){let i=function(e,t){let{x1:n,y1:r,x2:i,y2:o}=e,{x1:a,y1:s,x2:u,y2:l}=t;if(n===i&&r===o||a===u&&s===l)return!1;let c=(l-s)*(i-n)-(u-a)*(o-r);if(0===c)return!1;let d=((u-a)*(r-s)-(l-s)*(n-a))/c,p=((i-n)*(r-s)-(o-r)*(n-a))/c;return!(d<0)&&!(d>1)&&!(p<0)&&!(p>1)&&{x:n+d*(i-n),y:r+d*(o-r)}}(e,n[t]);if(i){let e=!1;for(let t=0;t<r.length;t++)r[t].x===i.x&&r[t].y===i.y&&(e=!0);e||r.push(i)}}return 0!==r.length&&r.sort((t,n)=>e0(t,{x:e.x1,y:e.y1})-e0(n,{x:e.x1,y:e.y1}))}(e,eJ(a,Math.min(a.w,a.h)/10,"horizontal"===n?"x":"y"));if(t){let e=t[0];r?e0(o,e)<e0(o,r)&&(r=e,i=a):(r=e,i=a)}}return i||null}function e2(e,t,n){let{x:r,y:i,w:o,h:a}=e,{x:s,y:u}=n;return{x:s+(r-s)*t,y:u+(i-u)*t,w:o*t,h:a*t}}function e3(e){let t=Math.max(0,Math.min(...e.map(e=>e.y))),n=Math.min(document.body.scrollHeight,Math.max(...e.map(e=>e.y+e.h)));return{min:t,max:n,height:n-t}}function e4(e,t){return t.find(t=>eQ(eZ(t.elements.element),e))?.sanity}function e5(e,t,n){return Object.values(t).every(e=>null===e)?null:"horizontal"===n?{left:t.left?{rect:t.left,sanity:e4(t.left,e)}:null,right:t.right?{rect:t.right,sanity:e4(t.right,e)}:null}:{top:t.top?{rect:t.top,sanity:e4(t.top,e)}:null,bottom:t.bottom?{rect:t.bottom,sanity:e4(t.bottom,e)}:null}}function e6(e){let t=document.body.getBoundingClientRect();return{x:Math.max(t.x,Math.min(e.clientX,t.x+t.width)),y:e.clientY+window.scrollY}}function e9(e,t,n){let r=eZ(t),i=[...t.querySelectorAll(":where(h1, h2, h3, h4, p, a, img, span, button):not(:has(*))")];e.x<=r.x&&(e.x=r.x),e.x>=r.x+r.w&&(e.x=r.x+r.w),e.y>=r.y+r.h&&(e.y=r.y+r.h),e.y<=r.y&&(e.y=r.y);let o=i.map(e=>{let t=e2(eZ(e),n,{x:r.x,y:r.y});return{x:t.x-r.x,y:t.y-r.y,w:t.w,h:t.h,tagName:e.tagName}});return{offsetX:(r.x-e.x)*n,offsetY:(r.y-e.y)*n,w:r.w*n,h:r.h*n,maxWidth:r.w*n*.75,childRects:o}}async function e8(e,t,n,r,i){return new Promise(o=>{e.addEventListener("transitionend",()=>{setTimeout(()=>{r({type:"overlay/dragEndMinimapTransition"})},2*i),o()},{once:!0}),r({type:"overlay/dragStartMinimapTransition"}),r({type:"overlay/dragToggleMinimap",display:!0}),document.body.style.overflow="hidden",document.body.style.height="100%",document.documentElement.style.overflow="initial",document.documentElement.style.height="100%",setTimeout(()=>{e.style.transformOrigin="50% 0px",e.style.transition="transform 150ms ease",e.style.transform=`translate3d(0px, ${-n+scrollY}px, 0px) scale(${t})`},25)})}function e7(e){let t=function(e){let t=Math.max(0,Math.min(...e.map(e=>e.x))),n=Math.min(document.body.offsetWidth,Math.max(...e.map(e=>e.x+e.w)));return{min:t,max:n,width:n-t}}(e),n=e3(e),r=t.min>8&&t.min+t.width<=window.innerWidth-8,i=n.min>8&&n.min+n.height<=document.body.scrollHeight-8,o=r&&i;return{x:o?t.min-8:t.min,y:o?n.min-8:n.min,w:o?t.width+16:t.width,h:o?n.height+16:n.height}}async function te(e,t,n,r,i,o){return new Promise(a=>{if(1===new DOMMatrix(window.getComputedStyle(t).transform).a)return;let s=n-window.innerHeight,u=scrollY;(e-=window.innerHeight/2)<0&&(e=0),t.addEventListener("transitionend",()=>{t.style.transition="none",t.style.transform="none",scrollTo({top:e,behavior:"instant"}),setTimeout(()=>{r({type:"overlay/dragEndMinimapTransition"}),r({type:"overlay/dragToggleMinimap",display:!1})},2*i),a()},{once:!0}),r({type:"overlay/dragStartMinimapTransition"}),t.style.transform=`translateY(${Math.max(u-e,-s+u)}px) scale(1)`,o&&(document.body.style.overflow=o.body.overflow,document.body.style.height=o.body.height,document.documentElement.style.overflow=o.documentElement.overflow,document.documentElement.style.height=o.documentElement.height)})}let tt=!1,tn={y:0},tr={x:0,y:0},ti=typeof document>"u"?0:document.documentElement.scrollHeight,to=null,ta=e=>e instanceof HTMLElement||e instanceof SVGElement,ts=e=>e&&ta(e)?e.dataset?.sanityOverlayElement?e:ts(e.parentElement):null;function tu(e,t=!1){return(eG.lastIndex=0,eG.test(e))?function(e,t=!1){try{let n=function(e){let t=e.match(eG);if(t)return function(e,t=!1){let n=Array.from(e);if(n.length%2==0){if(n.length%4||!e.startsWith(eW))return function(e,t){var n;let r=[];for(let t=.5*e.length;t--;){let n=`${eq[e[2*t].codePointAt(0)]}${eq[e[2*t+1].codePointAt(0)]}`;r.unshift(String.fromCharCode(parseInt(n,16)))}let i=[],o=[r.join("")],a=10;for(;o.length;){let e=o.shift();try{if(i.push(JSON.parse(e)),t)break}catch(r){if(!a--)throw r;let t=+(null==(n=r.message.match(/\sposition\s(\d+)$/))?void 0:n[1]);if(!t)throw r;o.unshift(e.substring(0,t),e.substring(t))}}return i}(n,t)}else throw Error("Encoded data has invalid length");let r=[];for(let e=.25*n.length;e--;){let t=n.slice(4*e,4*e+4).map(e=>eY[e.codePointAt(0)]).join("");r.unshift(String.fromCharCode(parseInt(t,4)))}if(t){r.shift();let e=r.indexOf("\0");return -1===e&&(e=r.length),[JSON.parse(r.slice(0,e).join(""))]}return r.join("").split("\0").filter(Boolean).map(e=>JSON.parse(e))}(t[0],!0)[0]}(e);return n&&"sanity.io"===n.origin?(t&&(n.href=n.href?.replace(".alt","")),n):null}catch(t){return console.error("Failed to decode stega for string: ",e,"with the original error: ",t),null}}(e,t):null}let tl=e=>e.nodeType===Node.ELEMENT_NODE,tc=e=>"IMG"===e.tagName,td=e=>"TIME"===e.tagName,tp=e=>"SVG"===e.tagName.toUpperCase();function tf(e){return"path"in e}function tm(e){let t=e.lastIndexOf(".");return e.substring(t,e.length).includes("[")}function ty(e){if(!tm(e))return null;let t=e.split(".");return t[t.length-1]=t[t.length-1].replace(/\[.*?\]/g,"[]"),t.join(".")}function th(e,t){return!!(tm(e.path)&&tm(t.path))&&ty(e.path)===ty(t.path)}function tv(e,t,n,r){if(!e.getAttribute("data-sanity")||e.getAttribute("data-sanity-drag-disable")||!t||!tf(t)||!tm(t.path))return null;let i=e.getAttribute("data-sanity-drag-group"),o=[...n].reduce((e,n)=>{let o=r.get(n),a=n.getAttribute("data-sanity-drag-disable"),s=n.getAttribute("data-sanity-drag-group"),u=null!==n.getAttribute("data-sanity");return o&&!a&&tf(o.sanity)&&th(t,o.sanity)&&(null===i||i===s)&&u&&e.push(o),e},[]);return o.length<=1?null:o}let tg=(0,b.createContext)(null);var tb=n(73295),tw=n(58780);function tx(e){if(!e)return(0,h.jsx)(tw.XRf,{});if("string"===e.type)return(0,h.jsx)(tw.H3M,{});if("number"===e.type)return(0,h.jsx)(tw.bZn,{});let{value:t}=e;if("icon"in e&&e.icon)return(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:e.icon}});let{type:n}=t;if("string"===n)return(0,h.jsx)(tw.H3M,{});if("boolean"===n)return(0,h.jsx)(tw.Dee,{});if("number"===n)return(0,h.jsx)(tw.bZn,{});if("array"===n||"union"===n)return(Array.isArray(t.of)?t.of:[t.of]).some(e=>"name"in e&&"block"===e.name)?(0,h.jsx)(tw.a1,{}):(0,h.jsx)(tw.Ss4,{});if("object"===n){if("image"===e.name)return(0,h.jsx)(tw.xfq,{});if("block"===e.name)return(0,h.jsx)(tw.H3M,{})}return(0,h.jsx)(tw.XRf,{})}let tE=_.I4.div`
  height: 100%;
  inset: 0;
  overflow-y: scroll;
  overscroll-behavior: contain;
  pointer-events: all;
  position: fixed;
  width: 100%;
  -ms-overflow-style: none;
  scrollbar-width: none;
  display: flex;
  justify-content: center;
  align-items: center;
  &:before {
    content: '';
    display: block;
    height: calc(100% + 1px);
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -1;
  }
`,t_=_.I4.div`
  background: transparent;
  height: 100%;
  inset: 0;
  position: absolute;
  width: 100%;
`,tj=e=>{let t,n;let r=(0,v.c)(6),{children:i,onDismiss:o,setBoundaryElement:a}=e;return r[0]!==o?(t=(0,h.jsx)(t_,{onClickCapture:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==i||r[3]!==a||r[4]!==t?(n=(0,h.jsx)(E.ZL,{children:(0,h.jsxs)(tE,{"data-sanity-overlay-element":!0,ref:a,onClick:tk,children:[t,i]})}),r[2]=i,r[3]=a,r[4]=t,r[5]=n):n=r[5],n};function tk(e){e.stopPropagation()}function tI(e){return{type:"log",name:e.name,version:e.version,description:e.description,schema:void 0}}let tS={"Visual Editing Drag Sequence Completed":tI({name:"Visual Editing Drag Sequence Completed",description:"An array is successfully reordered using drag and drop.",version:1}),"Visual Editing Drag Minimap Enabled":tI({name:"Visual Editing Drag Minimap Enabled",description:"The zoomed-out minimap view is enabled during a drag sequence.",version:1}),"Visual Editing Context Menu Item Removed":tI({name:"Visual Editing Context Menu Item Removed",description:"An item is removed using the Context Menu.",version:1}),"Visual Editing Context Menu Item Duplicated":tI({name:"Visual Editing Context Menu Item Duplicated",description:"An item is duplicated using the Context Menu.",version:1}),"Visual Editing Context Menu Item Moved":tI({name:"Visual Editing Context Menu Item Moved",description:"An item is moved using the Context Menu.",version:1}),"Visual Editing Context Menu Item Inserted":tI({name:"Visual Editing Context Menu Item Inserted",description:"An item is inserted using the Context Menu.",version:1}),"Visual Editing Insert Menu Item Inserted":tI({name:"Visual Editing Insert Menu Item Inserted",description:"An item is inserted using the Insert Menu.",version:1}),"Visual Editing Overlay Clicked":tI({name:"Visual Editing Overlay Clicked",description:"An Overlay is clicked.",version:1})},tM=(0,b.createContext)(void 0);function tO(){let e=(0,b.useContext)(tM);if(!e)throw Error("Telemetry context is missing");return e}let t$={"insert-menu.filter.all-items":"All","insert-menu.search.no-results":"No results","insert-menu.search.placeholder":"Filter types…","insert-menu.toggle-grid-view.tooltip":"Toggle grid view","insert-menu.toggle-list-view.tooltip":"Toggle list view"},tA=e=>{let t,n,r,i;let o=(0,v.c)(11),{node:a,onSelect:s}=e;o[0]!==a.options?.insertMenu?(t=a.options?.insertMenu||{},o[0]=a.options?.insertMenu,o[1]=t):t=o[1];let u=t;o[2]!==u.views?(n=u.views?.map(tC),o[2]=u.views,o[3]=n):n=o[3];let l=n;return o[4]!==a.of?(r=a.of.map(tT),o[4]=a.of,o[5]=r):r=o[5],o[6]!==u||o[7]!==s||o[8]!==r||o[9]!==l?(i=(0,h.jsx)(tb.Z,{...u,labels:t$,schemaTypes:r,onSelect:s,views:l}),o[6]=u,o[7]=s,o[8]=r,o[9]=l,o[10]=i):i=o[10],i};function tC(e){return"grid"===e.name?{...e,previewImageUrl:t=>e.previewImageUrls?.[t]}:e}function tT(e){return{...e,icon:tx(e)}}let tP=e=>{let t,n,r,i,o;let a=(0,v.c)(10);return a[0]!==e?({children:t,style:r,...n}=e,a[0]=e,a[1]=t,a[2]=n,a[3]=r):(t=a[1],n=a[2],r=a[3]),a[4]!==r?(i={...r,pointerEvents:"all"},a[4]=r,a[5]=i):i=a[5],a[6]!==t||a[7]!==n||a[8]!==i?(o=(0,h.jsx)("div",{style:i,"data-sanity-overlay-element":!0,...n,children:t}),a[6]=t,a[7]=n,a[8]=i,a[9]=o):o=a[9],o};var tR=n(46474),tL=n(18300),tD=n(94199),tz=n(47256),tN=n(97298),tU=n(6839),tV="object"==typeof global&&global&&global.Object===Object&&global,tF="object"==typeof self&&self&&self.Object===Object&&self,tW=tV||tF||Function("return this")(),tY=tW.Symbol,tq=Object.prototype,tB=tq.hasOwnProperty,tG=tq.toString,tX=tY?tY.toStringTag:void 0;let tH=function(e){var t=tB.call(e,tX),n=e[tX];try{e[tX]=void 0;var r=!0}catch(e){}var i=tG.call(e);return r&&(t?e[tX]=n:delete e[tX]),i};var tK=Object.prototype.toString,tZ=tY?tY.toStringTag:void 0;let tJ=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":tZ&&tZ in Object(e)?tH(e):tK.call(e)},tQ=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},t0=function(e){if(!tQ(e))return!1;var t=tJ(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var t1=tW["__core-js_shared__"],t2=function(){var e=/[^.]+$/.exec(t1&&t1.keys&&t1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),t3=Function.prototype.toString;let t4=function(e){if(null!=e){try{return t3.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var t5=/^\[object .+?Constructor\]$/,t6=Object.prototype,t9=Function.prototype.toString,t8=t6.hasOwnProperty,t7=RegExp("^"+t9.call(t8).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let ne=function(e){return!!tQ(e)&&(!t2||!(t2 in e))&&(t0(e)?t7:t5).test(t4(e))},nt=function(e,t){var n=null==e?void 0:e[t];return ne(n)?n:void 0};var nn=function(){try{var e=nt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();let nr=function(e,t,n){"__proto__"==t&&nn?nn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ni=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},no=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},na=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},ns=function(e){return null!=e&&"object"==typeof e},nu=function(e){return ns(e)&&"[object Arguments]"==tJ(e)};var nl=Object.prototype,nc=nl.hasOwnProperty,nd=nl.propertyIsEnumerable,np=nu(function(){return arguments}())?nu:function(e){return ns(e)&&nc.call(e,"callee")&&!nd.call(e,"callee")},nf=Array.isArray,nm="object"==typeof exports&&exports&&!exports.nodeType&&exports,ny=nm&&"object"==typeof module&&module&&!module.nodeType&&module,nh=ny&&ny.exports===nm?tW.Buffer:void 0;let nv=(nh?nh.isBuffer:void 0)||function(){return!1};var ng=/^(?:0|[1-9]\d*)$/;let nb=function(e,t){var n=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==n||"symbol"!=n&&ng.test(e))&&e>-1&&e%1==0&&e<t},nw=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff};var nx={};nx["[object Float32Array]"]=nx["[object Float64Array]"]=nx["[object Int8Array]"]=nx["[object Int16Array]"]=nx["[object Int32Array]"]=nx["[object Uint8Array]"]=nx["[object Uint8ClampedArray]"]=nx["[object Uint16Array]"]=nx["[object Uint32Array]"]=!0,nx["[object Arguments]"]=nx["[object Array]"]=nx["[object ArrayBuffer]"]=nx["[object Boolean]"]=nx["[object DataView]"]=nx["[object Date]"]=nx["[object Error]"]=nx["[object Function]"]=nx["[object Map]"]=nx["[object Number]"]=nx["[object Object]"]=nx["[object RegExp]"]=nx["[object Set]"]=nx["[object String]"]=nx["[object WeakMap]"]=!1;var nE="object"==typeof exports&&exports&&!exports.nodeType&&exports,n_=nE&&"object"==typeof module&&module&&!module.nodeType&&module,nj=n_&&n_.exports===nE&&tV.process,nk=function(){try{var e=n_&&n_.require&&n_.require("util").types;if(e)return e;return nj&&nj.binding&&nj.binding("util")}catch(e){}}(),nI=nk&&nk.isTypedArray,nS=nI?function(e){return nI(e)}:function(e){return ns(e)&&nw(e.length)&&!!nx[tJ(e)]},nM=Object.prototype.hasOwnProperty;let nO=function(e,t){var n=nf(e),r=!n&&np(e),i=!n&&!r&&nv(e),o=!n&&!r&&!i&&nS(e),a=n||r||i||o,s=a?na(e.length,String):[],u=s.length;for(var l in e)(t||nM.call(e,l))&&!(a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||nb(l,u)))&&s.push(l);return s};var n$=Object.prototype;let nA=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n$)};var nC=(c=Object.keys,d=Object,function(e){return c(d(e))}),nT=Object.prototype.hasOwnProperty;let nP=function(e){if(!nA(e))return nC(e);var t=[];for(var n in Object(e))nT.call(e,n)&&"constructor"!=n&&t.push(n);return t},nR=function(e){return null!=e&&nw(e.length)&&!t0(e)},nL=function(e){return nR(e)?nO(e):nP(e)};var nD=(a=function(e,t){return e&&no(e,t,nL)},function(e,t){if(null==e)return e;if(!nR(e))return a(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e});let nz=function(e,t,n,r){return nD(e,function(e,i,o){t(r,e,n(e),o)}),r},nN=function(e,t){return e===t||e!=e&&t!=t},nU=function(e,t){for(var n=e.length;n--;)if(nN(e[n][0],t))return n;return -1};var nV=Array.prototype.splice;function nF(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}nF.prototype.clear=function(){this.__data__=[],this.size=0},nF.prototype.delete=function(e){var t=this.__data__,n=nU(t,e);return!(n<0)&&(n==t.length-1?t.pop():nV.call(t,n,1),--this.size,!0)},nF.prototype.get=function(e){var t=this.__data__,n=nU(t,e);return n<0?void 0:t[n][1]},nF.prototype.has=function(e){return nU(this.__data__,e)>-1},nF.prototype.set=function(e,t){var n=this.__data__,r=nU(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var nW=nt(tW,"Map"),nY=nt(Object,"create"),nq=Object.prototype.hasOwnProperty,nB=Object.prototype.hasOwnProperty;function nG(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}nG.prototype.clear=function(){this.__data__=nY?nY(null):{},this.size=0},nG.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=+!!t,t},nG.prototype.get=function(e){var t=this.__data__;if(nY){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return nq.call(t,e)?t[e]:void 0},nG.prototype.has=function(e){var t=this.__data__;return nY?void 0!==t[e]:nB.call(t,e)},nG.prototype.set=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=nY&&void 0===t?"__lodash_hash_undefined__":t,this};let nX=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},nH=function(e,t){var n=e.__data__;return nX(t)?n["string"==typeof t?"string":"hash"]:n.map};function nK(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function nZ(e){var t=this.__data__=new nF(e);this.size=t.size}function nJ(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nK;++t<n;)this.add(e[t])}nK.prototype.clear=function(){this.size=0,this.__data__={hash:new nG,map:new(nW||nF),string:new nG}},nK.prototype.delete=function(e){var t=nH(this,e).delete(e);return this.size-=+!!t,t},nK.prototype.get=function(e){return nH(this,e).get(e)},nK.prototype.has=function(e){return nH(this,e).has(e)},nK.prototype.set=function(e,t){var n=nH(this,e),r=n.size;return n.set(e,t),this.size+=+(n.size!=r),this},nZ.prototype.clear=function(){this.__data__=new nF,this.size=0},nZ.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},nZ.prototype.get=function(e){return this.__data__.get(e)},nZ.prototype.has=function(e){return this.__data__.has(e)},nZ.prototype.set=function(e,t){var n=this.__data__;if(n instanceof nF){var r=n.__data__;if(!nW||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new nK(r)}return n.set(e,t),this.size=n.size,this},nJ.prototype.add=nJ.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},nJ.prototype.has=function(e){return this.__data__.has(e)};let nQ=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},n0=function(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var d=-1,p=!0,f=2&n?new nJ:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var m=e[d],y=t[d];if(r)var h=a?r(y,m,d,t,e,o):r(m,y,d,e,t,o);if(void 0!==h){if(h)continue;p=!1;break}if(f){if(!nQ(t,function(e,t){if(!f.has(t)&&(m===e||i(m,e,n,r,o)))return f.push(t)})){p=!1;break}}else if(!(m===y||i(m,y,n,r,o))){p=!1;break}}return o.delete(e),o.delete(t),p};var n1=tW.Uint8Array;let n2=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},n3=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n};var n4=tY?tY.prototype:void 0,n5=n4?n4.valueOf:void 0;let n6=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new n1(e),new n1(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return nN(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=n2;case"[object Set]":var u=1&r;if(s||(s=n3),e.size!=t.size&&!u)break;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var c=n0(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(n5)return n5.call(e)==n5.call(t)}return!1},n9=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},n8=function(e,t,n){var r=t(e);return nf(e)?r:n9(r,n(e))},n7=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var re=Object.prototype.propertyIsEnumerable,rt=Object.getOwnPropertySymbols,rn=rt?function(e){return null==e?[]:n7(rt(e=Object(e)),function(t){return re.call(e,t)})}:function(){return[]};let rr=function(e){return n8(e,nL,rn)};var ri=Object.prototype.hasOwnProperty;let ro=function(e,t,n,r,i,o){var a=1&n,s=rr(e),u=s.length;if(u!=rr(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:ri.call(t,c)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var f=!0;o.set(e,t),o.set(t,e);for(var m=a;++l<u;){var y=e[c=s[l]],h=t[c];if(r)var v=a?r(h,y,c,t,e,o):r(y,h,c,e,t,o);if(!(void 0===v?y===h||i(y,h,n,r,o):v)){f=!1;break}m||(m="constructor"==c)}if(f&&!m){var g=e.constructor,b=t.constructor;g!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f};var ra=nt(tW,"DataView"),rs=nt(tW,"Promise"),ru=nt(tW,"Set"),rl=nt(tW,"WeakMap"),rc="[object Map]",rd="[object Promise]",rp="[object Set]",rf="[object WeakMap]",rm="[object DataView]",ry=t4(ra),rh=t4(nW),rv=t4(rs),rg=t4(ru),rb=t4(rl),rw=tJ;(ra&&rw(new ra(new ArrayBuffer(1)))!=rm||nW&&rw(new nW)!=rc||rs&&rw(rs.resolve())!=rd||ru&&rw(new ru)!=rp||rl&&rw(new rl)!=rf)&&(rw=function(e){var t=tJ(e),n="[object Object]"==t?e.constructor:void 0,r=n?t4(n):"";if(r)switch(r){case ry:return rm;case rh:return rc;case rv:return rd;case rg:return rp;case rb:return rf}return t});let rx=rw;var rE="[object Arguments]",r_="[object Array]",rj="[object Object]",rk=Object.prototype.hasOwnProperty;let rI=function(e,t,n,r,i,o){var a=nf(e),s=nf(t),u=a?r_:rx(e),l=s?r_:rx(t);u=u==rE?rj:u,l=l==rE?rj:l;var c=u==rj,d=l==rj,p=u==l;if(p&&nv(e)){if(!nv(t))return!1;a=!0,c=!1}if(p&&!c)return o||(o=new nZ),a||nS(e)?n0(e,t,n,r,i,o):n6(e,t,u,n,r,i,o);if(!(1&n)){var f=c&&rk.call(e,"__wrapped__"),m=d&&rk.call(t,"__wrapped__");if(f||m){var y=f?e.value():e,h=m?t.value():t;return o||(o=new nZ),i(y,h,n,r,o)}}return!!p&&(o||(o=new nZ),ro(e,t,n,r,i,o))},rS=function e(t,n,r,i,o){return t===n||(null!=t&&null!=n&&(ns(t)||ns(n))?rI(t,n,r,i,e,o):t!=t&&n!=n)},rM=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var d=new nZ;if(r)var p=r(l,c,u,e,t,d);if(!(void 0===p?rS(c,l,3,r,d):p))return!1}}return!0},rO=function(e){return e==e&&!tQ(e)},r$=function(e){for(var t=nL(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,rO(i)]}return t},rA=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},rC=function(e){var t=r$(e);return 1==t.length&&t[0][2]?rA(t[0][0],t[0][1]):function(n){return n===e||rM(n,e,t)}},rT=function(e){return"symbol"==typeof e||ns(e)&&"[object Symbol]"==tJ(e)};var rP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rR=/^\w*$/;let rL=function(e,t){if(nf(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||rT(e))||rR.test(e)||!rP.test(e)||null!=t&&e in Object(t)};function rD(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(rD.Cache||nK),n}rD.Cache=nK;var rz=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rN=/\\(\\)?/g,rU=function(e){var t=rD(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rz,function(e,n,r,i){t.push(r?i.replace(rN,"$1"):n||e)}),t});let rV=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var rF=1/0,rW=tY?tY.prototype:void 0,rY=rW?rW.toString:void 0;let rq=function e(t){if("string"==typeof t)return t;if(nf(t))return rV(t,e)+"";if(rT(t))return rY?rY.call(t):"";var n=t+"";return"0"==n&&1/t==-rF?"-0":n},rB=function(e,t){return nf(e)?e:rL(e,t)?[e]:rU(null==e?"":rq(e))};var rG=1/0;let rX=function(e){if("string"==typeof e||rT(e))return e;var t=e+"";return"0"==t&&1/e==-rG?"-0":t},rH=function(e,t){t=rB(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[rX(t[n++])];return n&&n==r?e:void 0},rK=function(e,t,n){var r=null==e?void 0:rH(e,t);return void 0===r?n:r},rZ=function(e,t){return null!=e&&t in Object(e)},rJ=function(e,t,n){t=rB(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=rX(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&nw(i)&&nb(a,i)&&(nf(e)||np(e))},rQ=function(e){return e},r0=function(e){var t;return rL(e)?(t=rX(e),function(e){return null==e?void 0:e[t]}):function(t){return rH(t,e)}},r1=function(e){if("function"==typeof e)return e;if(null==e)return rQ;if("object"==typeof e){var t,n;return nf(e)?(t=e[0],n=e[1],rL(t)&&rO(n)?rA(rX(t),n):function(e){var r=rK(e,t);return void 0===r&&r===n?null!=e&&rJ(e,t,rZ):rS(n,r,3)}):rC(e)}return r0(e)};var r2=Object.prototype.hasOwnProperty,r3=(u=function(e,t,n){r2.call(e,n)?e[n].push(t):nr(e,n,[t])},function(e,t){return(nf(e)?ni:nz)(e,u,r1(t,2),{})});function r4(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var r5=n(32044),r6=n(77598);function r9(e,t){if("number"==typeof t)return function(e,t){if(0===e&&(-1===t||0===t))return 0;let n=t<0?e+t:t;return n>=e||n<0?null:n}(e.length,t);if(S(t)){let n=e.findIndex(e=>(null!==e&&"object"==typeof e&&"string"==typeof e._key&&e._key||null)===t._key);return -1===n?null:n}throw Error(`Expected path segment to be addressing a single array item either by numeric index or by '_key'. Instead saw ${JSON.stringify(t)}`)}function r8(e,t,n,r){let i=e.slice();return i.splice(t,n,...r||[]),i}function r7(e,t){if(!Array.isArray(t))throw TypeError('Cannot apply "insert()" on non-array value');let n=r9(t,e.referenceItem);if(null===n)throw Error(`Found no matching array element to insert ${e.position}`);return 0===t.length?e.items:r8(t,"before"===e.position?n:n+1,0,e.items)}let ie=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);var it=Object.freeze({__proto__:null,assign:function(e,t){if(!r4(t))throw TypeError('Cannot apply "assign()" on non-object value');return!function(e){for(let t in e)if(ie(e,t))return!1;return!0}(e.value)?{...t,...e.value}:t},dec:function(e,t){if("number"!=typeof t)throw TypeError('Cannot apply "dec()" on non-numeric value');return t-e.amount},diffMatchPatch:function(e,t){if("string"!=typeof t)throw TypeError('Cannot apply "diffMatchPatch()" on non-string value');return(0,r5.$i)((0,r5.iz)(e.value),t)[0]},inc:function(e,t){if("number"!=typeof t)throw TypeError('Cannot apply "inc()" on non-numeric value');return t+e.amount},insert:r7,remove:function(e,t){if(!Array.isArray(t))throw TypeError('Cannot apply "remove()" on non-array value');let n=r9(t,e.referenceItem);if(null===n)throw Error("Found no matching array element to replace");return r8(t,n,1,[])},replace:function(e,t){if(!Array.isArray(t))throw TypeError('Cannot apply "replace()" on non-array value');let n=r9(t,e.referenceItem);if(null===n)throw Error("Found no matching array element to replace");return r8(t,n,e.items.length,e.items)},set:function(e,t){return e.value},setIfMissing:function(e,t){return t??e.value},truncate:function(e,t){if(!Array.isArray(t))throw TypeError('Cannot apply "truncate()" on non-array value');return"number"==typeof e.endIndex?t.slice(0,e.startIndex).concat(t.slice(e.endIndex)):t.slice(0,e.startIndex)},unassign:function(e,t){if(!r4(t))throw TypeError('Cannot apply "unassign()" on non-object value');return 0===e.keys.length?t:function(e,t){let n={...e};for(let e of t)delete n[e];return n}(t,e.keys)},unset:function(e){},upsert:function(e,t){if(!Array.isArray(t))throw TypeError('Cannot apply "upsert()" on non-array value');if(0===e.items.length)return t;let n=[],r=[];if(e.items.forEach((e,i)=>{let o=t.findIndex(t=>t?._key===e._key);o>=0?n[o]=i:r.push(e)}),0===n.length&&0==r.length)return t;let i=[...t];for(let t of n)i[t]=e.items[n[t]];return r7({type:"insert",items:r,referenceItem:e.referenceItem,position:e.position},i)}});function ir(e,t){return e.reduce((e,t)=>ii(t,e),t)}function ii(e,t){return function e(t,n,r){if(!(t.length>0))return function(e,t){if(!(e.type in it))throw Error(`Invalid operation type: "${e.type}"`);return it[e.type](e,t)}(n,r);let[i,...o]=t;if(M(i)&&Array.isArray(r))return function(t,n,r,i){let o=r9(i,t);if(null===o||-1===o)return i;let a=i[o],s=e(n,r,a);return s===a?i:r8(i,o,1,[s])}(i,o,n,r);if("string"==typeof i&&r4(r))return function(t,n,r,i){let o=i[t];if(void 0===o&&n.length>0)return i;let a=e(n,r,o);return a===o?i:{...i,[t]:a}}(i,o,n,r);throw Error(`Cannot apply operation of type "${n.type}" to path ${$(t)} on ${typeof r} value`)}(e.path,e.op,t)}function io(e=21){var t;t=e-=0,!i||i.length<t?(i=Buffer.allocUnsafe(128*t),r6.webcrypto.getRandomValues(i),o=0):o+t>i.length&&(r6.webcrypto.getRandomValues(i),o=0),o+=t;let n="";for(let t=o-e;t<o;t++)n+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&i[t]];return n}function ia(e){return"_id"in e}function is(e,t){if(0===e.length)return t;let n=t;for(let t of e){if(M(t)){if(!Array.isArray(n))return;if(S(t)){n=n.find(e=>e._key===t._key);continue}n=n[t];continue}n=n[t]}return n}function iu(e){if("patch"===e.type)return e.id;if("create"===e.type)return e.document._id;if("delete"===e.type)return e.id;if("createIfNotExists"===e.type||"createOrReplace"===e.type)return e.document._id;throw Error("Invalid mutation type")}function il(e,t){return t.reduce((e,t)=>{let n=ic(e,t);if("error"===n.status)throw Error(n.message);return"noop"===n.status?e:n.after},e)}function ic(e,t){var n,r,i,o,a,s;if("create"===t.type)return function(e,t){var n;if(e)return{status:"error",message:"Document already exist"};let r=ia(n=t.document)?n:{...n,_id:io()};return{status:"created",id:r._id,after:r}}(e,t);if("createIfNotExists"===t.type){return n=e,ia((r=t).document)?n?{status:"noop"}:{status:"created",id:r.document._id,after:r.document}:{status:"error",message:"Cannot createIfNotExists on document without _id"}}if("delete"===t.type){return i=e,o=t,i?o.id!==i._id?{status:"error",message:"Delete mutation targeted wrong document"}:{status:"deleted",id:o.id,before:i,after:void 0}:{status:"noop"}}if("createOrReplace"===t.type){return a=e,ia((s=t).document)?a?{status:"updated",id:s.document._id,before:a,after:s.document}:{status:"created",id:s.document._id,after:s.document}:{status:"error",message:"Cannot createIfNotExists on document without _id"}}if("patch"===t.type)return function(e,t){if(!e)return{status:"error",message:"Cannot apply patch on nonexistent document"};let n=function(e,t){if(e.options?.ifRevision&&t._rev!==e.options.ifRevision)throw Error("Revision mismatch");if(e.id!==t._id)throw Error(`Document id mismatch. Refusing to apply mutation for document with id="${e.id}" on the given document with id="${t._id}"`);return ir(e.patches,t)}(t,e);return e===n?{status:"noop"}:{status:"updated",id:t.id,before:e,after:n}}(e,t);throw Error(`Invalid mutation type: ${t.type}`)}function id(e,t,n){let r=[];for(let n of e.slice().reverse()){if(t(n))return r;r.push(n)}return r.reverse()}function ip(e,t){return $(e)===$(t)}function im(e,t){let n=e;return t.reduce((e,t)=>{let r=n;if(n=ii(t,n),"set"===t.op.type&&"string"==typeof t.op.value){let n=is(t.path,r);if("string"==typeof n){let r={...t,op:{type:"diffMatchPatch",value:(0,r5.w1)((0,r5.jW)(n,t.op.value))}};return e.flatMap(e=>ip(e.path,t.path)&&"diffMatchPatch"===e.op.type?[]:e).concat(r)}}return e.push(t),e},[])}function iy(e,t,n,r){let i=t,o=r.map(t=>{let n=t.mutations.flatMap(t=>{if(iu(t)!==e)return[];let n=i;return i=il(i,[t]),n&&"patch"===t.type?{type:"dmpified",mutation:{...t,dmpPatches:im(n,t.patches),original:t.patches}}:t});return{...t,mutations:n}}),a=n;return o.map(t=>{let n=[];return t.mutations.forEach(t=>{if("dmpified"===t.type)try{a=ir(t.mutation.dmpPatches,a),n.push(t)}catch{console.warn("Failed to apply dmp patch, falling back to original");try{a=ir(t.mutation.original,a),n.push(t)}catch(t){throw Error(`Failed to apply patch for document "${e}": ${t.message}`)}}else a=il(a,[t])})}),[r.map(t=>({...t,mutations:t.mutations.map(t=>"patch"!==t.type||iu(t)!==e?t:{...t,patches:t.patches.map(e=>"set"!==e.op.type?e:{...e,op:{...e.op,value:is(e.path,a)}})})})),a]}var ih=n(65125),iv=n(97120),ig=n(65461),ib=n(55087),iw=n(36647),ix=n(93042),iE=n(86319),i_=n(27246),ij=n(65543);function ik(e){let t=e.listen('*[!(_id in path("_.**"))]',{},{events:["welcome","mutation","reconnect"],includeResult:!1,includePreviousRevision:!1,visibility:"transaction",effectFormat:"mendoza",includeMutations:!1}).pipe((0,iv.u)({resetOnRefCountZero:!0})),n=t.pipe((0,ig.p)(e=>"reconnect"===e.type)),r=t.pipe((0,ig.p)(e=>"welcome"===e.type)),i=t.pipe((0,ig.p)(e=>"mutation"===e.type)),o=(0,tU.h)(r,n).pipe((0,ib.t)({bufferSize:1,refCount:!0})).pipe((0,ig.p)(e=>"welcome"===e.type));return(0,tU.h)(o,i,n)}let iI=(0,i_.mj)({types:{},actions:{"assign error to context":(0,ij.a)({error:({event:e})=>e}),"clear error from context":(0,ij.a)({error:void 0}),"connect to server-sent events":(0,tD.O)({type:"connect"}),"listen to server-sent events":(0,tD.P)("server-sent events",{id:"listener",input:({context:e})=>({listener:e.sharedListener||ik(e.client),id:e.id})}),"stop listening to server-sent events":(0,tD.R)("listener"),"buffer remote mutation events":(0,ij.a)({mutationEvents:({event:e,context:t})=>((0,i_.DT)(e,"mutation"),[...t.mutationEvents,e])}),"restore stashed changes":(0,ij.a)({stagedChanges:({event:e,context:t})=>((0,i_.DT)(e,"xstate.done.actor.submitTransactions"),t.stashedChanges),stashedChanges:[]}),"rebase fetched remote snapshot":(0,ij.b)(({enqueue:e})=>{e.assign(({event:e,context:t})=>{(0,i_.DT)(e,"xstate.done.actor.getDocument");let n=t.remote,r=e.output,i=!1;for(let e of t.mutationEvents)e.effects?.apply&&(e.previousRev||"appear"===e.transition)&&(i||e.previousRev!==r?._rev||(i=!0),i&&(r=iS(r,e.effects.apply,e.resultRev)));t.cache&&(!t.cache.has(t.id)||t.cache.get(t.id)._rev!==r?._rev)&&t.cache.set(t.id,r);let[o,a]=iy(t.id,null===n?void 0:n,null===r?void 0:r,t.stagedChanges);return{remote:r,local:a,stagedChanges:o,mutationEvents:[]}}),e.sendParent(({context:e})=>({type:"rebased.remote",id:e.id,document:e.remote}))}),"apply mendoza patch":(0,ij.a)(({event:e,context:t})=>{(0,i_.DT)(e,"mutation");let n=t.remote;if(e.transactionId===n?._rev)return{};let r=iS(n,e.effects.apply,e.resultRev);t.cache&&(!t.cache.has(t.id)||t.cache.get(t.id)._rev!==r?._rev)&&t.cache.set(t.id,r);let[i,o]=iy(t.id,null===n?void 0:n,null===r?void 0:r,t.stagedChanges);return{remote:r,local:o,stagedChanges:i}}),"increment fetch attempts":(0,ij.a)({fetchRemoteSnapshotAttempts:({context:e})=>e.fetchRemoteSnapshotAttempts+1}),"reset fetch attempts":(0,ij.a)({fetchRemoteSnapshotAttempts:0}),"increment submit attempts":(0,ij.a)({submitTransactionsAttempts:({context:e})=>e.submitTransactionsAttempts+1}),"reset submit attempts":(0,ij.a)({submitTransactionsAttempts:0}),"stage mutation":(0,ij.a)({stagedChanges:({event:e,context:t})=>((0,i_.DT)(e,"mutate"),[...t.stagedChanges,{transaction:!1,mutations:e.mutations}])}),"stash mutation":(0,ij.a)({stashedChanges:({event:e,context:t})=>((0,i_.DT)(e,"mutate"),[...t.stashedChanges,{transaction:!1,mutations:e.mutations}])}),"rebase local snapshot":(0,ij.b)(({enqueue:e})=>{e.assign({local:({event:e,context:t})=>{(0,i_.DT)(e,"mutate");let n=new Map;return t.local&&n.set(t.id,t.local),function(e,t){e.forEach(e=>{("created"===e.status||"updated"===e.status)&&t.set(e.id,e.after),"deleted"===e.status&&t.delete(e.id)})}(function(e,t){let n=Object.create(null);for(let r of e){let e=iu(r);if(!e)throw Error("Unable to get document id from mutation");let i=n[e]?.after||t.get(e),o=ic(i,r);if("error"===o.status)throw Error(o.message);"noop"!==o.status&&("updated"===o.status||"created"===o.status||"deleted"===o.status)&&(e in n||(n[e]={before:i,after:void 0,muts:[]}),n[e].after=o.after)}return Object.entries(n).map(([e,{before:t,after:n,muts:r}])=>({id:e,status:n?t?"updated":"created":"deleted",mutations:r,before:t,after:n}))}(e.mutations,n),n),n.get(t.id)}}),e.sendParent(({context:e})=>({type:"rebased.local",id:e.id,document:e.local}))}),"send pristine event to parent":(0,ij.s)(({context:e})=>({type:"pristine",id:e.id})),"send sync event to parent":(0,ij.s)(({context:e})=>({type:"sync",id:e.id,document:e.remote})),"send mutation event to parent":(0,ij.s)(({context:e,event:t})=>((0,i_.DT)(t,"mutation"),{type:"mutation",id:e.id,previousRev:t.previousRev,resultRev:t.resultRev,effects:t.effects}))},actors:{"server-sent events":(0,q.OX)(({input:e})=>{let{listener:t,id:n}=e;return(0,iw.v)(()=>t).pipe((0,ig.p)(e=>"welcome"===e.type||"reconnect"===e.type||"mutation"===e.type&&e.documentId===n),(0,ix.Q)(iE.$))}),"fetch remote snapshot":(0,q.Sx)(async({input:e,signal:t})=>{let{client:n,id:r}=e;return await n.getDocument(r,{signal:t}).catch(e=>{if(!(e instanceof Error&&"AbortError"===e.name))throw e})}),"submit mutations as transactions":(0,q.Sx)(async({input:e,signal:t})=>{let{client:n,transactions:r}=e;for(let e of r){if(t.aborted)return;await n.dataRequest("mutate",R(e),{visibility:"async",returnDocuments:!1,signal:t}).catch(e=>{if(!(e instanceof Error&&"AbortError"===e.name))throw e})}})},delays:{fetchRemoteSnapshotTimeout:({context:e})=>1e3*Math.pow(2,e.fetchRemoteSnapshotAttempts),submitTransactionsTimeout:({context:e})=>1e3*Math.pow(2,e.submitTransactionsAttempts)}}).createMachine({id:"document-mutator",context:({input:e})=>({client:e.client.withConfig({allowReconfigure:!1}),sharedListener:e.sharedListener,id:e.id,remote:void 0,local:void 0,mutationEvents:[],stagedChanges:[],stashedChanges:[],error:void 0,fetchRemoteSnapshotAttempts:0,submitTransactionsAttempts:0,cache:e.cache}),entry:["connect to server-sent events"],on:{mutate:{actions:["rebase local snapshot","stage mutation"]}},initial:"disconnected",states:{disconnected:{on:{connect:{target:"connecting",actions:["listen to server-sent events"]}}},connecting:{on:{welcome:"connected",reconnect:"reconnecting",error:"connectFailure"},tags:["busy"]},connectFailure:{on:{connect:{target:"connecting",actions:["listen to server-sent events"]}},entry:["stop listening to server-sent events","assign error to context"],exit:["clear error from context"],tags:["error"]},reconnecting:{on:{welcome:{target:"connected"},error:{target:"connectFailure"}},tags:["busy","error"]},connected:{on:{mutation:{actions:["buffer remote mutation events"]},reconnect:"reconnecting"},entry:["clear error from context"],initial:"loading",states:{loading:{invoke:{src:"fetch remote snapshot",id:"getDocument",input:({context:e})=>({client:e.client,id:e.id}),onError:{target:"loadFailure"},onDone:{target:"loaded",actions:["rebase fetched remote snapshot","reset fetch attempts"]}},tags:["busy"]},loaded:{entry:["send sync event to parent"],on:{mutation:{actions:["apply mendoza patch","send mutation event to parent"]}},initial:"pristine",states:{pristine:{on:{mutate:{actions:["rebase local snapshot","stage mutation"],target:"dirty"}},tags:["ready"]},dirty:{on:{submit:"submitting"},tags:["ready"]},submitting:{on:{mutate:{actions:["rebase local snapshot","stash mutation"]}},invoke:{src:"submit mutations as transactions",id:"submitTransactions",input:({context:e})=>{let t=new Map;return t.set(e.id,e.remote),{client:e.client,transactions:(function(e,t){let n=[],r=[];return e.forEach(e=>{t(e)?r.push(e):(r.length>0&&n.push(r),r=[],n.push([e]))}),r.length>0&&n.push(r),n})(e.stagedChanges,e=>!e.transaction).flatMap(e=>({...e[0],mutations:e.flatMap(e=>e.mutations)})).map(e=>({...e,mutations:Object.values(r3(e.mutations,iu)).flatMap(e=>{var t,n;return(0===(n=0===(t=e).length?t:t.reduce((e,t)=>"delete"===t.type?[t]:(e.push(t),e),[])).length?n:n.reduce((e,t)=>("createIfNotExists"!==t.type?e.push(t):id(e,e=>"delete"===e.type).find(e=>"createIfNotExists"===e.type)||e.push(t),e),[])).flat().reduce((e,t)=>{let n=e[e.length-1];return n&&"patch"!==n.type||"patch"!==t.type?e.concat(t):e.slice(0,-1).concat({...t,patches:(n?.patches||[]).concat(t.patches)})},[])})})).map(e=>({...e,mutations:e.mutations.map(e=>"patch"!==e.type?e:{...e,patches:e.patches.reduce((e,t)=>{if("unset"!==t.op.type)return e.push(t),e;let n=e.filter(e=>{var n,r;return n=t.path,r=e.path,!(n.length<=r.length&&n.every((e,t)=>(function(e,t){return I(e)&&I(t)?e._key===t._key:"number"==typeof e?Number(e)===Number(t):e===t})(e,function(e,t){if(t<0||t>=e.length)throw Error("Index out of bounds");return e[t]}(r,t))))});return n.push(t),n},[]).reduceRight((e,t)=>(e.find(e=>{var n,r;return n=e.op,("set"===(r=t.op).type||"unset"===r.type)&&("set"===n.type||"unset"===n.type)&&ip(e.path,t.path)})||e.unshift(t),e),[]).reduce((e,t)=>("setIfMissing"!==t.op.type?e.push(t):id(e,e=>"unset"===e.op.type).find(e=>"setIfMissing"===e.op.type&&ip(e.path,t.path))||e.push(t),e),[])})})).map(e=>{var n;return{...e,mutations:(n=t,e.mutations.map((e,t)=>{var r,i;return"patch"===e.type?(r=n.get(e.id),i=e,r?{...i,patches:im(r,i.patches)}:i):e}))}}).map(e=>e.transaction&&void 0!==e.id?{id:e.id,mutations:e.mutations}:{mutations:e.mutations})}},onError:{target:"submitFailure"},onDone:{target:"pristine",actions:["restore stashed changes","reset submit attempts","send pristine event to parent"]}},tags:["busy","ready"]},submitFailure:{exit:["clear error from context"],after:{submitTransactionsTimeout:{actions:["increment submit attempts"],target:"submitting"}},on:{retry:"submitting"},tags:["error","ready"]}}},loadFailure:{exit:["clear error from context"],after:{fetchRemoteSnapshotTimeout:{actions:["increment fetch attempts"],target:"loading"}},on:{retry:"loading"},tags:["error"]}}}}});function iS(e,t,n){let r=(0,ih.X)(function(e){if(!e)return null;let{_rev:t,...n}=e;return n}(e),t);return r?Object.assign(r,{_rev:n}):null}let iM=e=>{let t=(0,q.Sx)(async({input:t,signal:n})=>{let{id:r}=t,{snapshot:i}=await e.fetch("visual-editing/fetch-snapshot",{documentId:r},{signal:n});return i}),n=(0,q.Sx)(async({input:t})=>{let{transactions:n}=t;for(let t of n){let n=U.encodeTransaction(t);return e.post("visual-editing/mutate",n)}});return iI.provide({actions:{"send sync event to parent":(0,ij.b)(({enqueue:e})=>{e.sendParent(({context:e})=>({type:"sync",id:e.id,document:e.remote})),e.emit(({context:e})=>({type:"ready",snapshot:e.local}))})},actors:{"fetch remote snapshot":t,"submit mutations as transactions":n}})},iO=(0,i_.mj)({types:{},actions:{"emit sync event":(0,ij.e)(({event:e})=>((0,i_.DT)(e,"sync"),e)),"emit mutation event":(0,ij.e)(({event:e})=>((0,i_.DT)(e,"mutation"),e)),"emit rebased event":(0,ij.e)(({event:e})=>((0,i_.DT)(e,["rebased.local","rebased.remote"]),e)),"emit pristine event":(0,ij.e)(({event:e})=>((0,i_.DT)(e,["pristine"]),e)),"add document actor":(0,ij.a)({documents:({context:e,event:t,spawn:n})=>{(0,i_.DT)(t,"observe");let r=t.documentId;return e.documents[r]?e.documents:{...e.documents,[r]:n("documentMutatorMachine",{input:{id:r,client:e.client,sharedListener:e.sharedListener||ik(e.client)},id:r})}}}),"stop remote snapshot":(0,tD.R)(({context:e,event:t})=>((0,i_.DT)(t,"unobserve"),e.documents[t.documentId])),"remove remote snapshot from context":(0,ij.a)({documents:({context:e,event:t})=>{if((0,i_.DT)(t,"unobserve"),!e.documents[t.documentId])return e.documents;let{[t.documentId]:n,...r}=e.documents;return r}})},actors:{documentMutatorMachine:iI}}).createMachine({id:"dataset-mutator",context:({input:e})=>({documents:{},client:e.client,sharedListener:e.sharedListener}),on:{sync:{actions:["emit sync event"]},mutation:{actions:["emit mutation event"]},"rebased.*":{actions:["emit rebased event"]},pristine:{actions:["emit pristine event"]},observe:{actions:["add document actor"]},unobserve:{actions:["stop remote snapshot","remove remote snapshot from context"]}},initial:"pristine",states:{pristine:{}}}),i$=e=>iO.provide({actors:{documentMutatorMachine:iM(e)}}),iA=e=>{let t,n,r,i;let o=(0,v.c)(8),{comlink:a,history:s}=e;return o[0]!==a||o[1]!==s?(t=()=>a?.on("presentation/navigate",e=>{s?.update(e)}),n=[a,s],o[0]=a,o[1]=s,o[2]=t,o[3]=n):(t=o[2],n=o[3]),(0,b.useEffect)(t,n),o[4]!==a||o[5]!==s?(r=()=>{if(s)return s.subscribe(e=>{e.title=e.title||document.title,a?.post("visual-editing/navigate",e)})},i=[a,s],o[4]=a,o[5]=s,o[6]=r,o[7]=i):(r=o[6],i=o[7]),(0,b.useEffect)(r,i),null},iC=e=>{let t,n;let r=(0,v.c)(3),{comlink:i}=e;return r[0]!==i?(t=()=>{let e=()=>{i.post("visual-editing/meta",{title:document.title})},t=new MutationObserver(t=>{let[n]=t;"TITLE"===n.target.nodeName&&e()});return t.observe(document.head,{subtree:!0,characterData:!0,childList:!0}),e(),()=>t.disconnect()},n=[i],r[0]=i,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,b.useEffect)(t,n),null};function iT(e){let t=new CustomEvent("sanity/dragEnd",{detail:e,cancelable:!0});window.dispatchEvent(t)}let iP=(0,b.createContext)(null);function iR(){let e=(0,b.useContext)(iP);if(!e)throw Error("Schema context is missing");return e}function iL(e,t,n,r){if(!e.type)throw Error("Node type is missing");return()=>t.patch(()=>(function(e,t,n){let{path:r,key:i}=em(e);return[Y(r,V([{_type:t,_key:ef()}],n,{_key:i}))]})(e,n,r))}function iD(e){let{node:t,doc:n}=e;return n?[{type:"action",label:"Duplicate",icon:tw.TdU,action:function(e,t){if(!e.type)throw Error("Node type is missing");return()=>t.patch(async({getSnapshot:t})=>(function(e,t,n="after"){let{path:r,key:i}=em(e);return[Y(r,V({...en(t,e.path),_key:ef()},n,{_key:i}))]})(e,await t()))}(t,n),telemetryEvent:"Visual Editing Context Menu Item Duplicated"}]:[]}function iz(e){let{node:t,doc:n}=e;return n?[{type:"action",label:"Remove",icon:tw.YPx,action:function(e,t){if(!e.type)throw Error("Node type is missing");return()=>t.patch(async({getSnapshot:t})=>(function(e,t){let{path:n,key:r}=em(e),i=en(t,n).findIndex(e=>e._key===r);return[Y(n,F(i,i+1))]})(e,await t()))}(t,n),telemetryEvent:"Visual Editing Context Menu Item Removed"}]:[]}async function iN(e,t=!0){let{node:n,doc:r}=e;if(!r)return[];let i=[],o=[],[a,s,u,l]=await Promise.all([ey(n,r,"previous"),ey(n,r,"next"),ey(n,r,"first"),ey(n,r,"last")]);return u.length&&o.push({type:"action",label:"To top",icon:tw.VQ$,action:()=>r.patch(u),telemetryEvent:"Visual Editing Context Menu Item Moved"}),a.length&&o.push({type:"action",label:"Up",icon:tw.Kpk,action:()=>r.patch(a),telemetryEvent:"Visual Editing Context Menu Item Moved"}),s.length&&o.push({type:"action",label:"Down",icon:tw.ZLN,action:()=>r.patch(s),telemetryEvent:"Visual Editing Context Menu Item Moved"}),l.length&&o.push({type:"action",label:"To bottom",icon:tw.wvk,action:()=>r.patch(l),telemetryEvent:"Visual Editing Context Menu Item Moved"}),o.length&&(i.push({type:"group",label:"Move",icon:tw.ycB,items:o}),t&&i.push({type:"divider"})),i}async function iU(e){let{node:t,field:n,doc:r}=e,i=[];return i.push(...iD(e)),i.push(...iz(e)),i.push(...await iN(e)),i.push({type:"action",label:"Insert before",icon:tw.SKY,action:iL(t,r,n.name,"before"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}),i.push({type:"action",label:"Insert after",icon:tw.amD,action:iL(t,r,n.name,"after"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}),i}let iV=e=>{let t,n,r,i,o;let a=(0,v.c)(12),{label:s,parent:u,width:l,onSelect:c,boundaryElement:d}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=["left-start","right","left","right-end","left-end","bottom","top"],a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=[4,4,4,4],a[1]=n):n=a[1],a[2]!==d||a[3]!==l?(r={arrow:!1,constrainSize:!0,floatingBoundary:d,padding:0,placement:"right-start",fallbackPlacements:t,preventOverflow:!0,width:l,__unstable_margins:n},a[2]=d,a[3]=l,a[4]=r):r=a[4],a[5]!==c||a[6]!==u?(i=(0,h.jsx)(tA,{node:u,onSelect:c}),a[5]=c,a[6]=u,a[7]=i):i=a[7],a[8]!==s||a[9]!==r||a[10]!==i?(o=(0,h.jsx)(E.rX,{fontSize:1,icon:tw.amD,padding:2,popover:r,space:2,text:s,children:i}),a[8]=s,a[9]=r,a[10]=i,a[11]=o):o=a[11],o};async function iF(e){let{doc:t,node:n,parent:r}=e,i=[];if(i.push(...iD(e)),i.push(...iz(e)),i.push(...await iN(e)),r.options?.insertMenu){let e=(r.options.insertMenu||{}).views?.some(e=>"grid"===e.name)?0:void 0;i.push({type:"custom",component:({boundaryElement:i,sendTelemetry:o})=>(0,h.jsx)(iV,{label:"Insert before",onSelect:e=>{iL(n,t,e.name,"before")(),o("Visual Editing Context Menu Item Inserted",null)},parent:r,width:e,boundaryElement:i})}),i.push({type:"custom",component:({boundaryElement:i,sendTelemetry:o})=>(0,h.jsx)(iV,{label:"Insert after",onSelect:e=>{iL(n,t,e.name,"after")(),o("Visual Editing Context Menu Item Inserted",null)},parent:r,width:e,boundaryElement:i})})}else i.push({type:"group",label:"Insert before",icon:tw.SKY,items:r.of.filter(e=>"unionOption"===e.type).map(e=>({type:"action",icon:tx(e),label:"block"===e.name?"Paragraph":e.title||e.name,action:iL(n,t,e.name,"before"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}))}),i.push({type:"group",label:"Insert after",icon:tw.amD,items:r.of.filter(e=>"unionOption"===e.type).map(e=>({type:"action",label:"block"===e.name?"Paragraph":e.title||e.name,icon:tx(e),action:iL(n,t,e.name,"after"),telemetryEvent:"Visual Editing Context Menu Item Inserted"}))});return i}let iW=[-4,4,-4,4];function iY(e){let t;let n=(0,v.c)(27),{node:r,onDismiss:i,boundaryElement:o}=e,a=tO();n[0]!==r||n[1]!==i||n[2]!==a?(t=()=>{"action"===r.type&&(r.action?.(),i?.(),r.telemetryEvent&&a(r.telemetryEvent,null))},n[0]=r,n[1]=i,n[2]=a,n[3]=t):t=n[3];let s=t;if("divider"===r.type){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,h.jsx)(E.Nj,{}),n[4]=e):e=n[4],e}if("action"===r.type){let e;let t=!r.action;return n[5]!==r.hotkeys||n[6]!==r.icon||n[7]!==r.label||n[8]!==s||n[9]!==t?(e=(0,h.jsx)(E.Dr,{fontSize:1,hotkeys:r.hotkeys,icon:r.icon,padding:2,space:2,text:r.label,disabled:t,onClick:s}),n[5]=r.hotkeys,n[6]=r.icon,n[7]=r.label,n[8]=s,n[9]=t,n[10]=e):e=n[10],e}if("group"===r.type){let e,t,a;let s=r.icon;n[11]===Symbol.for("react.memo_cache_sentinel")?(e={arrow:!1,constrainSize:!0,placement:"right-start",fallbackPlacements:["left-start","right","left","right-end","left-end","bottom","top"],preventOverflow:!0,__unstable_margins:iW},n[11]=e):e=n[11];let u=r.label;if(n[12]!==o||n[13]!==r.items||n[14]!==i){let e;n[16]!==o||n[17]!==i?(e=(e,t)=>(0,h.jsx)(iY,{node:e,onDismiss:i,boundaryElement:o},t),n[16]=o,n[17]=i,n[18]=e):e=n[18],t=r.items.map(e),n[12]=o,n[13]=r.items,n[14]=i,n[15]=t}else t=n[15];return n[19]!==r.icon||n[20]!==r.label||n[21]!==t?(a=(0,h.jsx)(E.rX,{fontSize:1,icon:s,padding:2,popover:e,space:2,text:u,children:t}),n[19]=r.icon,n[20]=r.label,n[21]=t,n[22]=a):a=n[22],a}if("custom"===r.type){let e;let{component:t}=r;return n[23]!==t||n[24]!==o||n[25]!==a?(e=(0,h.jsx)(t,{boundaryElement:o,sendTelemetry:a}),n[23]=t,n[24]=o,n[25]=a,n[26]=e):e=n[26],e}return null}let iq=e=>{let t,n,r,i,o,a,s,u,l,c,d,p,f,m,y,g,w,x;let _=(0,v.c)(43),{node:j,onDismiss:k,position:I}=e,{x:S,y:M}=I,[O,$]=(0,b.useState)(null),{getField:A}=iR(),{getDocument:C}=ed();_[0]!==A||_[1]!==j?(t=A(j),_[0]=A,_[1]=j,_[2]=t):t=_[2];let{field:T,parent:P}=t;n=T?.title||T?.name||"Unknown type";let[R,L]=(0,b.useState)(void 0);_[3]!==T||_[4]!==C||_[5]!==j||_[6]!==P?(r=()=>{(async()=>{let e=C(j.id);e&&L(await function(e){let{node:t,field:n,parent:r,doc:i}=e;return n?.type==="arrayItem"?iU({node:t,field:n,doc:i}):r?.type==="union"?iF({node:t,parent:r,doc:i}):Promise.resolve([])}({node:j,field:T,parent:P,doc:e}))})()},i=[T,j,P,C],_[3]=T,_[4]=C,_[5]=j,_[6]=P,_[7]=r,_[8]=i):(r=_[7],i=_[8]),(0,b.useEffect)(r,i),_[9]!==S||_[10]!==M?(a={getBoundingClientRect:()=>({bottom:M,left:S,right:S,top:M,width:0,height:0})},_[9]=S,_[10]=M,_[11]=a):a=_[11],o=a,_[12]!==T?(u=tx(T),_[12]=T,_[13]=u):u=_[13],s=u,_[14]===Symbol.for("react.memo_cache_sentinel")?(l={minWidth:120,maxWidth:160},_[14]=l):l=_[14],_[15]!==s||_[16]!==R?(c=(0,h.jsx)(E.az,{flex:"none",children:R?(0,h.jsx)(E.EY,{size:1,children:s}):(0,h.jsx)(E.y$,{size:1})}),_[15]=s,_[16]=R,_[17]=c):c=_[17];let D=R?n:"Loading...";_[18]!==D?(d=(0,h.jsx)(E.BJ,{flex:1,space:2,children:(0,h.jsx)(E.EY,{size:1,weight:"semibold",children:D})}),_[18]=D,_[19]=d):d=_[19],_[20]!==c||_[21]!==d?(p=(0,h.jsxs)(E.so,{gap:2,padding:2,children:[c,d]}),_[20]=c,_[21]=d,_[22]=p):p=_[22],_[23]!==O||_[24]!==R||_[25]!==k?(f=R&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(E.Nj,{}),R.map((e,t)=>(0,h.jsx)(iY,{node:e,onDismiss:k,boundaryElement:O},t))]}),_[23]=O,_[24]=R,_[25]=k,_[26]=f):f=_[26],_[27]!==p||_[28]!==f?(m=(0,h.jsxs)(E.W1,{style:l,children:[p,f]}),_[27]=p,_[28]=f,_[29]=m):m=_[29];let z=`${S}-${M}`;return _[30]!==S||_[31]!==M?(y={position:"absolute",left:S,top:M},_[30]=S,_[31]=M,_[32]=y):y=_[32],_[33]!==z||_[34]!==y?(g=(0,h.jsx)("div",{style:y},z),_[33]=z,_[34]=y,_[35]=g):g=_[35],_[36]!==o||_[37]!==m||_[38]!==g?(w=(0,h.jsx)(E.AM,{__unstable_margins:iW,arrow:!1,open:!0,placement:"right-start",referenceElement:o,content:m,children:g}),_[36]=o,_[37]=m,_[38]=g,_[39]=w):w=_[39],_[40]!==k||_[41]!==w?(x=(0,h.jsx)(tj,{setBoundaryElement:$,onDismiss:k,children:w}),_[40]=k,_[41]=w,_[42]=x):x=_[42],x},iB=(0,b.createContext)(null),iG=e=>(0,b.isValidElement)(e),iX=(0,_.I4)(E.Zp)`
  background-color: var(--overlay-bg);
  border-radius: 3px;
  pointer-events: none;
  position: absolute;
  will-change: transform;
  box-shadow: var(--overlay-box-shadow);
  transition: none;

  --overlay-bg: transparent;
  --overlay-box-shadow: inset 0 0 0 1px transparent;

  [data-overlays] & {
    --overlay-bg: color-mix(in srgb, transparent 95%, var(--card-focus-ring-color));
    --overlay-box-shadow: inset 0 0 0 2px
      color-mix(in srgb, transparent 50%, var(--card-focus-ring-color));
  }

  [data-fading-out] & {
    transition:
      box-shadow 1550ms,
      background-color 1550ms;

    --overlay-bg: rgba(0, 0, 255, 0);
    --overlay-box-shadow: inset 0 0 0 1px transparent;
  }

  &[data-focused] {
    --overlay-box-shadow: inset 0 0 0 1px var(--card-focus-ring-color);
  }

  &[data-hovered]:not([data-focused]) {
    transition: none;
    --overlay-box-shadow: inset 0 0 0 2px var(--card-focus-ring-color);
  }

  /* [data-unmounted] & {
    --overlay-box-shadow: inset 0 0 0 1px var(--card-focus-ring-color);
  } */

  :link {
    text-decoration: none;
  }
`,iH=(0,_.I4)(E.so)`
  bottom: 100%;
  cursor: pointer;
  pointer-events: none;
  position: absolute;
  right: 0;

  [data-hovered] & {
    pointer-events: all;
  }

  [data-flipped] & {
    bottom: auto;
    top: 100%;
  }
`,iK=(0,_.I4)(E.so)`
  bottom: 100%;
  cursor: pointer;
  pointer-events: none;
  position: absolute;
  left: 0;

  [data-hovered] & {
    pointer-events: all;
  }

  [data-flipped] & {
    bottom: auto;
    top: 100%;
  }
`,iZ=(0,_.I4)(E.Zp)`
  cursor: pointer;
  background-color: var(--card-focus-ring-color);
  right: 0;
  border-radius: 3px;

  & [data-ui='Text'] {
    color: #fff;
    white-space: nowrap;
  }
`,iJ=(0,_.I4)(E.so)`
  display: flex;
  align-items: center;
  background-color: var(--card-focus-ring-color);
  right: 0;
  border-radius: 3px;
  & [data-ui='Text'],
  & [data-sanity-icon] {
    color: #fff;
    white-space: nowrap;
  }
`,iQ=e=>{let t,n,r,i,o,a,s,u,l,c;let d=(0,v.c)(35),{element:p,focused:f,componentResolver:m,node:y,showActions:g,draggable:w}=e,{getField:_,getType:j}=iR();d[0]!==j||d[1]!==y?(t=j(y),d[0]=j,d[1]=y,d[2]=t):t=d[2];let k=t;d[3]!==_||d[4]!==y?(n=_(y),d[3]=_,d[4]=y,d[5]=n):n=d[5];let{field:I,parent:S}=n;d[6]!==y?(r="path"in y?function(e){let{id:t,type:n,path:r,baseUrl:i,tool:o,workspace:a}=e;return(0,x.iz)({baseUrl:i,workspace:a,tool:o,type:n,id:t,path:function(e){let t="";for(let n of e){if("string"==typeof n){t&&(t+="."),t+=n;continue}if("number"==typeof n){t&&(t+=":"),t+=`${n}`;continue}if(null!==n&&Array.isArray(n)){t&&(t+=":"),t+=`${n.join(",")}}`;continue}if(n._key){t&&(t+=":"),t+=`${n._key}`;continue}}return t}(x.C.fromString(r))})}(y):y.href,d[6]=y,d[7]=r):r=d[7];let M=r,O=function(){let e=(0,b.useContext)(iB);if(!e)throw Error("Preview Snapshots context is missing");return e}();e:{let e;if(!("path"in y)){i=void 0;break e}d[8]!==y||d[9]!==O?(e=O.find(e=>e._id===y.id)?.title,d[8]=y,d[9]=O,d[10]=e):e=d[10],i=e}let $=i;t:{let e;if(!("path"in y)||!I||!k){o=void 0;break t}let t=I.value.type,n=!!f;d[11]!==p||d[12]!==I||d[13]!==y||d[14]!==S||d[15]!==k||d[16]!==n||d[17]!==t?(e={document:k,element:p,field:I,focused:n,node:y,parent:S,type:t},d[11]=p,d[12]=I,d[13]=y,d[14]=S,d[15]=k,d[16]=n,d[17]=t,d[18]=e):e=d[18],o=e}let A=o,C=function(e,t){let n;let r=(0,v.c)(4);e:{let i;if(!e){n=void 0;break e}if(r[0]!==e||r[1]!==t){let o=t?.(e);if(!o){n=void 0;break e}if(iG(o)){n=o;break e}i=(Array.isArray(o)?o:[o]).map(i1),r[0]=e,r[1]=t,r[2]=i,r[3]=n}else i=r[2],n=r[3];n=i}return n}(A,m);d[19]!==k?(a=k?.icon?(0,h.jsx)("div",{dangerouslySetInnerHTML:{__html:k.icon}}):(0,h.jsx)(tw.pyG,{}),d[19]=k,d[20]=a):a=d[20];let T=a;return d[21]!==M||d[22]!==g?(s=g?(0,h.jsx)(iH,{gap:1,paddingY:1,"data-sanity-overlay-element":!0,children:(0,h.jsx)(i2,{href:M})}):null,d[21]=M,d[22]=g,d[23]=s):s=d[23],d[24]!==w||d[25]!==T||d[26]!==$?(u=$&&(0,h.jsx)(iK,{gap:1,paddingY:1,children:(0,h.jsxs)(iJ,{gap:2,padding:2,children:[w&&(0,h.jsx)(E.az,{marginRight:1,children:(0,h.jsx)(E.EY,{className:"drag-handle",size:0,children:(0,h.jsx)(tw.GG1,{})})}),(0,h.jsx)(E.EY,{size:0,children:T}),(0,h.jsx)(E.EY,{size:1,weight:"medium",children:$})]})}),d[24]=w,d[25]=T,d[26]=$,d[27]=u):u=d[27],d[28]!==A||d[29]!==C?(l=Array.isArray(C)?C.map((e,t)=>{let{component:n,props:r}=e;return(0,h.jsx)(n,{PointerEvents:tP,...A,...r},t)}):C,d[28]=A,d[29]=C,d[30]=l):l=d[30],d[31]!==s||d[32]!==u||d[33]!==l?(c=(0,h.jsxs)(h.Fragment,{children:[s,u,l]}),d[31]=s,d[32]=u,d[33]=l,d[34]=c):c=d[34],c},i0=(0,b.memo)(function(e){let t,n,r,i,o,a,s,u;let l=(0,v.c)(24),{draggable:c,focused:d,hovered:p,rect:f,wasMaybeCollapsed:m,enableScrollIntoView:y}=e,g=(0,b.useRef)(null),w=(0,b.useRef)(!1),x=`${f.w}px`,E=`${f.h}px`,_=`translate(${f.x}px, ${f.y}px)`;l[0]!==x||l[1]!==E||l[2]!==_?(n={width:x,height:E,transform:_},l[0]=x,l[1]=E,l[2]=_,l[3]=n):n=l[3],t=n,l[4]!==y||l[5]!==d||l[6]!==m?(r=()=>{if(!w.current&&!m&&!0===d&&g.current&&y){let e=g.current;(0,tR.A)(g.current,{behavior:t=>{0!==t.length&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},scrollMode:"if-needed",block:"center",inline:"nearest"})}w.current=!0===d},i=[d,m,y],l[4]=y,l[5]=d,l[6]=m,l[7]=r,l[8]=i):(r=l[7],i=l[8]),(0,b.useEffect)(r,i);let[j,k]=(0,b.useState)(!1);l[9]!==p?(o=()=>{if(!g.current||!p)return;let e=new IntersectionObserver(e=>{let[t]=e;k(t.boundingClientRect.top<0)},{threshold:1});return e.observe(g.current),()=>e.disconnect()},l[9]=p,l[10]=o):o=l[10],l[11]!==p||l[12]!==j?(a=[p,j],l[11]=p,l[12]=j,l[13]=a):a=l[13],(0,b.useEffect)(o,a);let I=d?"":void 0,S=p?"":void 0,M=j?"":void 0,O=c?"":void 0;return l[14]!==p||l[15]!==e?(s=p&&(0,h.jsx)(iQ,{...e}),l[14]=p,l[15]=e,l[16]=s):s=l[16],l[17]!==t||l[18]!==S||l[19]!==M||l[20]!==O||l[21]!==s||l[22]!==I?(u=(0,h.jsx)(iX,{"data-focused":I,"data-hovered":S,"data-flipped":M,"data-draggable":O,ref:g,style:t,children:s}),l[17]=t,l[18]=S,l[19]=M,l[20]=O,l[21]=s,l[22]=I,l[23]=u):u=l[23],u});function i1(e){return"object"==typeof e&&"component"in e?e:{component:e,props:{}}}let i2=(0,b.memo)(function(e){let t,n,r,i;let o=(0,v.c)(6),a=(0,b.useSyncExternalStore)(i3,i4);return o[0]!==e.href||o[1]!==a?(n=function e(t,n){try{let r=new URL(t,typeof location>"u"?void 0:location.origin);if(r.hash){let t=new URL(e(r.hash.slice(1),n));return`${r.origin}${r.pathname}${r.search}#${t.pathname}${t.search}`}return r.searchParams.set("preview",n),r.toString()}catch{return t}}(e.href,a),o[0]=e.href,o[1]=a,o[2]=n):n=o[2],t=n,o[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,h.jsx)(iZ,{padding:2,children:(0,h.jsx)(E.EY,{size:1,weight:"medium",children:"Open in Studio"})}),o[3]=r):r=o[3],o[4]!==t?(i=(0,h.jsx)(E.az,{as:"a",href:t,target:"_blank",rel:"noopener noreferrer",children:r}),o[4]=t,o[5]=i):i=o[5],i});function i3(e){let t=()=>e();return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)}function i4(){return window.location.href}let i5=e=>{let t;let n=(0,v.c)(5),{dragGroupRect:r}=e,i=`${r.y}px`,o=`${r.x}px`,a=`${r.w-1}px`,s=`${r.h-1}px`;return n[0]!==i||n[1]!==o||n[2]!==a||n[3]!==s?(t=(0,h.jsx)("div",{style:{position:"absolute",top:i,left:o,width:a,height:s,border:"1px dashed #f0709b",pointerEvents:"none"}}),n[0]=i,n[1]=o,n[2]=a,n[3]=s,n[4]=t):t=n[4],t},i6=e=>{let t;let n=(0,v.c)(4),{dragInsertPosition:r}=e;if(null===r)return;let i=r?.left||r?.right?"horizontal":"vertical",o=0,a=0,s=0,u=0;if("horizontal"===i){let{left:e,right:t}=r;if(s=6,t&&e){let n=e.rect.x+e.rect.w,r=t.rect.x,i=.0125*Math.min(t.rect.h,e.rect.h);o=.5*n+.5*r-3,a=e.rect.y+i,u=Math.min(t.rect.h,e.rect.h)-2*i}else if(t&&!e){let e=.0125*t.rect.h;o=t.rect.x-3,a=t.rect.y+e,u=t.rect.h-2*e}else if(e&&!t){let t=.0125*e.rect.h;o=e.rect.x+e.rect.w-3,a=e.rect.y+t,u=e.rect.h-2*t}}else{let{bottom:e,top:t}=r;if(e&&t){let n=Math.min(t.rect.x,e.rect.x),r=t.rect.y+t.rect.h,i=e.rect.y,l=.0125*Math.min(e.rect.w,t.rect.w);u=6,o=n+l,a=.5*r+.5*i-3,s=Math.max(e.rect.w,t.rect.w)-2*l}else if(e&&!t){let t=.0125*e.rect.w;o=e.rect.x+t,a=e.rect.y-3,s=e.rect.w-2*t,u=6}else if(t&&!e){let e=.0125*t.rect.w;o=t.rect.x+e,a=t.rect.y+t.rect.h-3,s=t.rect.w-2*e,u=6}}let l=`${s}px`,c=`${u}px`,d=`translate(${o}px, ${a}px)`;return n[0]!==l||n[1]!==c||n[2]!==d?(t=(0,h.jsx)("div",{style:{position:"absolute",width:l,height:c,transform:d,background:"#556bfc",border:"2px solid white",borderRadius:"999px",zIndex:"999999"}}),n[0]=l,n[1]=c,n[2]=d,n[3]=t):t=n[3],t},i9=_.I4.div`
  --drag-preview-opacity: 0.98;
  --drag-preview-skeleton-stroke: #ffffff;

  @media (prefers-color-scheme: dark) {
    --drag-preview-skeleton-stroke: #383d51;
  }

  position: fixed;
  display: grid;
  transform: ${({$scaleFactor:e,$width:t,$height:n})=>`translate(calc(var(--drag-preview-x) - ${t/2}px), calc(var(--drag-preview-y) - ${n/2}px)) scale(${e})`};
  width: ${({$width:e})=>`${e}px`};
  height: ${({$height:e})=>`${e}px`};
  z-index: 9999999;
  opacity: var(--drag-preview-opacity);
  cursor: move;

  .drag-preview-content-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    container-type: inline-size;
  }

  [data-ui='card'] {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .drag-preview-skeleton {
    position: absolute;
    inset: 0;

    rect {
      stroke: var(--drag-preview-skeleton-stroke);
    }
  }

  .drag-preview-handle {
    position: absolute;
    top: 4cqmin;
    left: 4cqmin;
    width: 6cqmin;
    fill: var(--drag-preview-handle-fill);
  }
`,i8=e=>{let t,n,r,i,o,a,s,u,l,c,d,p,f,m,y,g,b,w,x,_,j;let k=(0,v.c)(50),{skeleton:I}=e,S=Math.min(I.maxWidth,window.innerWidth/2),M=I.w>S?S/I.w:1,O=I.offsetX*M,$=I.offsetY*M,A=(0,E.Xy)(),C=(0,E.M4)(),T=C.radius[~~function(e,t,n,r,i){var o;return(o=(e-0)*(i-1)/1920+1)<r?r:o>i?i:o}(I.w,0,0,1,C.radius.length-2)];if(k[0]!==O||k[1]!==$||k[2]!==A||k[3]!==T||k[4]!==M||k[5]!==I.childRects||k[6]!==I.h||k[7]!==I.w){let e=I.childRects.filter(i7),h=I.childRects.filter(oe);n=i9,i=I.w,o=I.h,a=O,s=$,u=M,t=E.Zp,p=T,f=4,m="hidden",y="transparent",g=A?"dark":"light",d="drag-preview-content-wrapper",l="drag-preview-skeleton",c=`0 0 ${I.w} ${I.h}`,r=[...e,...h],k[0]=O,k[1]=$,k[2]=A,k[3]=T,k[4]=M,k[5]=I.childRects,k[6]=I.h,k[7]=I.w,k[8]=t,k[9]=n,k[10]=r,k[11]=i,k[12]=o,k[13]=a,k[14]=s,k[15]=u,k[16]=l,k[17]=c,k[18]=d,k[19]=p,k[20]=f,k[21]=m,k[22]=y,k[23]=g}else t=k[8],n=k[9],r=k[10],i=k[11],o=k[12],a=k[13],s=k[14],u=k[15],l=k[16],c=k[17],d=k[18],p=k[19],f=k[20],m=k[21],y=k[22],g=k[23];return k[24]!==r||k[25]!==C.color?(b=r.map((e,t)=>(0,h.jsx)("rect",{x:e.x,y:e.y,width:e.w,height:e.h,fill:C.color.skeleton.from},t)),k[24]=r,k[25]=C.color,k[26]=b):b=k[26],k[27]!==b||k[28]!==l||k[29]!==c?(w=(0,h.jsx)("svg",{className:l,viewBox:c,children:b}),k[27]=b,k[28]=l,k[29]=c,k[30]=w):w=k[30],k[31]!==w||k[32]!==d?(x=(0,h.jsx)("div",{className:d,children:w}),k[31]=w,k[32]=d,k[33]=x):x=k[33],k[34]!==t||k[35]!==x||k[36]!==p||k[37]!==f||k[38]!==m||k[39]!==y||k[40]!==g?(_=(0,h.jsx)(t,{radius:p,shadow:f,overflow:m,tone:y,scheme:g,children:x}),k[34]=t,k[35]=x,k[36]=p,k[37]=f,k[38]=m,k[39]=y,k[40]=g,k[41]=_):_=k[41],k[42]!==n||k[43]!==i||k[44]!==o||k[45]!==a||k[46]!==s||k[47]!==u||k[48]!==_?(j=(0,h.jsx)(n,{$width:i,$height:o,$offsetX:a,$offsetY:s,$scaleFactor:u,children:_}),k[42]=n,k[43]=i,k[44]=o,k[45]=a,k[46]=s,k[47]=u,k[48]=_,k[49]=j):j=k[49],j};function i7(e){return"IMG"===e.tagName}function oe(e){return"IMG"!==e.tagName}let ot=(0,_.I4)(E.Zp)`
  position: fixed;
  bottom: 2rem;
  left: 2rem;
`,on=()=>{let e,t;let n=(0,v.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={zIndex:"999999"},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.jsx)(ot,{padding:2,shadow:2,radius:2,style:e,children:(0,h.jsxs)(E.so,{align:"center",gap:2,children:[(0,h.jsx)(E.qW,{keys:["Shift"]}),(0,h.jsx)(E.EY,{size:1,children:"Zoom Out"}),(0,h.jsx)(tw.mSu,{})]})}),n[1]=t):t=n[1],t},or=(e,t)=>{let{type:n}=t;switch(n){case"element/register":return e.find(e=>e.id===t.id)?e:[...e,{id:t.id,activated:!1,element:t.element,focused:!1,hovered:!1,rect:t.rect,sanity:t.sanity,dragDisabled:t.dragDisabled}];case"element/activate":return e.map(e=>e.id===t.id?{...e,activated:!0}:e);case"element/update":return e.map(e=>e.id===t.id?{...e,sanity:t.sanity,rect:t.rect}:e);case"element/unregister":return e.filter(e=>e.id!==t.id);case"element/deactivate":return e.map(e=>e.id===t.id?{...e,activated:!1,hovered:!1}:e);case"element/mouseenter":return e.map(e=>e.id===t.id?{...e,rect:t.rect,hovered:!0}:{...e,hovered:!1});case"element/mouseleave":return e.map(e=>e.id===t.id?{...e,hovered:!1}:e);case"element/updateRect":return e.map(e=>e.id===t.id?{...e,rect:t.rect}:e);case"element/click":return e.map(e=>({...e,focused:e.id===t.id&&"clicked"}));case"overlay/blur":return e.map(e=>({...e,focused:!1}));case"presentation/blur":return e.map(e=>({...e,focused:!1}));case"presentation/focus":{let n=e.find(e=>"clicked"===e.focused);return e.map(e=>{let r="path"in e.sanity&&e.sanity.id===t.data.id&&e.sanity.path===t.data.path;return n&&e===n&&r?e:{...e,focused:r&&n?"duplicate":r}})}default:return e}};function oi(e,t){let{type:n}=t,{contextMenu:r,focusPath:i,perspective:o,isDragging:a,dragInsertPosition:s,dragShowMinimap:u,dragShowMinimapPrompt:l,dragSkeleton:c,dragMinimapTransition:d,dragGroupRect:p}=e,f=!1;if("presentation/focus"===n){let n=e.focusPath;n!==(i=t.data.path)&&(f=n.slice(i.length).startsWith("["))}return"presentation/perspective"===n&&(o=t.data.perspective),"element/contextmenu"===n&&(r="sanity"in t?{node:t.sanity,position:t.position}:null),("element/click"===n||"element/mouseleave"===n||"overlay/blur"===n||"presentation/blur"===n||"presentation/focus"===n)&&(r=null),"overlay/dragUpdateInsertPosition"===n&&(s=t.insertPosition),"overlay/dragStart"===n&&(a=!0),"overlay/dragUpdateSkeleton"===t.type&&(c=t.skeleton),"overlay/dragEnd"===n&&(a=!1),"overlay/dragToggleMinimapPrompt"===t.type&&(l=t.display),"overlay/dragStartMinimapTransition"===n&&(d=!0),"overlay/dragEndMinimapTransition"===n&&(d=!1),"overlay/dragUpdateGroupRect"===n&&(p=t.groupRect),"overlay/dragToggleMinimap"===n&&(u=t.display),{...e,contextMenu:r,elements:or(e.elements,t),dragInsertPosition:s,dragSkeleton:c,dragGroupRect:p,isDragging:a,focusPath:i,perspective:o,wasMaybeCollapsed:f,dragShowMinimap:u,dragShowMinimapPrompt:l,dragMinimapTransition:d}}let oo=function(e){let t,n,r,i,o,a,s;let u=(0,v.c)(13),{comlink:l,children:c}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],u[0]=t):t=u[0];let[d,p]=(0,b.useState)(t);u[1]!==l?(n=async e=>{if(l)try{let t=await l.fetch("visual-editing/preview-snapshots",void 0,{signal:e,suppressWarnings:!0});p(t.snapshots)}catch{}},u[1]=l,u[2]=n):n=u[2];let f=n;return u[3]!==l||u[4]!==f?(r=()=>{if(!l)return;let e=new AbortController,t=l.onStatus(()=>{f(e.signal)},"connected");return()=>{e.abort(),t()}},i=[l,f],u[3]=l,u[4]=f,u[5]=r,u[6]=i):(r=u[5],i=u[6]),(0,b.useEffect)(r,i),u[7]!==l?(o=()=>l?.on("presentation/preview-snapshots",e=>{p(e.snapshots)}),a=[l],u[7]=l,u[8]=o,u[9]=a):(o=u[8],a=u[9]),(0,b.useEffect)(o,a),u[10]!==c||u[11]!==d?(s=(0,h.jsx)(iB.Provider,{value:d,children:c}),u[10]=c,u[11]=d,u[12]=s):s=u[12],s};function oa(e){return"document"===e.type}function os(e){return"type"===e.type}let ou=function(e){let t,n,r,i,o,a,s,u,l,c,d,p;let f=(0,v.c)(22),{comlink:m,children:y,elements:g}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Map,f[0]=t):t=f[0];let[w,x]=(0,b.useState)(t),[E,_]=(0,b.useState)(null);f[1]!==m?(n=()=>{if(!m)return;let e=async function(e){if(m)try{let t=await m.fetch("visual-editing/schema",void 0,{signal:e,suppressWarnings:!0});_(t.schema)}catch{}},t=new AbortController,n=m.onStatus(()=>{e(t.signal)},"connected");return()=>{t.abort(),n()}},r=[m],f[1]=m,f[2]=n,f[3]=r):(n=f[2],r=f[3]),(0,b.useEffect)(n,r),f[4]===Symbol.for("react.memo_cache_sentinel")?(i=[],f[4]=i):i=f[4];let j=(0,b.useRef)(i),k=(0,b.useDeferredValue)(g);f[5]!==k?(o=k.reduce((e,t)=>{let{sanity:n}=t;if(!("id"in n)||!n.path.includes("[_key=="))return e;let r=n.path.split(".").toReversed().reduce((e,t)=>e.length?[t,...e]:t.includes("[_key==")?[t]:[],[]).join(".");return e.find(e=>e.id===n.id&&e.path===r)||e.push({id:n.id,path:r}),e},[]),f[5]=k,f[6]=o):o=f[6];let I=o,S=(0,b.useRef)(null);f[7]!==m||f[8]!==I?(a=()=>{if(!I.length||!m)return;let e=async(e,t)=>{let n=j.current;try{j.current=e;let n=await m.fetch("visual-editing/schema-union-types",{paths:e},{signal:t,suppressWarnings:!0});if(t.aborted)return;x(n.types),S.current=null}catch{}t.aborted&&(j.current=n)};I.some(e=>!j.current.find(t=>{let{id:n,path:r}=t;return n===e.id&&r===e.path}))&&(S.current?.abort(),S.current=new AbortController,e(I,S.current.signal))},s=[m,I],f[7]=m,f[8]=I,f[9]=a,f[10]=s):(a=f[9],s=f[10]),(0,b.useEffect)(a,s),f[11]!==E?(u=(e,t)=>{if(!E||"string"!=typeof e&&(!("path"in e)||!Array.isArray(E)))return;let n="string"==typeof e?e:e.type;return E.filter("document"===(t||"document")?oa:os).find(e=>e.name===n)},f[11]=E,f[12]=u):u=f[12];let M=u;f[13]!==M||f[14]!==w?(l=e=>{if(!("path"in e))return{field:void 0,parent:void 0};let t=M(e);if(!t)return{field:void 0,parent:void 0};let n=e.path.split(".").flatMap(ol);try{return function t(n,r,i,o){let a=void 0===o?[]:o;if(!n)return{field:void 0,parent:void 0};let[s,...u]=r;if("fields"in n){let e=n.fields[s];if(!e&&"rest"in n)return t(n.rest,r,n,a);if(!u.length)return{field:e,parent:i};if(!e)throw Error(`[@sanity/visual-editing] No field could be resolved at path: "${[...a,...r].join(".")}"`);return t(e.value,u,n,[...a,s])}if("array"===n.type)return t(n.of,r,n,a);if("arrayItem"===n.type)return u.length?t(n.value,u,n,[...a,s]):{field:n,parent:i};if("union"===n.type){let r=s.startsWith("[_key==")?w?.get(e.id)?.get([a.join("."),s].filter(Boolean).join("")):s;return t(n.of.find(e=>"unionOption"===e.type?e.name===r:e),u,n,[...a,s])}if("unionOption"===n.type)return s?t(n.value,r,n,a):{field:n,parent:i};if("inline"===n.type)return t(M(n.name,"type").value,r,n,a);throw Error(`[@sanity/visual-editing] No field could be resolved at path: "${[...a,...r].join(".")}"`)}(t,n,void 0)}catch(e){return e instanceof Error&&console.warn(e.message),{field:void 0,parent:void 0}}},f[13]=M,f[14]=w,f[15]=l):l=f[15];let O=l;return f[16]!==O||f[17]!==M?(d={getField:O,getType:M},f[16]=O,f[17]=M,f[18]=d):d=f[18],c=d,f[19]!==y||f[20]!==c?(p=(0,h.jsx)(iP.Provider,{value:c,children:y}),f[19]=y,f[20]=c,f[21]=p):p=f[21],p};function ol(e){return e.includes("[")?e.split(/(\[.+\])/,2):[e]}let oc=(e=>{let t=e,n=new Set;return{getState:()=>t,setState:e=>{t=e(t),n.forEach(e=>e())},subscribe:e=>(n.add(e),()=>n.delete(e))}})({}),od=e=>{let t,n,r,i,o,a,s;let u=(0,v.c)(11),{comlink:l,children:c}=e;return u[0]!==l?(t=()=>l?.on("presentation/shared-state",op),n=[l],u[0]=l,u[1]=t,u[2]=n):(t=u[1],n=u[2]),(0,b.useEffect)(t,n),u[3]!==l?(r=()=>{(async function(){let e=await l?.fetch("visual-editing/shared-state",void 0,{suppressWarnings:!0});e&&oc.setState(()=>e.state)})().catch(of)},i=[l],u[3]=l,u[4]=r,u[5]=i):(r=u[4],i=u[5]),(0,b.useEffect)(r,i),u[6]!==l?(a={comlink:l,store:oc},u[6]=l,u[7]=a):a=u[7],o=a,u[8]!==c||u[9]!==o?(s=(0,h.jsx)(tg.Provider,{value:o,children:c}),u[8]=c,u[9]=o,u[10]=s):s=u[10],s};function op(e){"value"in e?oc.setState(t=>({...t,[e.key]:e.value})):oc.setState(t=>Object.fromEntries(Object.entries(t).filter(t=>{let[n]=t;return n!==e.key})))}function of(e){console.debug(e),console.warn("[@sanity/visual-editing]: Failed to fetch shared state. Check your version of `sanity` is up-to-date")}let om=e=>{let t,n;let r=(0,v.c)(5),{children:i,comlink:o}=e;r[0]!==o?(t=(e,t)=>{if(!o)return;let n=tS[e];if(n)o.post("visual-editing/telemetry-log",{event:n,data:t});else throw Error(`Telemetry event: ${e} does not exist`)},r[0]=o,r[1]=t):t=r[1];let a=t;return r[2]!==i||r[3]!==a?(n=(0,h.jsx)(tM.Provider,{value:a,children:i}),r[2]=i,r[3]=a,r[4]=n):n=r[4],n};function oy(){}function oh(e){return e.id}function ov(e){return!!e}function og(e){let{sanity:t}=e;return"id"in t?t:null}let ob=_.I4.div`
  background-color: transparent;
  direction: ltr;
  inset: 0;
  pointer-events: none;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${({$zIndex:e})=>e??"9999999"};
`;function ow(e){let t,n;return t=requestAnimationFrame(()=>{n=requestAnimationFrame(e)}),()=>{void 0!==t&&cancelAnimationFrame(t),void 0!==n&&cancelAnimationFrame(n)}}let ox=e=>{let t,n,r,i,o;let a=(0,v.c)(8),{documentIds:s}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],a[0]=t):t=a[0];let[u,l]=(0,b.useState)(t);a[1]!==s?(n=()=>{l(e=>{let t=Array.from(new Set(s));return e.length===t.length&&e.reduce(oI,t)?.length===0?e:t})},r=[s],a[1]=s,a[2]=n,a[3]=r):(n=a[2],r=a[3]),(0,b.useEffect)(n,r);let c=ei();return a[4]!==c||a[5]!==u?(i=()=>{for(let e of u)c.send({type:"observe",documentId:(0,x.T4)(e)}),c.send({type:"observe",documentId:(0,x.IM)(e)});return()=>{for(let e of u)c.send({type:"unobserve",documentId:(0,x.T4)(e)}),c.send({type:"unobserve",documentId:(0,x.IM)(e)})}},o=[c,u],a[4]=c,a[5]=u,a[6]=i,a[7]=o):(i=a[6],o=a[7]),(0,b.useEffect)(i,o),null},oE=e=>{let t,n,i;let o=(0,v.c)(12),{comlink:a,dispatch:s,inFrame:u,inPopUp:l,onDrag:c,overlayEnabled:d,rootElement:p}=e,{dispatchDragEndEvent:f}=function(){let e,t,n;let r=(0,v.c)(4),{getDocument:i}=ed();return r[0]!==i?(e=()=>{let e=e=>{let{insertPosition:t,target:n,preventInsertDefault:r}=e.detail;if(r)return;let o=function(e){if(e){let{top:t,right:n,bottom:r,left:i}=e;if(i||t)return{node:(i??t).sanity,position:"after"};if(n||r)return{node:(n??r).sanity,position:"before"}}}(t);if(o){let e=i(n.id),{node:t,position:r}=o,{key:a,hasExplicitKey:s}=em(n),{path:u,key:l}=em(t);u&&l&&l!==a&&e.patch(async e=>{let{getSnapshot:t}=e,i=en(await t(),n.path);return s?[Y(u,W({_key:a})),Y(u,V(i,r,{_key:l}))]:[Y(u,W(~~a)),Y(u,V(i,r,l>a?~~l-1:~~l))]})}};return window.addEventListener("sanity/dragEnd",e),()=>{window.removeEventListener("sanity/dragEnd",e)}},t=[i],r[0]=i,r[1]=e,r[2]=t):(e=r[1],t=r[2]),(0,b.useEffect)(e,t),r[3]===Symbol.for("react.memo_cache_sentinel")?(n={dispatchDragEndEvent:iT},r[3]=n):n=r[3],n}(),m=tO();o[0]!==a||o[1]!==s||o[2]!==f||o[3]!==c||o[4]!==m?(t=e=>{if("element/click"===e.type){let{sanity:t}=e;a?.post("visual-editing/focus",t),m("Visual Editing Overlay Clicked",null)}else if("overlay/activate"===e.type)a?.post("visual-editing/toggle",{enabled:!0});else if("overlay/deactivate"===e.type)a?.post("visual-editing/toggle",{enabled:!1});else if("overlay/dragEnd"===e.type){let{insertPosition:t,target:n,dragGroup:r,flow:i,preventInsertDefault:o}=e;f({insertPosition:t,target:n,dragGroup:r,flow:i,preventInsertDefault:o}),t&&m("Visual Editing Drag Sequence Completed",null)}else if("overlay/dragUpdateCursorPosition"===e.type){c(e.x,e.y);return}else if("overlay/dragToggleMinimap"===e.type&&!0===e.display)m("Visual Editing Drag Minimap Enabled",null);else if("overlay/setCursor"===e.type){let{element:t,cursor:n}=e;n?t.style.cursor=n:t.style.removeProperty("cursor")}s(e)},o[0]=a,o[1]=s,o[2]=f,o[3]=c,o[4]=m,o[5]=t):t=o[5];let y=function(e,t,n,i){let o,a;let s=(0,v.c)(7),u=(0,b.useRef)(void 0),l=ei()!==B;return s[0]!==e||s[1]!==t||s[2]!==n||s[3]!==i||s[4]!==l?(o=()=>{if(e)return u.current=function({handler:e,overlayElement:t,inFrame:n,inPopUp:i,optimisticActorReady:o}){let a=!1,s=new Map,u=new WeakMap,l=new Set,c=new WeakMap,d=new WeakMap,p,f,m,y=!1,h=[],v=()=>h[h.length-1];function g(e,t){e.removeEventListener("click",t.click,{capture:!0}),e.removeEventListener("contextmenu",t.contextmenu,{capture:!0}),e.removeEventListener("mousemove",t.mousemove,{capture:!0}),e.removeEventListener("mousedown",t.mousedown,{capture:!0}),e.removeEventListener("mouseenter",t.mouseenter),e.removeEventListener("mouseleave",t.mouseleave)}function b({id:t,elements:n,handlers:r}){let{element:i,measureElement:o}=n;i.addEventListener("click",r.click,{capture:!0}),i.addEventListener("contextmenu",r.contextmenu,{capture:!0}),i.addEventListener("mousemove",r.mousemove,{once:!0,capture:!0}),i.addEventListener("mousedown",r.mousedown,{capture:!0}),p.observe(o),e({type:"element/activate",id:t})}function w({id:t,elements:n,handlers:r}){let{element:i,measureElement:o}=n;g(i,r),p.unobserve(o),h=h.filter(e=>e!==i),e({type:"element/deactivate",id:t})}function E(t){if(!(!n&&!i||!o))for(let n of h){if(t===n){let n=u.get(t)?.sanity;if(!n||!tf(n))return;if(tv(t,n,l,u)){let n=t.style.cursor;n&&d.set(t,n),e({type:"overlay/setCursor",element:t,cursor:"move"});continue}}_(n)}}function _(t){let n=d.get(t);e({type:"overlay/setCursor",element:t,cursor:n})}function j(d){for(let p of function e(t){let n=[];function r(e,t){let r=function(e){if("object"==typeof e&&null!==e)return eU(e);try{let t=JSON.parse(e);return eU(t)}catch{return function(e){let t=e.split(";").reduce((e,t)=>{let[n,r]=t.split("=");if(!n||t.includes("=")&&!r)return e;switch(n){case"id":e.id=r;break;case"type":e.type=r;break;case"path":e.path=x.C.toString(function(e){let t=[];for(let n of e.split(".")){let e=eR.exec(n);if(e){t.push(e[1],Number(e[2]));continue}let r=eL.exec(n);if(r){t.push(r[1],[Number(r[2]),Number(r[3])]);continue}let i=eD.exec(n);if(i){t.push(i[1],{_key:i[2]});continue}t.push(n)}return t}(r));break;case"base":e.baseUrl=decodeURIComponent(r);break;case"tool":e.tool=r;break;case"workspace":e.workspace=r;break;case"projectId":e.projectId=r;break;case"dataset":e.dataset=r}return e},{});if(function(e){return!eP._run({typed:!1,value:e},{abortEarly:!0}).issues}(t))return t}(e)}}(t);if(!r)return;let i=function e(t){let{display:n}=window.getComputedStyle(t);if("inline"!==n)return t;let r=t.parentElement;return r?e(r):null}(e);i&&n.push({elements:{element:e,measureElement:i},sanity:r})}if(t)for(let i of t.childNodes){let{nodeType:t,parentElement:o,textContent:a}=i;if(tl(i)&&i.dataset?.sanityEditTarget!==void 0){let t=e(i).map(({sanity:e})=>e);if(!t.map(e=>tf(e)).every((e,t,n)=>e===n[0]))continue;let r=function(e){if(!e.length||!e.map(e=>tf(e)).every((e,t,n)=>e===n[0]))return;if(!tf(e[0]))return e[0];let t=e.filter(tf),n=e[0],r=["projectId","dataset","id","baseUrl","workspace","tool"];for(let e=1;e<t.length;e++){let i=t[e];if(r.some(e=>i[e]!==n?.[e])){n=void 0;break}n.path=function(e,t){let n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);return n=n.slice(0,i).reverse(),r=r.slice(0,i).reverse(),n.reduce((e,t,n)=>t===r[n]?[...e,t]:[],[]).reverse().join(".")}(n.path,i.path)}return n}(t);r&&n.push({elements:{element:i,measureElement:i},sanity:r})}else if(t===Node.TEXT_NODE&&o&&a){let e=tu(a);if(!e)continue;r(o,e)}else if(tl(i)){if("SCRIPT"===i.tagName||"SANITY-VISUAL-EDITING"===i.tagName)continue;if(i.dataset?.sanity)r(i,i.dataset.sanity);else if(i.dataset?.sanityEditInfo)r(i,i.dataset.sanityEditInfo);else if(tc(i)){let e=tu(i.alt,!0);if(!e)continue;r(i,e);continue}else if(td(i)){let e=tu(i.dateTime,!0);if(!e)continue;r(i,e)}else if(tp(i)){if(!i.ariaLabel)continue;let e=tu(i.ariaLabel,!0);if(!e)continue;r(i,e)}n.push(...e(i))}}return n}(d)){let{element:d}=p.elements;u.has(d)?function({elements:t,sanity:n}){let{element:r}=t,i=u.get(r);i&&(u.set(r,{...i,sanity:n}),e({type:"element/update",id:i.id,rect:eZ(r),sanity:n}))}(p):function({elements:d,sanity:p}){let{element:m,measureElement:g}=d,w={click(t){let r=t.target;if(m===v()&&m.contains(r)){n&&(t.preventDefault(),t.stopPropagation());let r=u.get(m)?.sanity;r&&!y&&e({type:"element/click",id:x,sanity:r})}},contextmenu(t){if(!("path"in p)||!n&&!i||!o||!p.path.split(".").pop()?.includes("[_key=="))return;let r=t.target;m===v()&&m.contains(r)&&((n||i)&&(t.preventDefault(),t.stopPropagation()),e({type:"element/contextmenu",id:x,position:{x:t.clientX,y:t.clientY},sanity:p}))},mousedown(t){if(t.preventDefault(),t.currentTarget!==h.at(-1)||m.getAttribute("data-sanity-drag-disable")||!n&&!i||!o)return;let r=u.get(m)?.sanity;if(!r||!tf(r)||!tm(r.path))return;let a=tv(m,p,l,u);a&&function(e){var t;let{mouseEvent:n,element:r,overlayGroup:i,handler:o,target:a,onSequenceStart:s,onSequenceEnd:u}=e;if(0!==n.button)return;window.focus();let l=i.map(e=>eZ(e.elements.element)),c=r.getAttribute("data-sanity-drag-flow")||((t=l).some(e=>t.filter(t=>!eQ(e,t)).some(t=>e.y===t.y))?"horizontal":"vertical"),d=r.getAttribute("data-sanity-drag-group"),p=!!r.getAttribute("data-sanity-drag-minimap-disable"),f=!!r.getAttribute("data-sanity-drag-prevent-default"),m=r.getAttribute("data-unstable_sanity-drag-document-height"),y=r.getAttribute("data-unstable_sanity-drag-group-height"),h=null,v=e6(n),g=document.body,{minYScaled:b,scaleFactor:w}=function(e,t){let n=t||e3(e).height,r=(n+=200)>window.innerHeight?window.innerHeight/n:1,{min:i}=e3(e.map(e=>e2(e,r,{x:window.innerWidth/2,y:0})));return{scaleFactor:r,minYScaled:i-100*r}}(l,y?~~y:null),x=!1,E=!1,_=!0;tt||(to={body:{overflow:window.getComputedStyle(document.body).overflow,height:window.getComputedStyle(document.body).height},documentElement:{overflow:window.getComputedStyle(document.documentElement).overflow,height:window.getComputedStyle(document.documentElement).height}},ti=m?~~m:document.documentElement.scrollHeight);let j=setInterval(()=>{l=i.map(e=>eZ(e.elements.element))},150),k=()=>{!(w>=1)&&(o({type:"overlay/dragUpdateSkeleton",skeleton:e9(tr,r,w)}),o({type:"overlay/dragToggleMinimapPrompt",display:!1}),e8(g,w,b,o,150).then(()=>{setTimeout(()=>{o({type:"overlay/dragUpdateGroupRect",groupRect:e7(l)})},300)}))},I=e=>{Math.abs(e.deltaY)>=10&&w<1&&!tt&&!E&&!p&&_&&(o({type:"overlay/dragToggleMinimapPrompt",display:!0}),E=!0),!e.shiftKey||tt||p||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),tt=!0,setTimeout(()=>{k()},50))},S=e=>{if(e.preventDefault(),tn=function(e){let t=document.body,n=window.getComputedStyle(t).transform;if("none"===n)return{x:e.x,y:e.y};let r=new DOMMatrix(n).inverse(),i=new DOMPoint(e.x,e.y).matrixTransform(r);return{x:i.x,y:i.y}}(tr=e6(e)),4>Math.abs(e0(tr,v)))return;if(!x){let e=e7(l),t=e9(tr,r,1);o({type:"overlay/dragStart",flow:c}),o({type:"overlay/dragUpdateSkeleton",skeleton:t}),o({type:"overlay/dragUpdateGroupRect",groupRect:e}),x=!0,s()}o({type:"overlay/dragUpdateCursorPosition",x:tr.x,y:tr.y}),!e.shiftKey||tt||p||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),tt=!0,setTimeout(()=>{k()},50));let t=function(e,t,n){if("horizontal"===n){let r={x1:e.x,y1:e.y,x2:e.x-1e8,y2:e.y},i={x1:e.x,y1:e.y,x2:e.x+1e8,y2:e.y};return{left:e1(r,t,n),right:e1(i,t,n)}}{let r={x1:e.x,y1:e.y,x2:e.x,y2:e.y-1e8},i={x1:e.x,y1:e.y,x2:e.x,y2:e.y+1e8};return{top:e1(r,t,n),bottom:e1(i,t,n)}}}(tr,l,c);JSON.stringify(h)!==JSON.stringify(t)&&o({type:"overlay/dragUpdateInsertPosition",insertPosition:e5(i,h=t,c)})},M=()=>{_=!1,o({type:"overlay/dragEnd",target:a,insertPosition:h?e5(i,h,c):null,dragGroup:d,flow:c,preventInsertDefault:f}),E&&o({type:"overlay/dragToggleMinimapPrompt",display:!1}),tt||(clearInterval(j),u(),T(),C()),A()},O=e=>{"Shift"===e.key&&tt&&(tt=!1,o({type:"overlay/dragUpdateSkeleton",skeleton:e9(tr,r,1/w)}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{te(tn.y,g,ti,o,150,to)},50),o({type:"overlay/dragUpdateGroupRect",groupRect:null}),_||(clearInterval(j),A(),T(),C(),u()))},$=()=>{o({type:"overlay/dragUpdateGroupRect",groupRect:null}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{te(tn.y,g,ti,o,150,to).then(()=>{tt=!1})},50),clearInterval(j),A(),T(),C(),u()},A=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("wheel",I),window.removeEventListener("mouseup",M)},C=()=>{window.removeEventListener("keyup",O)},T=()=>{window.removeEventListener("blur",$)};window.addEventListener("blur",$),window.addEventListener("keyup",O),window.addEventListener("wheel",I),window.addEventListener("mousemove",S),window.addEventListener("mouseup",M)}({element:m,handler:e,mouseEvent:t,overlayGroup:a,target:r,onSequenceStart:()=>{y=!0},onSequenceEnd:()=>{setTimeout(()=>{y=!1},250)}})},mousemove(e){w.mouseenter(e);let t=e.currentTarget;t&&(t.addEventListener("mouseenter",w.mouseenter),t.addEventListener("mouseleave",w.mouseleave))},mouseenter(){document.querySelector("vercel-live-feedback")&&m.closest("[data-vercel-edit-info]")||m.closest("[data-vercel-edit-target]")||(h.push(m),e({type:"element/mouseenter",id:x,rect:eZ(m)}),E(m))},mouseleave(n){function r(){h.pop();let t=v();if(e({type:"element/mouseleave",id:x}),t){E(t);let n=u.get(t);n&&e({type:"element/mouseenter",id:n.id,rect:eZ(t)})}_(m)}let{relatedTarget:i}=n,o=ts(i),a=t.contains(o);if(ta(o)&&a)return function e(t){let n=i=>{let{relatedTarget:o}=i;ts(o)?o&&ta(o)&&(t.removeEventListener("mouseleave",n),e(o)):(t.removeEventListener("mouseleave",n),r())};t.addEventListener("mouseleave",n)}(o);r()}},x=function(e,t,n){if(eK.randomUUID&&!e)return eK.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!r){if(typeof crypto>"u"||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(eH)}();if(i.length<16)throw Error("Random bytes length must be >= 16");return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(e,t=0){return(eX[e[t+0]]+eX[e[t+1]]+eX[e[t+2]]+eX[e[t+3]]+"-"+eX[e[t+4]]+eX[e[t+5]]+"-"+eX[e[t+6]]+eX[e[t+7]]+"-"+eX[e[t+8]]+eX[e[t+9]]+"-"+eX[e[t+10]]+eX[e[t+11]]+eX[e[t+12]]+eX[e[t+13]]+eX[e[t+14]]+eX[e[t+15]]).toLowerCase()}(i)}(),j={id:x,elements:d,sanity:p,handlers:w};l.add(m),c.set(g,m),s.set(x,m),u.set(m,j),f?.observe(m),e({type:"element/register",id:x,element:m,rect:eZ(m),sanity:p,dragDisabled:!!m.getAttribute("data-sanity-drag-disable")}),a&&b(j)}(p)}}function k(t){let n=u.get(t);if(n){let{id:r,handlers:i}=n;g(t,i),p.unobserve(t),u.delete(t),l.delete(t),s.delete(r),e({type:"element/unregister",id:r})}}function I(t){let n=u.get(t);n&&e({type:"element/updateRect",id:n.id,rect:eZ(t)})}function S(e){if(a)for(let t of e){let{target:e}=t,n=ta(e)&&u.get(e);n&&(t.isIntersecting?b(n):w(n))}}function M(t){let n=ts(t.target);if(n){"capture"===n.dataset.sanityOverlayElement&&(t.preventDefault(),t.stopPropagation());return}h=[],e({type:"overlay/blur"})}function O(){for(let e of l)I(e)}function $(t){"Escape"===t.key&&(h=[],e({type:"overlay/blur"}))}function A(e){let{target:t}=e;if(!(t===window.document||!ta(t)))for(let e of l)t.contains(e)&&I(e)}function C(){a||(f=new IntersectionObserver(S,{threshold:.3}),l.forEach(e=>f.observe(e)),e({type:"overlay/activate"}),a=!0)}function T(){a&&(f?.disconnect(),l.forEach(e=>{let t=u.get(e);t&&w(t)}),e({type:"overlay/deactivate"}),a=!1)}return window.document.fonts.ready.then(()=>{for(let e of l)I(e)}),window.addEventListener("click",M),window.addEventListener("contextmenu",M),window.addEventListener("keydown",$),window.addEventListener("resize",O),window.addEventListener("scroll",A,{capture:!0,passive:!0}),p=new ResizeObserver(function(e){for(let t of e){let e=t.target;if(ta(e)){let t=c.get(e);if(!t)return;I(t)}}}),(m=new MutationObserver(function(e){let n=!1;for(let r of e){let{target:e,type:i}=r,o="characterData"===i?e.parentElement:e;o===t||t.contains(o)||(n=!0,ta(o)&&j({childNodes:[o]}))}if(n)for(let e of l)e.isConnected||k(e)})).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),j(document.body),C(),{activate:C,deactivate:T,destroy:function(){window.removeEventListener("click",M),window.removeEventListener("contextmenu",M),window.removeEventListener("keydown",$),window.removeEventListener("resize",O),window.removeEventListener("scroll",A),m.disconnect(),p.disconnect(),l.forEach(e=>{k(e)}),s.clear(),l.clear(),h=[],T()}}}({handler:t,overlayElement:e,inFrame:n,inPopUp:i,optimisticActorReady:l}),()=>{u.current?.destroy(),u.current=void 0}},a=[e,t,n,i,l],s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=l,s[5]=o,s[6]=a):(o=s[5],a=s[6]),(0,b.useEffect)(o,a),u}(p,t,u,l);return o[6]!==y.current||o[7]!==d?(n=()=>{d?y.current?.activate():y.current?.deactivate()},o[6]=y.current,o[7]=d,o[8]=n):n=o[8],o[9]!==y||o[10]!==d?(i=[y,d],o[9]=y,o[10]=d,o[11]=i):i=o[11],(0,b.useEffect)(n,i),null},o_=e=>{let t,n,r,i,o,a,s,u,l,c,d,p,f,m,y,g,w,x,_,j,k,I,S,M,O;let $=(0,v.c)(74),{comlink:A,comlinkStatus:C,componentResolver:T,inFrame:P,inPopUp:R,zIndex:L}=e,D=(0,E.Xy)();$[0]===Symbol.for("react.memo_cache_sentinel")?(t={contextMenu:null,dragInsertPosition:null,dragShowMinimap:!1,dragShowMinimapPrompt:!1,dragSkeleton:null,elements:[],focusPath:"",isDragging:!1,perspective:"published",wasMaybeCollapsed:!1,dragMinimapTransition:!1,dragGroupRect:null},$[0]=t):t=$[0];let[z,N]=(0,b.useReducer)(oi,t),{contextMenu:U,dragInsertPosition:V,dragShowMinimap:F,dragShowMinimapPrompt:W,dragSkeleton:Y,elements:q,isDragging:G,perspective:X,wasMaybeCollapsed:H,dragMinimapTransition:K,dragGroupRect:Z}=z,[J,Q]=(0,b.useState)(null),[ee,et]=(0,b.useState)(!0);$[1]!==A?(n=()=>{let e=[A?.on("presentation/focus",e=>{N({type:"presentation/focus",data:e})}),A?.on("presentation/blur",e=>{N({type:"presentation/blur",data:e})}),A?.on("presentation/toggle-overlay",()=>{et(oS)})].filter(Boolean);return()=>e.forEach(oM)},r=[A],$[1]=A,$[2]=n,$[3]=r):(n=$[2],r=$[3]),(0,b.useEffect)(n,r),function(e,t){let n,r;let i=(0,v.c)(4);i[0]!==e||i[1]!==t?(n=()=>{let n=new AbortController;e?.fetch("visual-editing/fetch-perspective",void 0,{signal:n.signal,suppressWarnings:!0}).then(e=>{t({type:"presentation/perspective",data:e})}).catch(oy);let r=e?.on("presentation/perspective",e=>{t({type:"presentation/perspective",data:e})});return()=>{r?.(),n.abort()}},r=[e,t],i[0]=e,i[1]=t,i[2]=n,i[3]=r):(n=i[2],r=i[3]),(0,b.useEffect)(n,r)}(A,N),function(e,t,n){let r,i,o;let a=(0,v.c)(7),s=(0,b.useRef)(void 0);a[0]!==e?(r=(t,n)=>{e?.post("visual-editing/documents",{documents:t,perspective:n})},a[0]=e,a[1]=r):r=a[1];let u=r;a[2]!==t||a[3]!==n||a[4]!==u?(i=()=>{let e=t.map(og).filter(ov),r=new Set(e.map(oh));if(!s.current||!function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(r,s.current.nodeIds)||n!==s.current.perspective){let t=Array.from(r).map(t=>{let{type:n,projectId:r,dataset:i}=e.find(e=>e.id===t);return r&&i?{_id:t,_type:n,_projectId:r,_dataset:i}:{_id:t,_type:n}});s.current={nodeIds:r,perspective:n},u(t,n)}},o=[t,n,u],a[2]=t,a[3]=n,a[4]=u,a[5]=i,a[6]=o):(i=a[5],o=a[6]),(0,b.useEffect)(i,o)}(A,q,X),$[4]!==J?(i=(e,t)=>{J&&(J.style.setProperty("--drag-preview-x",`${e}px`),J.style.setProperty("--drag-preview-y",`${t-window.scrollY}px`))},$[4]=J,$[5]=i):i=$[5];let en=i;$[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{let e=e=>{ok(e)&&et(o$)},t=e=>{ok(e)&&et(oA),function(e,t){return e.every(e=>oj[e]?t[oj[e]]:t.key===e.toUpperCase())}(["mod","\\"],e)&&et(oC)};return window.addEventListener("click",oO),window.addEventListener("keydown",t),window.addEventListener("keyup",e),()=>{window.removeEventListener("click",oO),window.removeEventListener("keydown",t),window.removeEventListener("keyup",e)}},a=[et],$[6]=o,$[7]=a):(o=$[6],a=$[7]),(0,b.useEffect)(o,a);let[er,eo]=(0,b.useState)(!1),[ea,es]=(0,b.useState)(!1),eu=(0,b.useRef)(void 0);$[8]!==ee?(s=()=>{if(ee)return ow(()=>{eo(!0),ow(()=>{es(!0),eu.current=setTimeout(()=>{es(!1),eo(!1)},1500)})});eu.current&&(clearTimeout(eu.current),eo(!1),es(!1))},u=[ee],$[8]=ee,$[9]=s,$[10]=u):(s=$[9],u=$[10]),(0,b.useEffect)(s,u),$[11]!==q?(c=q.flatMap(oT),$[11]=q,$[12]=c):c=$[12],l=c,$[13]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{N({type:"overlay/blur"})},$[13]=d):d=$[13];let el=d,ec=ei()!==B;p=ec?T:void 0;e:{let e;if((P||R)&&"connected"!==C||G){let e;$[14]===Symbol.for("react.memo_cache_sentinel")?(e=[],$[14]=e):e=$[14],f=e;break e}$[15]!==p||$[16]!==K||$[17]!==F||$[18]!==q||$[19]!==P||$[20]!==G||$[21]!==ec||$[22]!==H?(e=q.filter(oP).map(e=>{let{id:t,element:n,focused:r,hovered:i,rect:o,sanity:a,dragDisabled:s}=e,u=!s&&!!n.getAttribute("data-sanity")&&ec&&q.some(e=>"id"in e.sanity&&"id"in a&&th(e.sanity,a)&&e.sanity.path!==a.path);return(0,h.jsx)(i0,{componentResolver:p,element:n,enableScrollIntoView:!G&&!K&&!F,focused:r,hovered:i,node:a,rect:o,showActions:!P,draggable:u,isDragging:G||K,wasMaybeCollapsed:r&&H},t)}),$[15]=p,$[16]=K,$[17]=F,$[18]=q,$[19]=P,$[20]=G,$[21]=ec,$[22]=H,$[23]=e):e=$[23],f=e}let ed=f,ep=D?"dark":"light",ef=ea?"":void 0,em=er?"":void 0;return $[24]!==l||$[25]!==X?(m=(0,h.jsx)(ox,{documentIds:l,perspective:X}),$[24]=l,$[25]=X,$[26]=m):m=$[26],$[27]!==A||$[28]!==P||$[29]!==R||$[30]!==ee||$[31]!==J||$[32]!==en?(y=(0,h.jsx)(oE,{comlink:A,dispatch:N,inFrame:P,inPopUp:R,onDrag:en,overlayEnabled:ee,rootElement:J}),$[27]=A,$[28]=P,$[29]=R,$[30]=ee,$[31]=J,$[32]=en,$[33]=y):y=$[33],$[34]!==U?(g=U&&(0,h.jsx)(iq,{...U,onDismiss:el}),$[34]=U,$[35]=g):g=$[35],$[36]!==Z||$[37]!==V||$[38]!==K||$[39]!==W||$[40]!==G?(w=G&&!K&&(0,h.jsxs)(h.Fragment,{children:[V&&(0,h.jsx)(i6,{dragInsertPosition:V}),W&&(0,h.jsx)(on,{}),Z&&(0,h.jsx)(i5,{dragGroupRect:Z})]}),$[36]=Z,$[37]=V,$[38]=K,$[39]=W,$[40]=G,$[41]=w):w=$[41],$[42]!==Y||$[43]!==G?(x=G&&Y&&(0,h.jsx)(i8,{skeleton:Y}),$[42]=Y,$[43]=G,$[44]=x):x=$[44],$[45]!==ed||$[46]!==ef||$[47]!==em||$[48]!==m||$[49]!==y||$[50]!==g||$[51]!==w||$[52]!==x||$[53]!==L?(_=(0,h.jsxs)(ob,{"data-fading-out":ef,"data-overlays":em,ref:Q,$zIndex:L,children:[m,y,g,ed,w,x]}),$[45]=ed,$[46]=ef,$[47]=em,$[48]=m,$[49]=y,$[50]=g,$[51]=w,$[52]=x,$[53]=L,$[54]=_):_=$[54],$[55]!==A||$[56]!==_?(j=(0,h.jsx)(od,{comlink:A,children:_}),$[55]=A,$[56]=_,$[57]=j):j=$[57],$[58]!==A||$[59]!==j?(k=(0,h.jsx)(oo,{comlink:A,children:j}),$[58]=A,$[59]=j,$[60]=k):k=$[60],$[61]!==A||$[62]!==q||$[63]!==k?(I=(0,h.jsx)(ou,{comlink:A,elements:q,children:k}),$[61]=A,$[62]=q,$[63]=k,$[64]=I):I=$[64],$[65]!==J||$[66]!==I?(S=(0,h.jsx)(E.XS,{children:(0,h.jsx)(E.GD,{element:J,children:I})}),$[65]=J,$[66]=I,$[67]=S):S=$[67],$[68]!==ep||$[69]!==S?(M=(0,h.jsx)(E.NP,{scheme:ep,theme:E.Qx,tone:"transparent",children:S}),$[68]=ep,$[69]=S,$[70]=M):M=$[70],$[71]!==A||$[72]!==M?(O=(0,h.jsx)(om,{comlink:A,children:M}),$[71]=A,$[72]=M,$[73]=O):O=$[73],O},oj={alt:"altKey",ctrl:"ctrlKey",mod:"u">typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey",shift:"shiftKey"};function ok(e){return"Alt"===e.key}function oI(e,t){return e.filter(e=>e!==t)}function oS(e){return!e}function oM(e){return e()}function oO(e){let t=e.target;if(((0,E.nY)(t)||(0,E.sb)(t)&&t.closest("a"))&&e.altKey){e.preventDefault(),e.stopPropagation();let t=new MouseEvent(e.type,{...e,altKey:!1,bubbles:!0,cancelable:!0});e.target?.dispatchEvent(t)}}function o$(e){return!e}function oA(e){return!e}function oC(e){return!e}function oT(e){return"id"in e.sanity?[e.sanity.id]:[]}function oP(e){return e.activated||e.focused}let oR=e=>{let t,n;let r=(0,v.c)(4),{comlink:i,refresh:o}=e,a=(0,b.useRef)(0),s=(0,b.useRef)(0);return r[0]!==i||r[1]!==o?(t=()=>i.on("presentation/refresh",e=>{if("manual"===e.source){let t;clearTimeout(a.current);let n=o(e);!1!==n&&(i.post("visual-editing/refreshing",e),t=!1,a.current=window.setTimeout(()=>{i.post("visual-editing/refreshed",e),t=!0},3e3),n?.finally?.(()=>{t||(clearTimeout(a.current),i.post("visual-editing/refreshed",e))}))}else if("mutation"===e.source){clearTimeout(s.current);let t=o(e);if(!1===t)return;i.post("visual-editing/refreshing",e),s.current=window.setTimeout(()=>{let t=o(e);!1!==t&&(i.post("visual-editing/refreshing",e),t?.finally?.(()=>{i.post("visual-editing/refreshed",e)})||i.post("visual-editing/refreshed",e))},1e3),t?.finally?.(()=>{i.post("visual-editing/refreshed",e)})||i.post("visual-editing/refreshed",e)}}),n=[i,o],r[0]=i,r[1]=o,r[2]=t,r[3]=n):(t=r[2],n=r[3]),(0,b.useEffect)(t,n),null};function oL(e){let{data:t,origin:n}=e;t&&"object"==typeof t&&"domain"in t&&"sanity/channels"===t.domain&&"from"in t&&"presentation"===t.from&&"type"in t&&"presentation/status"===t.type&&window.parent.postMessage({domain:"sanity/channels",type:"visual-editing/status",data:{origin:location.origin}},n)}function oD(){console.warn("[@sanity/visual-editing] Package version mismatch detected: Please update your Sanity studio to prevent potential compatibility issues.")}function oz(){}let oN=e=>{let t,n,r,i,o,a,s,u;let l=(0,v.c)(22),{components:c,history:d,portal:p,refresh:f,zIndex:m}=e,y=void 0===p||p,[x,E]=(0,b.useState)(null),[_,j]=(0,b.useState)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{E((0,g.Fk)()),j((0,g.v$)())},n=[],l[0]=t,l[1]=n):(t=l[0],n=l[1]),(0,b.useEffect)(t,n);let[k,I]=(0,b.useState)(null);l[2]!==y?(r=()=>{if(!1===y)return;let e=document.createElement("sanity-visual-editing");return document.documentElement.appendChild(e),I(e),()=>{I(null),document.documentElement.contains(e)&&document.documentElement.removeChild(e)}},i=[y],l[2]=y,l[3]=r,l[4]=i):(r=l[3],i=l[4]),(0,b.useEffect)(r,i);let[S,M]=function(e){let t,n,r,i,o;let a=(0,v.c)(9),s=void 0===e||e,[u,l]=(0,b.useState)(),[c,d]=(0,b.useState)("idle");return a[0]!==s?(t=()=>{if(!s)return;let e=(0,tL.RM)({name:"visual-editing",connectTo:"presentation"},(0,tL.Uc)().provide({actors:(0,g.jF)()})),t=e.onStatus(()=>d("connected"),"connected");l(e);let n=e.start();return()=>{t(),n(),l(void 0)}},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,b.useEffect)(t,n),a[3]!==c?(r=()=>{if("connected"===c)return;let e=new AbortController;return window.addEventListener("message",oL,{signal:e.signal}),()=>{e.abort()}},i=[c],a[3]=c,a[4]=r,a[5]=i):(r=a[4],i=a[5]),(0,b.useEffect)(r,i),a[6]!==u||a[7]!==c?(o=[u,c],a[6]=u,a[7]=c,a[8]=o):o=a[8],o}(!0===x||!0===_);(function(e){let t,n;let r=(0,v.c)(3);r[0]!==e?(t=()=>{if(!e)return;let t=function(e){let t=new tz.m(1),n=new tN.B;return e.fetch("visual-editing/snapshot-welcome",void 0,{suppressWarnings:!0}).then(e=>{t.next(e.event)}).catch(()=>{}),e.on("presentation/snapshot-event",e=>{"reconnect"===e.event.type&&t.next(e.event),"mutation"===e.event.type&&n.next(e.event)}),(0,tU.h)(t,n)}(e),n=i$(e),r=(0,tD.A)(n,{input:{client:{withConfig:oz},sharedListener:t}});r.start();let i=new AbortController;return e.fetch("visual-editing/features",void 0,{signal:i.signal,suppressWarnings:!0}).then(e=>{e.features.optimistic&&function(e){for(let t of(G=e,X))t()}(r)}).catch(oD),()=>{r.stop(),i.abort()}},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,b.useEffect)(t,n)})("connected"===M?S:void 0),l[5]!==S||l[6]!==M||l[7]!==c||l[8]!==x||l[9]!==_||l[10]!==m?(o=null!==x&&null!==_&&(0,h.jsx)(o_,{comlink:S,comlinkStatus:M,componentResolver:c,inFrame:x,inPopUp:_,zIndex:m}),l[5]=S,l[6]=M,l[7]=c,l[8]=x,l[9]=_,l[10]=m,l[11]=o):o=l[11],l[12]!==S||l[13]!==d||l[14]!==f?(a=S&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iA,{comlink:S,history:d}),(0,h.jsx)(iC,{comlink:S}),f&&(0,h.jsx)(oR,{comlink:S,refresh:f})]}),l[12]=S,l[13]=d,l[14]=f,l[15]=a):a=l[15],l[16]!==o||l[17]!==a?(s=(0,h.jsxs)(h.Fragment,{children:[o,a]}),l[16]=o,l[17]=a,l[18]=s):s=l[18];let O=s;return!1!==y&&k?(l[19]!==O||l[20]!==k?(u=(0,w.createPortal)(O,k),l[19]=O,l[20]=k,l[21]=u):u=l[21],u):O};oN.displayName="VisualEditing";var oU=n(16189),oV=n(6475);let oF=(0,oV.createServerReference)("7fdfca811e246c40778048c85b4042223cced3b0ac",oV.callServer,void 0,oV.findSourceMapURL,"revalidateRootLayout");function oW(e){let t=e.indexOf("#"),n=e.indexOf("?"),r=n>-1&&(t<0||n<t);return r||t>-1?{pathname:e.substring(0,r?n:t),query:r?e.substring(n,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function oY(e,t){if(!function(e,t){if("string"!=typeof e)return!1;let{pathname:n}=oW(e);return n===t||n.startsWith(`${t}/`)}(e,t))return e;let n=e.slice(t.length);return n.startsWith("/")?n:`/${n}`}let oq=(e,t)=>{let{pathname:n,query:r,hash:i}=oW(e);return t?n.endsWith("/")?`${n}${r}${i}`:`${n}/${r}${i}`:`${n.replace(/\/$/,"")||"/"}${r}${i}`};function oB(e){let{basePath:t="",components:n,refresh:r,trailingSlash:i=!1,zIndex:o}=e,a=(0,oU.useRouter)(),s=(0,b.useRef)(a),[u,l]=(0,b.useState)();(0,b.useEffect)(()=>{s.current=a},[a]);let c=(0,b.useMemo)(()=>({subscribe:e=>(l(()=>e),()=>l(void 0)),update:e=>{switch(e.type){case"push":return s.current.push(oY(e.url,t));case"pop":return s.current.back();case"replace":return s.current.replace(oY(e.url,t));default:throw Error(`Unknown update type: ${e.type}`)}}}),[t]),d=(0,oU.usePathname)(),p=(0,oU.useSearchParams)();(0,b.useEffect)(()=>{u&&u({type:"push",url:oq(function(e,t){if(!e.startsWith("/")||!t)return e;if("/"===e&&t)return t;let{pathname:n,query:r,hash:i}=oW(e);return`${t}${n}${r}${i}`}(`${d}${p?.size?`?${p}`:""}`,t),i)})},[t,u,d,p,i]);let f=(0,b.useCallback)(e=>{if(r)return r(e);switch(e.source){case"manual":return e.livePreviewEnabled?(console.debug("Live preview is setup, calling router.refresh() to refresh the server components without refetching cached data"),s.current.refresh(),Promise.resolve()):(console.debug("No loaders in live mode detected, or preview kit setup, revalidating root layout"),oF());case"mutation":return e.livePreviewEnabled?(console.debug("Live preview is setup, mutation is skipped assuming its handled by the live preview"),!1):(console.debug("No loaders in live mode detected, or preview kit setup, revalidating root layout"),oF());default:throw Error("Unknown refresh source",{cause:e})}},[r]);return(0,h.jsx)(oN,{components:n,history:c,portal:!0,refresh:f,zIndex:o})}}};